<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pisa.core package &mdash; PISA 4.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=9f5556dd"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pisa.scripts package" href="pisa.scripts.html" />
    <link rel="prev" title="pisa.analysis package" href="pisa.analysis.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            PISA
          </a>
              <div class="version">
                4.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="pisa.html">pisa package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="pisa.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="pisa.analysis.html">pisa.analysis package</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">pisa.core package</a></li>
<li class="toctree-l4"><a class="reference internal" href="pisa.scripts.html">pisa.scripts package</a></li>
<li class="toctree-l4"><a class="reference internal" href="pisa.stages.html">pisa.stages package</a></li>
<li class="toctree-l4"><a class="reference internal" href="pisa.utils.html">pisa.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pisa.html#module-pisa">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PISA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">pisa</a></li>
          <li class="breadcrumb-item"><a href="pisa.html">pisa package</a></li>
      <li class="breadcrumb-item active">pisa.core package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/pisa.core.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pisa-core-package">
<h1>pisa.core package<a class="headerlink" href="#pisa-core-package" title="Link to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading"></a></h2>
</section>
<section id="module-pisa.core.bin_indexing">
<span id="pisa-core-bin-indexing-module"></span><h2>pisa.core.bin_indexing module<a class="headerlink" href="#module-pisa.core.bin_indexing" title="Link to this heading"></a></h2>
<p>Functions to retrieve the bin index for a 1- to 3-dimensional sample.</p>
<p>Functions were adapted from translation.py</p>
<p class="rubric">Notes</p>
<p>The binning convention in PISA (from numpy.histogramdd) is that the lower edge
is inclusive and upper edge is exclusive for a given bin, except for the
upper-most bin whose upper edge is also inclusive. Visually, for 1D:</p>
<blockquote>
<div><p>[ bin 0 ) [ bin 1 ) … [ bin num_bins - 1 ]</p>
</div></blockquote>
<p>First bin is index = 0 and last bin is index = (num_bins - 1)</p>
<ul class="simple">
<li><p>Values below the lowermost-edge of any dimension’s binning return index = -1</p></li>
<li><p>NaN values return index = -1</p></li>
<li><p>Otherwise, values above the uppermost-edge of any dimension’s binning return
index = num_bins</p></li>
</ul>
<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.bin_indexing.lookup_indices">
<span class="sig-prename descclassname"><span class="pre">pisa.core.bin_indexing.</span></span><span class="sig-name descname"><span class="pre">lookup_indices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sample</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binning</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/bin_indexing.html#lookup_indices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.bin_indexing.lookup_indices" title="Link to this definition"></a></dt>
<dd><p>Lookup (flattened) bin index for sample points.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sample</strong> (<em>length-M_dimensions sequence</em><em> of </em><em>length-N_events arrays</em>) – All smart arrays must have the same lengths; corresponding elements of
the arrays are the coordinates of an event in the dimensions each array
represents.</p></li>
<li><p><strong>binning</strong> (<a class="reference internal" href="#pisa.core.binning.MultiDimBinning" title="pisa.core.binning.MultiDimBinning"><em>pisa.core.binning.MultiDimBinning</em></a><em> or </em><em>convertible thereto</em>) – <cite>binning</cite> is passed to instantiate <code class="docutils literal notranslate"><span class="pre">MultiDimBinning</span></code>, so e.g., a
pisa.core.binning.OneDimBinning is valid to pass as <cite>binning</cite></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>indices</strong> – One for each event the index of the histogram in which it falls into</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>length-N_events arrays</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>this method works for 1d, 2d and 3d histogram only</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.bin_indexing.test_lookup_indices">
<span class="sig-prename descclassname"><span class="pre">pisa.core.bin_indexing.</span></span><span class="sig-name descname"><span class="pre">test_lookup_indices</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/bin_indexing.html#test_lookup_indices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.bin_indexing.test_lookup_indices" title="Link to this definition"></a></dt>
<dd><p>Unit tests for <cite>lookup_indices</cite> function</p>
</dd></dl>

</section>
<section id="module-pisa.core.binning">
<span id="pisa-core-binning-module"></span><h2>pisa.core.binning module<a class="headerlink" href="#module-pisa.core.binning" title="Link to this heading"></a></h2>
<p>Class to define binning in one dimension (OneDimBinning) and then a container
class (MultiDimBinning) for arbitrarily many of dimensions (one or more). These
classes have many useful methods for working with binning.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pisa.core.binning.</span></span><span class="sig-name descname"><span class="pre">MultiDimBinning</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dimensions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Multi-dimensional binning object. This can contain one or more
OneDimBinning objects, and all subsequent operations (e.g. slicing) will
act on these in the order they are supplied.</p>
<p>Note that it is convenient to construct MultiDimBinning objects via the *
operator (which implementes the outer product) from multiple OneDimBinning
objects. See Examples below for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dimensions</strong> (<a class="reference internal" href="#pisa.core.binning.OneDimBinning" title="pisa.core.binning.OneDimBinning"><em>OneDimBinning</em></a><em> or </em><em>sequence convertible thereto</em>) – Dimensions for the binning object. Indexing into the MultiDimBinning
object follows the order in which dimensions are provided.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#pisa.core.binning.OneDimBinning" title="pisa.core.binning.OneDimBinning"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OneDimBinning</span></code></a></dt><dd><p>each item that is not a OneDimBinning object is passed to this class to be instantiated as such.</p>
</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pisa</span> <span class="kn">import</span> <span class="n">ureg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pisa.core.binning</span> <span class="kn">import</span> <span class="n">MultiDimBinning</span><span class="p">,</span> <span class="n">OneDimBinning</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ebins</span> <span class="o">=</span> <span class="n">OneDimBinning</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;energy&#39;</span><span class="p">,</span> <span class="n">is_log</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>                      <span class="n">num_bins</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span><span class="o">*</span><span class="n">ureg</span><span class="o">.</span><span class="n">GeV</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">czbins</span> <span class="o">=</span> <span class="n">OneDimBinning</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;coszen&#39;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="n">is_lin</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">num_bins</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mdb</span> <span class="o">=</span> <span class="n">ebins</span> <span class="o">*</span> <span class="n">czbins</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">mdb</span><span class="p">)</span>
<span class="go">MultiDimBinning(</span>
<span class="go">    OneDimBinning(&#39;energy&#39;, 40 logarithmically-regular bins spanning [1.0, 100.0] GeV (behavior is logarithmic)),</span>
<span class="go">    OneDimBinning(&#39;coszen&#39;, 4 linearly-regular bins spanning [-1.0, 0.0] (behavior is linear))</span>
<span class="go">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">mdb</span><span class="o">.</span><span class="n">energy</span><span class="p">)</span>
<span class="go">OneDimBinning(&#39;energy&#39;, 40 logarithmically-regular bins spanning [1.0, 100.0] GeV (behavior is logarithmic))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">mdb</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="go">MultiDimBinning(</span>
<span class="go">    OneDimBinning(&#39;energy&#39;, 1 logarithmically-regular bin with edges at [1.0, 1.1220184543019633]GeV (behavior is logarithmic)),</span>
<span class="go">    OneDimBinning(&#39;coszen&#39;, 1 linearly-regular bin with edges at [-1.0, -0.75] (behavior is linear))</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">mdb</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="n">energy</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="go">MultiDimBinning(</span>
<span class="go">    OneDimBinning(&#39;energy&#39;, 1 logarithmically-regular bin with edges at [1.2589254117941673, 1.4125375446227544]GeV (behavior is logarithmic)),</span>
<span class="go">    OneDimBinning(&#39;coszen&#39;, 4 linearly-regular bins spanning [-1.0, 0.0] (behavior is linear))</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">smaller_binning</span> <span class="o">=</span> <span class="n">mdb</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">map</span> <span class="o">=</span> <span class="n">smaller_binning</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;my_map&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">map</span><span class="p">)</span>
<span class="go">Map(name=&#39;my_map&#39;,</span>
<span class="go">    tex=&#39;{\\rm my\\_map}&#39;,</span>
<span class="go">    full_comparison=False,</span>
<span class="go">    hash=None,</span>
<span class="go">    parent_indexer=None,</span>
<span class="go">    binning=MultiDimBinning(</span>
<span class="go">    OneDimBinning(&#39;energy&#39;, 2 logarithmically-regular bins spanning [1.0, 1.2589254117941673] GeV (behavior is logarithmic)),</span>
<span class="go">    OneDimBinning(&#39;coszen&#39;, 3 linearly-regular bins spanning [-1.0, -0.25] (behavior is linear))</span>
<span class="go">),</span>
<span class="go">    hist=array([[1., 1., 1.],</span>
<span class="go">       [1., 1., 1.]]))</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.assert_array_fits">
<span class="sig-name descname"><span class="pre">assert_array_fits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.assert_array_fits"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.assert_array_fits" title="Link to this definition"></a></dt>
<dd><p>Check if a 2D array of values fits into the defined bins (i.e., has
the exact shape defined by this binning).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>array</strong> (<em>2D array</em><em> (or </em><em>sequence-of-sequences</em><em>)</em>)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>fits</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool, True if array fits or False otherwise</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError if array shape does not match the binning shape</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.assert_compat">
<span class="sig-name descname"><span class="pre">assert_compat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.assert_compat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.assert_compat" title="Link to this definition"></a></dt>
<dd><p>Check if a (possibly different) binning can map onto the defined
binning. Allows for simple re-binning schemes (but no interpolation).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<em>Binning</em><em> or </em><em>container with attribute &quot;binning&quot;</em>)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>compat</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.basename_binning">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">basename_binning</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.basename_binning" title="Link to this definition"></a></dt>
<dd><p>Identical binning but with dimensions named by their basenames.
Note that the <cite>tex</cite> properties for the dimensions are not carried over
into the new binning.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.basenames">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">basenames</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.basenames" title="Link to this definition"></a></dt>
<dd><p>List of binning names with prefixes and/or suffixes along with any
number of possible separator characters removed. See function
<cite>basename</cite> for detailed specifications.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.bin_edges">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">bin_edges</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.bin_edges" title="Link to this definition"></a></dt>
<dd><p>Return a list of the contained dimensions’ bin_edges that is
compatible with the numpy.histogramdd <cite>hist</cite> argument.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.bin_volumes">
<span class="sig-name descname"><span class="pre">bin_volumes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attach_units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.bin_volumes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.bin_volumes" title="Link to this definition"></a></dt>
<dd><p>Bin “volumes” defined in <cite>num_dims</cite>-dimensions</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>attach_units</strong> (<em>bool</em>) – Whether to attach pint units to the resulting array</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>volumes</strong> – Bin volumes</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.broadcast">
<span class="sig-name descname"><span class="pre">broadcast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">from_dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_dims</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.broadcast"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.broadcast" title="Link to this definition"></a></dt>
<dd><p>Take a one-dimensional array representing one input dimension and
broadcast it across some number of output dimensions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>1D array</em>) – Data from the <cite>from_dim</cite> dimension. <cite>a</cite> must have same length as
the dimension it comes from (or Numpy must be able to automatically
cast it into this dimension).</p></li>
<li><p><strong>from_dim</strong> (<em>string</em>) – Name of dimension that the data in <cite>a</cite> comes from.</p></li>
<li><p><strong>to_dims</strong> (<em>string</em><em> or </em><em>iterable</em><em> of </em><em>strings</em>) – Dimension(s) to cast <cite>a</cite> into.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>a_broadcast</strong> – Broadcast version of <cite>a</cite></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#pisa.core.binning.MultiDimBinning.broadcaster" title="pisa.core.binning.MultiDimBinning.broadcaster"><code class="xref py py-obj docutils literal notranslate"><span class="pre">broadcaster</span></code></a></dt><dd><p>The method used internally to derive the tuple used to broadcast the array. This can be used directly to return the broadcaster for use on other Maps or Numpy arrays.</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.broadcaster">
<span class="sig-name descname"><span class="pre">broadcaster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_dims</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.broadcaster"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.broadcaster" title="Link to this definition"></a></dt>
<dd><p>Generate an indexder that, if applied to a one-dimensional array
representing data from one dimension, broadcasts that array into some
number of other dimensions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>from_dim</strong> (<em>string</em>) – Name of dimension that the data in comes from.</p></li>
<li><p><strong>to_dims</strong> (<em>string</em><em> or </em><em>iterable</em><em> of </em><em>strings</em>) – Dimension(s) to cast into.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>bcast</strong> – Tuple that can be applied to a Numpy array for purposes of
broadcasting it. E.g. use as <cite>np.array([0,1,2])[bcast]</cite>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.coord">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">coord</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.coord" title="Link to this definition"></a></dt>
<dd><p>coordinate for indexing into binning by dim names</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>namedtuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.dimensions">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dimensions</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.dimensions" title="Link to this definition"></a></dt>
<dd><p>each dimension’s binning in a list</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple of <a class="reference internal" href="#pisa.core.binning.OneDimBinning" title="pisa.core.binning.OneDimBinning">OneDimBinning</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.dims">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dims</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.dims" title="Link to this definition"></a></dt>
<dd><p>shortcut for <cite>dimensions</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple of <a class="reference internal" href="#pisa.core.binning.OneDimBinning" title="pisa.core.binning.OneDimBinning">OneDimBinning</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.domains">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">domains</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.domains" title="Link to this definition"></a></dt>
<dd><p>Return a list of the contained dimensions’ domains</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.downsample">
<span class="sig-name descname"><span class="pre">downsample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.downsample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.downsample" title="Link to this definition"></a></dt>
<dd><p>Return a Binning object downsampled relative to this binning.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> (<em>each factor an int</em>) – Factors by which to downsample the binnings. There must either be
one factor (one arg)–which will be broadcast to all dimensions–or
there must be as many factors (args) as there are dimensions.
If positional args are specified (i.e., non-kwargs), then kwargs
are forbidden.</p></li>
<li><p><strong>**kwargs</strong> (<em>name=factor pairs</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>new_binning</strong> – New binning, downsampled from the current binning.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pisa.core.binning.MultiDimBinning" title="pisa.core.binning.MultiDimBinning">MultiDimBinning</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Can either specify downsampling by passing in args (ordered values, no
keywords) or kwargs (order doesn’t matter, but uses keywords), but not
both.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#pisa.core.binning.MultiDimBinning.oversample" title="pisa.core.binning.MultiDimBinning.oversample"><code class="xref py py-obj docutils literal notranslate"><span class="pre">oversample</span></code></a></dt><dd><p>Oversample (upsample) a the MultiDimBinning</p>
</dd>
<dt><a class="reference internal" href="#pisa.core.binning.OneDimBinning.downsample" title="pisa.core.binning.OneDimBinning.downsample"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OneDimBinning.downsample</span></code></a></dt><dd><p>The method actually called to perform the downsampling for each OneDimBinning within this MultiDimBinning object.</p>
</dd>
<dt><a class="reference internal" href="#pisa.core.binning.OneDimBinning.oversample" title="pisa.core.binning.OneDimBinning.oversample"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OneDimBinning.oversample</span></code></a></dt><dd><p>Same, but oversample (upsample) a OneDimBinning object</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.edges_hash">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">edges_hash</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.edges_hash" title="Link to this definition"></a></dt>
<dd><p>hash on the list of hashes for each dimension’s edge values</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.empty">
<span class="sig-name descname"><span class="pre">empty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">map_kw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.empty"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.empty" title="Link to this definition"></a></dt>
<dd><p>Return a Map whose hist is an “empty” numpy ndarray with same
dimensions as this binning.</p>
<p>The contents are not _actually_ empty, just undefined. Therefore be
careful to populate the array prior to using its contents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>string</em>) – Name of the Map</p></li>
<li><p><strong>map_kw</strong> (<em>None</em><em> or </em><em>dict</em>) – keyword arguments sent to instantiate the new Map (except <cite>name</cite>
which is specified above)</p></li>
<li><p><strong>**kwargs</strong> – keyword arguments passed on to numpy.empty() (except <cite>shape</cite> which
must be omitted)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>map</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map">Map</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.finite_binning">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">finite_binning</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.finite_binning" title="Link to this definition"></a></dt>
<dd><p>Identical binning but with infinities in bin edges replaced by
largest/smallest floating-point numbers representable with the current
pisa.FTYPE.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.from_json">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resource</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.from_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.from_json" title="Link to this definition"></a></dt>
<dd><p>Instantiate a new MultiDimBinning object from a JSON file.</p>
<p>The format of the JSON is generated by the <cite>MultiDimBinning.to_json</cite>
method, which converts a MultiDimBinning object to basic types and
numpy arrays are converted in a call to <cite>pisa.utils.jsons.to_json</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>resource</strong> (<em>str</em>) – A PISA resource specification (see pisa.utils.resources)</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#pisa.core.binning.MultiDimBinning.to_json" title="pisa.core.binning.MultiDimBinning.to_json"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_json</span></code></a>, <a class="reference internal" href="pisa.utils.html#pisa.utils.jsons.to_json" title="pisa.utils.jsons.to_json"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pisa.utils.jsons.to_json</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.full">
<span class="sig-name descname"><span class="pre">full</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fill_value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">map_kw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.full"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.full" title="Link to this definition"></a></dt>
<dd><p>Return a map whose <cite>hist</cite> is filled with <cite>fill_value</cite> of same
dimensions as this binning.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fill_value</strong> – Value with which to fill the map</p></li>
<li><p><strong>name</strong> (<em>string</em>) – Name of the map</p></li>
<li><p><strong>map_kw</strong> (<em>None</em><em> or </em><em>dict</em>) – keyword arguments sent to instantiate the new Map (except <cite>name</cite>
which is specified above)</p></li>
<li><p><strong>**kwargs</strong> – keyword arguments passed on to numpy.fill_value() (except <cite>shape</cite>,
which must be omitted)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>map</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map">Map</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.hash">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hash</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.hash" title="Link to this definition"></a></dt>
<dd><p>Unique hash value for this object</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.hashable_state">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hashable_state</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.hashable_state" title="Link to this definition"></a></dt>
<dd><p>Everything necessary to fully describe this object’s state. Note
that objects may be returned by reference, so to prevent external
modification, the user must call deepcopy() separately on the returned
OrderedDict.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>state</strong> – MultiDimBinning via MultiDimBinning(<a href="#id1"><span class="problematic" id="id2">**</span></a>state)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>OrderedDict that can be passed to instantiate a new</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.inbounds_criteria">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">inbounds_criteria</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.inbounds_criteria" title="Link to this definition"></a></dt>
<dd><p>Return string boolean criteria indicating e.g. an event falls within
the limits of the defined binning.</p>
<p>This can be used for e.g. applying cuts to events.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">pisa.core.events.keepEventsInBins</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.index">
<span class="sig-name descname"><span class="pre">index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_basenames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.index" title="Link to this definition"></a></dt>
<dd><p>Find dimension implied by <cite>dim</cite> and return its integer index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dim</strong> (<em>int</em><em>, </em><em>string</em><em>, </em><a class="reference internal" href="#pisa.core.binning.OneDimBinning" title="pisa.core.binning.OneDimBinning"><em>OneDimBinning</em></a>) – An integer index, dimesion name, or identical OneDimBinning object
to locate within the contained dimensions</p></li>
<li><p><strong>use_basenames</strong> (<em>bool</em>) – Dimension names are only compared after pre/suffixes are stripped,
allowing for e.g. <a href="#id3"><span class="problematic" id="id4">`</span></a>dim`=’true_energy’ to find ‘reco_energy’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>idx</strong> – index of the dimension corresponding to <cite>dim</cite></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>integer</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError if dim cannot be found</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.index2coord">
<span class="sig-name descname"><span class="pre">index2coord</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.index2coord"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.index2coord" title="Link to this definition"></a></dt>
<dd><p>Convert a flat index into an N-dimensional bin coordinate.</p>
<p>Useful in conjunction with <cite>enumerate(iterbins)</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>index</strong> (<em>integer</em>) – The flat index</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>coord</strong> – Coordinates are in the same order as the binning is here defined
and each coordinate is named by its corresponding dimension.
Therefore integer indexing into <cite>coord</cite> as well as named indexing
are possible.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>self.coord namedtuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.indexer">
<span class="sig-name descname"><span class="pre">indexer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.indexer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.indexer" title="Link to this definition"></a></dt>
<dd><p>Any dimension index/slice not specified by name in kwargs will
default to “:” (all elements).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>**kwargs</strong> – kwargs are names of dimension(s) and assigned to these are either
an integer index into that dimension or a Python <cite>slice</cite> object for
that dimension. See examples below for details.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>indexer</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#pisa.core.binning.MultiDimBinning.broadcast" title="pisa.core.binning.MultiDimBinning.broadcast"><code class="xref py py-obj docutils literal notranslate"><span class="pre">broadcast</span></code></a></dt><dd><p>Assignment of a one-dimensional array to a higher-dimensional array is simplified greatly by using <cite>broadcast</cite> in conjunction with <cite>indexer</cite> or <cite>pisa.core.map.Map.slice</cite>. See examples in docs for <cite>broadcast</cite>.</p>
</dd>
<dt><a class="reference internal" href="#pisa.core.binning.MultiDimBinning.broadcaster" title="pisa.core.binning.MultiDimBinning.broadcaster"><code class="xref py py-obj docutils literal notranslate"><span class="pre">broadcaster</span></code></a></dt><dd><p>Similar to <cite>broadcast</cite>, but returns a tuple that can be applied to broadcast any one-dimensional array.</p>
</dd>
<dt><a class="reference internal" href="#pisa.core.binning.MultiDimBinning.slice" title="pisa.core.binning.MultiDimBinning.slice"><code class="xref py py-obj docutils literal notranslate"><span class="pre">slice</span></code></a></dt><dd><p>Apply the <cite>indexer</cite> returned by this method to this MultiDimBinning object, returning a new MultiDimBinning object.</p>
</dd>
<dt><a class="reference internal" href="#pisa.core.map.Map.slice" title="pisa.core.map.Map.slice"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pisa.core.map.Map.slice</span></code></a></dt><dd><p>Same operation, but slices a Map object by dimension-name (internally, calls <cite>indexer</cite>).</p>
</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pisa</span> <span class="kn">import</span> <span class="n">ureg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pisa.core.binning</span> <span class="kn">import</span> <span class="n">MultiDimBinning</span><span class="p">,</span> <span class="n">OneDimBinning</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ebins</span> <span class="o">=</span> <span class="n">OneDimBinning</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;energy&#39;</span><span class="p">,</span> <span class="n">is_log</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>                      <span class="n">num_bins</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">80</span><span class="p">]</span><span class="o">*</span><span class="n">ureg</span><span class="o">.</span><span class="n">GeV</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">czbins</span> <span class="o">=</span> <span class="n">OneDimBinning</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;coszen&#39;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="n">is_lin</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">num_bins</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mdb</span> <span class="o">=</span> <span class="n">ebins</span> <span class="o">*</span> <span class="n">czbins</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">mdb</span><span class="o">.</span><span class="n">indexer</span><span class="p">(</span><span class="n">energy</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
<span class="go">(0, slice(None, None, None))</span>
</pre></div>
</div>
<p>Omitting a dimension (coszen in the above) is equivalent to slicing
with a colon (i.e., <cite>(0, slice(None))</cite>):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">mdb</span><span class="o">.</span><span class="n">indexer</span><span class="p">(</span><span class="n">energy</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">coszen</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)))</span>
<span class="go">(0, slice(None, None, None))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">mdb</span><span class="o">.</span><span class="n">indexer</span><span class="p">(</span><span class="n">energy</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span> <span class="n">coszen</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="go">(slice(None, None, None), 1)</span>
</pre></div>
</div>
<p>Now create an indexer to use on a Numpy array:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">RandomState</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">mdb</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">indexer</span> <span class="o">=</span> <span class="n">mdb</span><span class="o">.</span><span class="n">indexer</span><span class="p">(</span><span class="n">energy</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">coszen</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">indexer</span><span class="p">])</span>
<span class="go">[0.71518937 0.64589411 0.38344152 0.92559664 0.83261985]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.is_compat">
<span class="sig-name descname"><span class="pre">is_compat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.is_compat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.is_compat" title="Link to this definition"></a></dt>
<dd><p>Check if another binning is compatible with this binning.</p>
<p>Note that for now, only downsampling is allowed from other to this, and
not vice versa.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#pisa.core.binning.MultiDimBinning" title="pisa.core.binning.MultiDimBinning"><em>MultiDimBinning</em></a>)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>is_compat</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.is_irregular">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_irregular</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.is_irregular" title="Link to this definition"></a></dt>
<dd><p>Returns <cite>True</cite> if any of the 1D binnings is irregular.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.is_lin">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_lin</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.is_lin" title="Link to this definition"></a></dt>
<dd><p>Returns <cite>True</cite> iff all dimensions are linear.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.is_log">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_log</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.is_log" title="Link to this definition"></a></dt>
<dd><p>Returns <cite>True</cite> iff all dimensions are log.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.iterbins">
<span class="sig-name descname"><span class="pre">iterbins</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.iterbins"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.iterbins" title="Link to this definition"></a></dt>
<dd><p>Return an iterator over each N-dimensional bin. The elments returned
by the iterator are each a MultiDimBinning, just containing a single
bin.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bin_iterator</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#pisa.core.binning.MultiDimBinning.index2coord" title="pisa.core.binning.MultiDimBinning.index2coord"><code class="xref py py-obj docutils literal notranslate"><span class="pre">index2coord</span></code></a></dt><dd><p>convert the (flat) index to multi-dimensional coordinate, which is useful when using e.g. <cite>enumerate(iterbins)</cite></p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.itercoords">
<span class="sig-name descname"><span class="pre">itercoords</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.itercoords"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.itercoords" title="Link to this definition"></a></dt>
<dd><p>Return an iterator over each N-dimensional coordinate into the
binning. The elments returned by the iterator are each a namedtuple,
which can be used to directly index into the binning.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>coord_iterator</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#pisa.core.binning.MultiDimBinning.iterbins" title="pisa.core.binning.MultiDimBinning.iterbins"><code class="xref py py-obj docutils literal notranslate"><span class="pre">iterbins</span></code></a></dt><dd><p>Iterator over each bin</p>
</dd>
<dt><a class="reference internal" href="#pisa.core.binning.MultiDimBinning.index2coord" title="pisa.core.binning.MultiDimBinning.index2coord"><code class="xref py py-obj docutils literal notranslate"><span class="pre">index2coord</span></code></a></dt><dd><p>convert the (flat) index to multi-dimensional coordinate, which is useful when using e.g. <cite>enumerate(iterbins)</cite></p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.iterdims">
<span class="sig-name descname"><span class="pre">iterdims</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.iterdims"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.iterdims" title="Link to this definition"></a></dt>
<dd><p>Iterator over contained <cite>dimensions</cite>, each a OneDimBinning</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.iteredgetuples">
<span class="sig-name descname"><span class="pre">iteredgetuples</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.iteredgetuples"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.iteredgetuples" title="Link to this definition"></a></dt>
<dd><p>Return an iterator over each bin’s edges. The elments returned by
the iterator are a tuple of tuples, where the innermost tuples
correspond to each dimension (in the order they’re defined here).</p>
<p>Units are stripped prior to iteration for purposes of speed.</p>
<p>Note that this method is, according to one simple test, about 5000x
faster than <cite>iterbins</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>edges_iterator</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#pisa.core.binning.MultiDimBinning.iterbins" title="pisa.core.binning.MultiDimBinning.iterbins"><code class="xref py py-obj docutils literal notranslate"><span class="pre">iterbins</span></code></a></dt><dd><p>Similar, but returns a OneDimBinning object for each bin. This is slower that <cite>iteredgetuples</cite> but easier to work with.</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.ito">
<span class="sig-name descname"><span class="pre">ito</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.ito"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.ito" title="Link to this definition"></a></dt>
<dd><p>Convert units in-place. Cf. Pint’s <cite>ito</cite> method.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.mask">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">mask</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.mask" title="Link to this definition"></a></dt>
<dd><p>return the bin mask</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.mask_hash">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">mask_hash</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.mask_hash" title="Link to this definition"></a></dt>
<dd><p>Hash value based <em>solely</em> upon the mask.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.meshgrid">
<span class="sig-name descname"><span class="pre">meshgrid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attach_units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.meshgrid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.meshgrid" title="Link to this definition"></a></dt>
<dd><p>Apply NumPy’s meshgrid method on various entities of interest.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entity</strong> (<em>string</em>) – Can be any attribute of OneDimBinning that returns a 1D array with
units. E.g., one of ‘midpoints’, ‘weighted_centers’, ‘bin_edges’,
‘bin_widths’, or ‘weighted_bin_widths’</p></li>
<li><p><strong>attach_units</strong> (<em>bool</em>) – Whether to attach units to the result (can save computation time by
not doing so).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>[X1, X2,…, XN]</strong> – One ndarray or quantity is returned per dimension; see docs for
<cite>numpy.meshgrid</cite> for details</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of numpy ndarray or Pint quantities of the same</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.meshgrid</span></code></p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.midpoints">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">midpoints</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.midpoints" title="Link to this definition"></a></dt>
<dd><p>Return a list of the contained dimensions’ midpoints</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.name" title="Link to this definition"></a></dt>
<dd><p>Name of the dimension</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.names">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">names</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.names" title="Link to this definition"></a></dt>
<dd><p>names of each dimension contained</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of strings</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.normalize_values">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">normalize_values</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.normalize_values" title="Link to this definition"></a></dt>
<dd><p>Normalize quantities’ units prior to hashing</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.normalized_state">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">normalized_state</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.normalized_state" title="Link to this definition"></a></dt>
<dd><p>OrderedDict containing normalized (base units, and rounded to
appropriate precision) state attributes used for testing equality
between two objects.</p>
<p>Use <cite>hashable_state</cite> for faster equality checks and <cite>normalized_state</cite>
for inspecting the contents of each state attribute pre-hashing</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.num_bins">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">num_bins</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.num_bins" title="Link to this definition"></a></dt>
<dd><p>Return a list of the contained dimensions’ num_bins.
Note that this does not accpunt for any bin mask (since it is computed per dimension)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.num_dims">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">num_dims</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.num_dims" title="Link to this definition"></a></dt>
<dd><p>number of dimensions</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.ones">
<span class="sig-name descname"><span class="pre">ones</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">map_kw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.ones"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.ones" title="Link to this definition"></a></dt>
<dd><p>Return a numpy ndarray filled with 1’s with same dimensions as this
binning.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>string</em>) – Name of the map</p></li>
<li><p><strong>map_kw</strong> (<em>None</em><em> or </em><em>dict</em>) – keyword arguments sent to instantiate the new Map (except <cite>name</cite>
which is specified above)</p></li>
<li><p><strong>**kwargs</strong> – keyword arguments passed on to numpy.ones() (except <cite>shape</cite> which
must be omitted)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>map</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map">Map</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.oversample">
<span class="sig-name descname"><span class="pre">oversample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.oversample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.oversample" title="Link to this definition"></a></dt>
<dd><p>Return a MultiDimBinning object oversampled relative to this one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> (<em>each factor an int</em>) – Factors by which to oversample the binnings. There must either be
one factor (one arg)–which will be broadcast to all dimensions–or
there must be as many factors (args) as there are dimensions.
If positional args are specified (i.e., non-kwargs), then kwargs
are forbidden. For more detailed control, use keyword arguments to
specify the dimension(s) to be oversampled and their factors.</p></li>
<li><p><strong>**kwargs</strong> (<em>name=factor pairs</em>) – Dimensions not specified default to oversample factor of 1 (i.e.,
no oversampling)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>new_binning</strong> – New binning, oversampled from the current binning.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pisa.core.binning.MultiDimBinning" title="pisa.core.binning.MultiDimBinning">MultiDimBinning</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>You can either specify oversmapling by passing in args (ordered values,
no keywords) or kwargs (order doesn’t matter, but uses keywords), but
not both.</p>
<p>Specifying simple args (no keywords) requires either a single scalar
(in which case all dimensions will be oversampled by the same factor)
or one scalar per dimension (which oversamples the dimensions in the
order specified).</p>
<p>Specifying keyword args is far more explicit (and general), where each
dimension’s oversampling can be specified by name=factor pairs, but not
every dimension must be specified (where no oversampling is applied to
unspecified dimensions).</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#pisa.core.binning.MultiDimBinning.downsample" title="pisa.core.binning.MultiDimBinning.downsample"><code class="xref py py-obj docutils literal notranslate"><span class="pre">downsample</span></code></a></dt><dd><p>Similar to this, but downsample the MultiDimBinning</p>
</dd>
<dt><a class="reference internal" href="#pisa.core.binning.OneDimBinning.oversample" title="pisa.core.binning.OneDimBinning.oversample"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OneDimBinning.oversample</span></code></a></dt><dd><p>Oversample a OneDimBinning object; this method is called to actually perform the oversampling for each dimension within this MultiDimBinning object</p>
</dd>
<dt><a class="reference internal" href="#pisa.core.binning.OneDimBinning.downsample" title="pisa.core.binning.OneDimBinning.downsample"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OneDimBinning.downsample</span></code></a></dt><dd><p>Same but downsample for OneDimBinning</p>
</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">OneDimBinning</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">bin_edges</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">OneDimBinning</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">bin_edges</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mdb</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span>
</pre></div>
</div>
<p>The following are all equivalent:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">mdb</span><span class="o">.</span><span class="n">oversample</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="go">MultiDimBinning(</span>
<span class="go">    OneDimBinning(&#39;x&#39;, 4 linearly-regular bins spanning [0.0, 2.0] (behavior is linear)),</span>
<span class="go">    OneDimBinning(&#39;y&#39;, 2 linearly-regular bins spanning [0.0, 20.0] (behavior is linear))</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">mdb</span><span class="o">.</span><span class="n">oversample</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="go">MultiDimBinning(</span>
<span class="go">    OneDimBinning(&#39;x&#39;, 4 linearly-regular bins spanning [0.0, 2.0] (behavior is linear)),</span>
<span class="go">    OneDimBinning(&#39;y&#39;, 2 linearly-regular bins spanning [0.0, 20.0] (behavior is linear))</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">mdb</span><span class="o">.</span><span class="n">oversample</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="go">MultiDimBinning(</span>
<span class="go">    OneDimBinning(&#39;x&#39;, 4 linearly-regular bins spanning [0.0, 2.0] (behavior is linear)),</span>
<span class="go">    OneDimBinning(&#39;y&#39;, 2 linearly-regular bins spanning [0.0, 20.0] (behavior is linear))</span>
<span class="go">)</span>
</pre></div>
</div>
<p>But with kwargs, you can specify only the dimensions you want to
oversample, and the other dimension(s) remain unchanged:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">mdb</span><span class="o">.</span><span class="n">oversample</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>
<span class="go">MultiDimBinning(</span>
<span class="go">    OneDimBinning(&#39;x&#39;, 2 linearly-regular bins spanning [0.0, 2.0] (behavior is linear)),</span>
<span class="go">    OneDimBinning(&#39;y&#39;, 5 linearly-regular bins spanning [0.0, 20.0] (behavior is linear))</span>
<span class="go">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.remove">
<span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dims</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.remove"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.remove" title="Link to this definition"></a></dt>
<dd><p>Remove dimensions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dims</strong> (<em>str</em><em>, </em><em>int</em><em>, or </em><em>sequence thereof</em>) – Dimensions to be removed</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>binning</strong> – Identical binning as this but with <cite>dims</cite> removed.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pisa.core.binning.MultiDimBinning" title="pisa.core.binning.MultiDimBinning">MultiDimBinning</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.reorder_dimensions">
<span class="sig-name descname"><span class="pre">reorder_dimensions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">order</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_deepcopy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_basenames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.reorder_dimensions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.reorder_dimensions" title="Link to this definition"></a></dt>
<dd><p>Return a new MultiDimBinning object with dimensions ordered
according to <cite>order</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>order</strong> (<a class="reference internal" href="#pisa.core.binning.MultiDimBinning" title="pisa.core.binning.MultiDimBinning"><em>MultiDimBinning</em></a><em> or </em><em>sequence</em><em> of </em><em>string</em><em>, </em><em>int</em><em>, or </em><a class="reference internal" href="#pisa.core.binning.OneDimBinning" title="pisa.core.binning.OneDimBinning"><em>OneDimBinning</em></a>) – Order of dimensions to use. Strings are interpreted as dimension
basenames, integers are interpreted as dimension indices, and
OneDimBinning objects are interpreted by their <cite>basename</cite>
attributes (so e.g. the exact binnings in <cite>order</cite> do not have to
match this object’s exact binnings; only their basenames). Note
that a MultiDimBinning object is a valid sequence type to use for
<cite>order</cite>.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Dimensions specified in <cite>order</cite> that are not in this object are
ignored, but dimensions in this object that are missing in <cite>order</cite>
result in an error.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>MultiDimBinning object with reordred dimensions.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError if dimensions present in this object are missing from</strong> – </p></li>
<li><p><strong>order</strong> – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b0</span> <span class="o">=</span> <span class="n">MultiDimBinning</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b1</span> <span class="o">=</span> <span class="n">MultiDimBinning</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b2</span> <span class="o">=</span> <span class="n">b0</span><span class="o">.</span><span class="n">reorder_dimensions</span><span class="p">(</span><span class="n">b1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">b2</span><span class="o">.</span><span class="n">binning</span><span class="o">.</span><span class="n">names</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.serializable_state">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">serializable_state</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.serializable_state" title="Link to this definition"></a></dt>
<dd><p>Attributes of the object that are stored to disk. Note that
attributes may be returned as references to other objects, so to
prevent external modification of those objects, the user must call
deepcopy() separately on the returned OrderedDict.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>state dict</strong> – can be passed to instantiate a new MultiDimBinning via
<cite>MultiDimBinning(**state)</cite></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="pisa.html#pisa.OrderedDict" title="pisa.OrderedDict">OrderedDict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.shape">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">shape</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.shape" title="Link to this definition"></a></dt>
<dd><p>shape of binning, akin to <cite>nump.ndarray.shape</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.size">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">size</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.size" title="Link to this definition"></a></dt>
<dd><p>total number of bins</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.slice">
<span class="sig-name descname"><span class="pre">slice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.slice"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.slice" title="Link to this definition"></a></dt>
<dd><p>Slice the binning by dimension name. Any dimension/index not
specified by name in kwargs will default to “:” (all bins).</p>
<p>Uses <cite>indexer</cite> internally to define the indexing tuple.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>sliced_binning</strong></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#pisa.core.binning.MultiDimBinning" title="pisa.core.binning.MultiDimBinning">MultiDimBinning</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.squeeze">
<span class="sig-name descname"><span class="pre">squeeze</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.squeeze"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.squeeze" title="Link to this definition"></a></dt>
<dd><p>Remove any singleton dimensions (i.e. that have only a single bin).
Analagous to <cite>numpy.squeeze</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>MultiDimBinning with only non-singleton dimensions</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.to">
<span class="sig-name descname"><span class="pre">to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.to"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.to" title="Link to this definition"></a></dt>
<dd><p>Convert the contained dimensions to the passed units. Unspecified
dimensions will be omitted.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.to_json">
<span class="sig-name descname"><span class="pre">to_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.to_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.to_json" title="Link to this definition"></a></dt>
<dd><p>Serialize the state to a JSON file that can be instantiated as a new
object later.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – Filename; must be either a relative or absolute path (<em>not
interpreted as a PISA resource specification</em>)</p></li>
<li><p><strong>**kwargs</strong> – Further keyword args are sent to <cite>pisa.utils.jsons.to_json()</cite></p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#pisa.core.binning.MultiDimBinning.from_json" title="pisa.core.binning.MultiDimBinning.from_json"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_json</span></code></a></dt><dd><p>Instantiate new object from the file written by this method</p>
</dd>
</dl>
<p><a class="reference internal" href="pisa.utils.html#pisa.utils.jsons.to_json" title="pisa.utils.jsons.to_json"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pisa.utils.jsons.to_json</span></code></a></p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.tot_num_bins">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">tot_num_bins</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.tot_num_bins" title="Link to this definition"></a></dt>
<dd><p>Return total number of bins.
If a bin mask is used, this will only count bins that are not masked off</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.units">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">units</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.units" title="Link to this definition"></a></dt>
<dd><p>Return a list of the contained dimensions’ units</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.weighted_bin_volumes">
<span class="sig-name descname"><span class="pre">weighted_bin_volumes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attach_units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.weighted_bin_volumes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.weighted_bin_volumes" title="Link to this definition"></a></dt>
<dd><p>Bin “volumes” defined in <cite>num_dims</cite>-dimensions, but unlike
<cite>bin_volumes</cite>, the volume is evaluated in the space of the binning.
E.g., logarithmic bins have <cite>weighted_bin_volumes</cite> of equal size in
log-space.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>attach_units</strong> (<em>bool</em>) – Whether to attach pint units to the resulting array</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>volumes</strong> – Bin volumes</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.weighted_centers">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">weighted_centers</span></span><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.weighted_centers" title="Link to this definition"></a></dt>
<dd><p>Return a list of the contained dimensions’ weighted_centers (e.g.
equidistant from bin edges on logarithmic scale, if the binning is
logarithmic; otherwise linear). Access <cite>midpoints</cite> attribute for
always-linear alternative.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.MultiDimBinning.zeros">
<span class="sig-name descname"><span class="pre">zeros</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">map_kw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#MultiDimBinning.zeros"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.MultiDimBinning.zeros" title="Link to this definition"></a></dt>
<dd><p>Return a numpy ndarray filled with 0’s with same dimensions as this
binning.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>string</em>) – Name of the map</p></li>
<li><p><strong>map_kw</strong> (<em>None</em><em> or </em><em>dict</em>) – keyword arguments sent to instantiate the new Map (except <cite>name</cite>
which is specified above)</p></li>
<li><p><strong>**kwargs</strong> – keyword arguments passed on to numpy.zeros() (except <cite>shape</cite> which
must be omitted)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>map</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map">Map</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pisa.core.binning.</span></span><span class="sig-name descname"><span class="pre">OneDimBinning</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_edges</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_bins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_lin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#OneDimBinning"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.OneDimBinning" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Histogram-oriented binning specialized to a single dimension.</p>
<p>If neither <cite>is_lin</cite> nor <cite>is_log</cite> is specified, linear behavior
is assumed (i.e., <cite>is_lin</cite> is set to True).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em><em>, of </em><em>length &gt; 0</em>) – Name for this dimension. Must be valid Python name (since it will be
accessed with the dot operator). If not, name will be converted to a
valid Python name.</p></li>
<li><p><strong>tex</strong> (<em>str</em><em> or </em><em>None</em>) – TeX label for this dimension.</p></li>
<li><p><strong>bin_edges</strong> (<em>sequence</em><em> of </em><em>scalars</em><em>, or </em><em>None</em>) – Numerical values (optionally including Pint units) that represent the
<em>edges</em> of the bins. <cite>bin_edges</cite> needn’t be specified if <cite>domain</cite>,
<cite>num_bins</cite>, and optionally <cite>is_log</cite> is specified. Pint units can be
attached to <cite>bin_edges</cite>, but will be converted to <cite>units</cite> if this
argument is specified.</p></li>
<li><p><strong>units</strong> (<em>Pint unit</em><em> or </em><em>object convertible to Pint unit</em><em>, or </em><em>None</em>) – If None, units will be read from either <cite>bin_edges</cite> or <cite>domain</cite>, and if
none of these have units, the binning has unit ‘dimensionless’
attached.</p></li>
<li><p><strong>is_lin</strong> (<em>bool</em><em> or </em><em>None</em>) – Binning behavior is linear for purposes of resampling, plotting, etc.
Mutually exclusive with <cite>is_log</cite>. If neither <cite>is_lin</cite> or <cite>is_log</cite> is
True (i.e., both are None), default behavior is linear (<cite>is_lin</cite> is set
to True internally).</p></li>
<li><p><strong>is_log</strong> (<em>bool</em><em> or </em><em>None</em>) – Binning behavior is logarithmic for purposes of resampling, plotting,
etc. Mutually exclusive with <cite>is_lin</cite>. If neither <cite>is_lin</cite> or <cite>is_log</cite>
is True (i.e., both are None), default behavior is linear (<cite>is_lin</cite> is
set to True internally).</p></li>
<li><p><strong>domain</strong> (<em>length-2 sequence</em><em> of </em><em>scalars</em><em>, or </em><em>None</em>) – Units may be specified. Required along with <cite>num_bins</cite> if <cite>bin_edges</cite>
is not specified (optionally specify <cite>is_log=True</cite> to define the
<cite>bin_edges</cite> to be log-uniform).</p></li>
<li><p><strong>num_bins</strong> (<em>int</em><em> or </em><em>None</em>) – Number of bins. Required along with <cite>domain</cite> if <cite>bin_edges</cite> is not
specified (optionally specify <cite>is_log=True</cite> to define the <cite>bin_edges</cite>
to be log-uniform).</p></li>
<li><p><strong>bin_names</strong> (<em>sequence</em><em> of </em><em>nonzero-length strings</em><em>, or </em><em>None</em>) – Strings by which each bin can be identified. This is expected to be
useful when one needs to easily identify bins by name where the actual
numerical values can be non-obvious e.g. the PID dimension.
None is also acceptable if there is no reason to name the bins.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Consistency is enforced for all redundant parameters passed to the
constructor.</p>
<p>You can avoid passing <cite>bin_edges</cite> if <cite>num_bins</cite> and <cite>domain</cite> are specified.
Specify <cite>is_lin=True</cite> or <cite>is_log=True</cite> to define the binning to be linear
or logarithmic (but note that if neither is specified as True, linear
behavior is the default).</p>
<p>Be careful, though, since bin edges will be defined slightly differently
depending on the <code class="docutils literal notranslate"><span class="pre">pisa.FTYPE</span></code> defined (PISA_FTYPE environment variable).</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pisa</span> <span class="kn">import</span> <span class="n">ureg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pisa.core.binning</span> <span class="kn">import</span> <span class="n">OneDimBinning</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ebins</span> <span class="o">=</span> <span class="n">OneDimBinning</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;energy&#39;</span><span class="p">,</span> <span class="n">is_log</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>                      <span class="n">num_bins</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span><span class="o">*</span><span class="n">ureg</span><span class="o">.</span><span class="n">GeV</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ebins</span><span class="p">)</span>
<span class="go">OneDimBinning(&#39;energy&#39;, 40 logarithmically-regular bins spanning [1.0, 100.0] GeV (behavior is logarithmic))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ebins2</span> <span class="o">=</span> <span class="n">ebins</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;joule&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ebins2</span><span class="p">)</span>
<span class="go">OneDimBinning(&#39;energy&#39;, 40 logarithmically-regular bins spanning [1.6021766339999998e-10, 1.602176634e-08] J (behavior is logarithmic))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">czbins</span> <span class="o">=</span> <span class="n">OneDimBinning</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;coszen&#39;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="n">is_lin</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">num_bins</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">czbins</span><span class="p">)</span>
<span class="go">OneDimBinning(&#39;coszen&#39;, 4 linearly-regular bins spanning [-1.0, 0.0] (behavior is linear))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">czbins2</span> <span class="o">=</span> <span class="n">OneDimBinning</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;coszen&#39;</span><span class="p">,</span>
<span class="gp">... </span>                        <span class="n">bin_edges</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.75</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.25</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">czbins</span> <span class="o">==</span> <span class="n">czbins2</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.assert_compat">
<span class="sig-name descname"><span class="pre">assert_compat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#OneDimBinning.assert_compat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.OneDimBinning.assert_compat" title="Link to this definition"></a></dt>
<dd><p>Assert that this binning is compatible with <cite>other</cite>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.basename">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">basename</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.basename" title="Link to this definition"></a></dt>
<dd><p>Basename of the dimension, stripping “true”, “reco”, underscores,
whitespace, etc. from the <cite>name</cite> attribute.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.basename_binning">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">basename_binning</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.basename_binning" title="Link to this definition"></a></dt>
<dd><p>Identical binning but named as the basename of this binning. Note
that the <cite>tex</cite> property is not carried over into the new binning.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.bin_edges">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">bin_edges</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.bin_edges" title="Link to this definition"></a></dt>
<dd><p>Edges of the bins.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.bin_names">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">bin_names</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.bin_names" title="Link to this definition"></a></dt>
<dd><p>Bin names</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of strings or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.bin_widths">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">bin_widths</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.bin_widths" title="Link to this definition"></a></dt>
<dd><p>Absolute widths of bins.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.domain">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">domain</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.domain" title="Link to this definition"></a></dt>
<dd><p>domain of the binning, (min, max) bin edges</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.downsample">
<span class="sig-name descname"><span class="pre">downsample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">factor</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#OneDimBinning.downsample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.OneDimBinning.downsample" title="Link to this definition"></a></dt>
<dd><p>Downsample the binning by an integer factor that evenly divides the
current number of bins.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>factor</strong> (<em>int &gt;= 1</em>) – Downsampling factor that evenly divides the current number of
bins. E.g., if the current number of bins is 4, <cite>factor</cite> can be
one of 1, 2, or 4. Note that floats are converted into integers
if <cite>float(factor) == int(factor)</cite>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>new_binning</strong> – New binning, downsampled from the current binning.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pisa.core.binning.OneDimBinning" title="pisa.core.binning.OneDimBinning">OneDimBinning</a></p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError if illegal value is specified for factor</strong> – </p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Bin names are _not_ preserved for any <cite>factor</cite> except 1 since it is
ambiguous how names should be propagated. If you wish to have bin
names after downsampling, assign them afterwards.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.edge_magnitudes">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">edge_magnitudes</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.edge_magnitudes" title="Link to this definition"></a></dt>
<dd><p>Bin edges’ magnitudes</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.edges_hash">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">edges_hash</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.edges_hash" title="Link to this definition"></a></dt>
<dd><p>Hash value based <em>solely</em> upon bin edges’ values.</p>
<p>The hash value is obtained on the edges after “normalizing” their
values if <cite>self.normalize_values</cite> is True; see
<cite>pisa.utils.comparsions.normQuant</cite> for details of the normalization
process.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.finite_binning">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">finite_binning</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.finite_binning" title="Link to this definition"></a></dt>
<dd><p>Identical binning but with infinities in bin edges replaced by
largest/smallest floating-point numbers representable with the current
pisa.FTYPE.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.from_json">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resource</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#OneDimBinning.from_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.OneDimBinning.from_json" title="Link to this definition"></a></dt>
<dd><p>Instantiate a new object from the contents of a JSON file as
formatted by the <cite>to_json</cite> method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>resource</strong> (<em>str</em>) – A PISA resource specification (see pisa.utils.resources)</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#pisa.core.binning.OneDimBinning.to_json" title="pisa.core.binning.OneDimBinning.to_json"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_json</span></code></a></p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.hash">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hash</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.hash" title="Link to this definition"></a></dt>
<dd><p>Hash value based upon less-than-double-precision-rounded
numerical values and any other state (includes name, tex, is_log, and
is_lin attributes). Rounding is done to <cite>HASH_SIGFIGS</cite> significant
figures.</p>
<p>Set this class attribute to None to keep full numerical precision in
the values hashed (but be aware that this can cause equal things
defined using different unit orders-of-magnitude to hash differently).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.hashable_state">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hashable_state</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.hashable_state" title="Link to this definition"></a></dt>
<dd><p>OrderedDict containing simplified state attributes (i.e. some state
attributes are represented by their hashes) used for testing equality
between two objects.</p>
<p>Use <cite>hashable_state</cite> for faster equality checks and <cite>normalized_state</cite>
for inspecting the contents of each state attribute pre-hashing</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.inbounds_criteria">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">inbounds_criteria</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.inbounds_criteria" title="Link to this definition"></a></dt>
<dd><p>Return string boolean criteria indicating e.g. an event falls within
the limits of the defined binning.</p>
<p>This can be used for e.g. applying cuts to events.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">pisa.core.events.keepInbounds</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.index">
<span class="sig-name descname"><span class="pre">index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#OneDimBinning.index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.OneDimBinning.index" title="Link to this definition"></a></dt>
<dd><p>Return integer index of bin identified by <cite>x</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<em>int</em><em>, </em><em>string</em>) – If int, ensure it is a valid index and return; if string, look for
bin with corresponding name.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>idx</strong> – index of bin corresponding to <cite>x</cite></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError if x cannot identify a valid bin</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.is_bin_spacing_lin_uniform">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_bin_spacing_lin_uniform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bin_edges</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#OneDimBinning.is_bin_spacing_lin_uniform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.OneDimBinning.is_bin_spacing_lin_uniform" title="Link to this definition"></a></dt>
<dd><p>Check if <cite>bin_edges</cite> define a linearly-uniform bin spacing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>bin_edges</strong> (<em>sequence</em>) – Fewer than 2 <cite>bin_edges</cite> - raises ValueError
Two <cite>bin_edges</cite> - returns True as a reasonable guess
More than two <cite>bin_edges</cite> - whether spacing is linear is computed</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError if fewer than 2 bin_edges are specified.</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.is_bin_spacing_log_uniform">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_bin_spacing_log_uniform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bin_edges</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#OneDimBinning.is_bin_spacing_log_uniform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.OneDimBinning.is_bin_spacing_log_uniform" title="Link to this definition"></a></dt>
<dd><p>Check if <cite>bin_edges</cite> define a logarithmically-uniform bin spacing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>bin_edges</strong> (<em>sequence</em>) – <p>Fewer than 2 <cite>bin_edges</cite> - raises ValueError
Two <cite>bin_edges</cite> - returns False as a reasonable guess (spacing is</p>
<blockquote>
<div><p>assumed to be linear)</p>
</div></blockquote>
<p>More than two <cite>bin_edges</cite> - whether spacing is linear is computed</p>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.is_binning_ok">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_binning_ok</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bin_edges</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#OneDimBinning.is_binning_ok"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.OneDimBinning.is_binning_ok" title="Link to this definition"></a></dt>
<dd><p>Check that there are 2 or more bin edges, and that they are
monotonically increasing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>bin_edges</strong> (<em>sequence</em>) – Bin edges to check the validity of</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool, True if binning is OK, False if not</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.is_compat">
<span class="sig-name descname"><span class="pre">is_compat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#OneDimBinning.is_compat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.OneDimBinning.is_compat" title="Link to this definition"></a></dt>
<dd><p>Compatibility – for now – is defined by all of self’s bin
edges form a subset of other’s bin edges (i.e. you can downsample to
get from the other binning to this binning), and the units must be
compatible.</p>
<p>Note that this might bear revisiting, or redefining just for special
circumstances.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#pisa.core.binning.OneDimBinning" title="pisa.core.binning.OneDimBinning"><em>OneDimBinning</em></a>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.is_irregular">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_irregular</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.is_irregular" title="Link to this definition"></a></dt>
<dd><p>True if bin spacing is not unform in the space defined (i.e.,
NOT linearly-uniform if <cite>is_lin</cite> or NOT logarithmically-uniform if
<cite>is_log</cite>).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.is_lin">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_lin</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.is_lin" title="Link to this definition"></a></dt>
<dd><p>Whether binning is to be treated in a linear space</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.is_log">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_log</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.is_log" title="Link to this definition"></a></dt>
<dd><p>Whether binning is to be treated in a log space</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.iterbins">
<span class="sig-name descname"><span class="pre">iterbins</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#OneDimBinning.iterbins"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.OneDimBinning.iterbins" title="Link to this definition"></a></dt>
<dd><p>Return an iterator over each bin. The elments returned by the
iterator are each a OneDimBinning object, just containing a single bin.</p>
<p>Note that for one test, <cite>iterbins</cite> is about 500x slower than
<cite>iteredgetuples</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bin_iterator</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#pisa.core.binning.OneDimBinning.iteredgetuples" title="pisa.core.binning.OneDimBinning.iteredgetuples"><code class="xref py py-obj docutils literal notranslate"><span class="pre">iteredgetuples</span></code></a></dt><dd><p>Faster but only returns edges of bins, not OneDimBinning objects.</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.iteredgetuples">
<span class="sig-name descname"><span class="pre">iteredgetuples</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#OneDimBinning.iteredgetuples"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.OneDimBinning.iteredgetuples" title="Link to this definition"></a></dt>
<dd><p>Return an iterator over each bin’s edges. The elments returned by
the iterator are each a tuple, containing the edges of the bin. Units
are stripped prior to iteration for purposes of speed.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>edges_iterator</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#pisa.core.binning.OneDimBinning.iterbins" title="pisa.core.binning.OneDimBinning.iterbins"><code class="xref py py-obj docutils literal notranslate"><span class="pre">iterbins</span></code></a></dt><dd><p>Similar, but returns a OneDimBinning object for each bin; slower than this method (by as much as 500x in one test) but easier to work with.</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.ito">
<span class="sig-name descname"><span class="pre">ito</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">units</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#OneDimBinning.ito"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.OneDimBinning.ito" title="Link to this definition"></a></dt>
<dd><p>Convert units in-place. Cf. Pint’s <cite>ito</cite> method.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.label">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">label</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.label" title="Link to this definition"></a></dt>
<dd><p>TeX-formatted axis label, including units (if not dimensionless)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.midpoints">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">midpoints</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.midpoints" title="Link to this definition"></a></dt>
<dd><p>linear average of each bin’s
edges.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array</p>
</dd>
<dt class="field-even">Type<span class="colon">:</span></dt>
<dd class="field-even"><p>Midpoints of the bins</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.name" title="Link to this definition"></a></dt>
<dd><p>Name of the dimension</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.normalize_values">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">normalize_values</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.normalize_values" title="Link to this definition"></a></dt>
<dd><p>Whether to normalize quantities’ units prior to hashing</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.normalized_state">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">normalized_state</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.normalized_state" title="Link to this definition"></a></dt>
<dd><p>OrderedDict containing normalized (base units, and rounded to
appropriate precision) state attributes used for testing equality
between two objects.</p>
<p>Use <cite>hashable_state</cite> for faster equality checks and <cite>normalized_state</cite>
for inspecting the contents of each state attribute pre-hashing</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.num_bins">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">num_bins</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.num_bins" title="Link to this definition"></a></dt>
<dd><p>Number of bins</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.oversample">
<span class="sig-name descname"><span class="pre">oversample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">factor</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#OneDimBinning.oversample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.OneDimBinning.oversample" title="Link to this definition"></a></dt>
<dd><p>Return a OneDimBinning object oversampled relative to this object’s
binning.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>factor</strong> (<em>integer</em>) – Factor by which to oversample the binning, with <cite>factor</cite>-times
as many bins (<em>not</em> bin edges) as this object has.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>new_binning</strong> – New binning, oversampled from the current binning.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pisa.core.binning.OneDimBinning" title="pisa.core.binning.OneDimBinning">OneDimBinning</a></p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError if illegal value is specified for factor</strong> – </p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Bin names are _not_ preserved for any <cite>factor</cite> except 1 since it is
ambiguous how names should be propagated. If you wish to have bin
names after oversampling, assign them afterwards.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.range">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">range</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.range" title="Link to this definition"></a></dt>
<dd><p>range of the binning, (max-min) bin edges</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.rehash">
<span class="sig-name descname"><span class="pre">rehash</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#OneDimBinning.rehash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.OneDimBinning.rehash" title="Link to this definition"></a></dt>
<dd><p>Force <cite>hash</cite> and <cite>edges_hash</cite> attributes to be recomputed</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.serializable_state">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">serializable_state</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.serializable_state" title="Link to this definition"></a></dt>
<dd><p>OrderedDict containing savable state attributes</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.shape">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">shape</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.shape" title="Link to this definition"></a></dt>
<dd><p>shape of binning, akin to <cite>nump.ndarray.shape</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.size">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">size</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.size" title="Link to this definition"></a></dt>
<dd><p>total number of bins</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.tex">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">tex</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.tex" title="Link to this definition"></a></dt>
<dd><p>TeX label</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.to">
<span class="sig-name descname"><span class="pre">to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">units</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#OneDimBinning.to"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.OneDimBinning.to" title="Link to this definition"></a></dt>
<dd><p>Convert bin edges’ units to <cite>units</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>units</strong> (<em>None</em><em>, </em><em>string</em><em>, or </em><em>pint.Unit</em>)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>new_binning</strong> – New binning object whose edges have units <cite>units</cite></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pisa.core.binning.OneDimBinning" title="pisa.core.binning.OneDimBinning">OneDimBinning</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.to_json">
<span class="sig-name descname"><span class="pre">to_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#OneDimBinning.to_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.OneDimBinning.to_json" title="Link to this definition"></a></dt>
<dd><p>Serialize the state to a JSON file that can be instantiated as a new
object later.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – Filename; must be either a relative or absolute path (<em>not
interpreted as a PISA resource specification</em>)</p></li>
<li><p><strong>**kwargs</strong> – Further keyword args are sent to <cite>pisa.utils.jsons.to_json()</cite></p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#pisa.core.binning.OneDimBinning.from_json" title="pisa.core.binning.OneDimBinning.from_json"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_json</span></code></a></dt><dd><p>Instantiate new OneDimBinning object from the file written by this method</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.units">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">units</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.units" title="Link to this definition"></a></dt>
<dd><p>units of the bins’ edges</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pint.Unit</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.weighted_bin_widths">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">weighted_bin_widths</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.weighted_bin_widths" title="Link to this definition"></a></dt>
<dd><p>Absolute widths of bins.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.binning.OneDimBinning.weighted_centers">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">weighted_centers</span></span><a class="headerlink" href="#pisa.core.binning.OneDimBinning.weighted_centers" title="Link to this definition"></a></dt>
<dd><p>Centers of the bins taking e.g. logarithmic behavior
into account. I.e., if binning is logarithmic, this is <strong>not</strong>
the same <cite>midpoints</cite>, whereas in all other cases, it is identical.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.binning.basename">
<span class="sig-prename descclassname"><span class="pre">pisa.core.binning.</span></span><span class="sig-name descname"><span class="pre">basename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#basename"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.basename" title="Link to this definition"></a></dt>
<dd><p>Remove “true” or “reco” prefix(es) and/or suffix(es) from binning
name <cite>n</cite> along with any number of possible separator characters.</p>
<ul class="simple">
<li><p>Valid (pre/suf)fix(es): “true”, “reco”</p></li>
<li><p>Valid separator characters: “&lt;whitespace&gt;”, “_”, “-” (any number)</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>n</strong> (<em>string</em><em> or </em><a class="reference internal" href="#pisa.core.binning.OneDimBinning" title="pisa.core.binning.OneDimBinning"><em>OneDimBinning</em></a>) – Name from which to have pre/suffixes stripped.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>basename</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">basename</span><span class="p">(</span><span class="s1">&#39;true_energy&#39;</span><span class="p">))</span>
<span class="go">energy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">basename</span><span class="p">(</span><span class="s1">&#39;Reconstructed coszen&#39;</span><span class="p">))</span>
<span class="go">coszen</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">basename</span><span class="p">(</span><span class="s1">&#39;coszen  reco&#39;</span><span class="p">))</span>
<span class="go">coszen</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">basename</span><span class="p">(</span><span class="s1">&#39;energy___truth&#39;</span><span class="p">))</span>
<span class="go">energy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">basename</span><span class="p">(</span><span class="s1">&#39;trueenergy&#39;</span><span class="p">))</span>
<span class="go">energy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">basename</span><span class="p">(</span><span class="s1">&#39;energytruth&#39;</span><span class="p">))</span>
<span class="go">energy</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.binning.is_binning">
<span class="sig-prename descclassname"><span class="pre">pisa.core.binning.</span></span><span class="sig-name descname"><span class="pre">is_binning</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">something</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#is_binning"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.is_binning" title="Link to this definition"></a></dt>
<dd><p>Return True if argument is a PISA binning (of any dimension), False
otherwise</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.binning.test_MultiDimBinning">
<span class="sig-prename descclassname"><span class="pre">pisa.core.binning.</span></span><span class="sig-name descname"><span class="pre">test_MultiDimBinning</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#test_MultiDimBinning"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.test_MultiDimBinning" title="Link to this definition"></a></dt>
<dd><p>Unit tests for MultiDimBinning class</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.binning.test_OneDimBinning">
<span class="sig-prename descclassname"><span class="pre">pisa.core.binning.</span></span><span class="sig-name descname"><span class="pre">test_OneDimBinning</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/binning.html#test_OneDimBinning"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.binning.test_OneDimBinning" title="Link to this definition"></a></dt>
<dd><p>Unit tests for OneDimBinning class</p>
</dd></dl>

</section>
<section id="module-pisa.core.container">
<span id="pisa-core-container-module"></span><h2>pisa.core.container module<a class="headerlink" href="#module-pisa.core.container" title="Link to this heading"></a></h2>
<p>Class to hold generic data in container.
he data can be unbinned or binned or scalar, while
translation methods between such different representations
are provided.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pisa.core.container.Container">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pisa.core.container.</span></span><span class="sig-name descname"><span class="pre">Container</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">representation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'events'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#Container"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.Container" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.container.Container.all_keys">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">all_keys</span></span><a class="headerlink" href="#pisa.core.container.Container.all_keys" title="Link to this definition"></a></dt>
<dd><p>return all available keys, regardless of representation</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pisa.core.container.Container.array_representations">
<span class="sig-name descname"><span class="pre">array_representations</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">('events',</span> <span class="pre">'log_events')</span></em><a class="headerlink" href="#pisa.core.container.Container.array_representations" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.container.Container.array_to_binned">
<span class="sig-name descname"><span class="pre">array_to_binned</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_representation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest_representation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">averaged</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#Container.array_to_binned"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.Container.array_to_binned" title="Link to this definition"></a></dt>
<dd><p>Histogram data array into binned data
:param key:
:type key: str
:param src_representation:
:type src_representation: str
:param dest_representation:
:type dest_representation: MultiDimBinning
:param #averaged:
:type #averaged: bool
:param #    if True:
:param the histogram entries are averages of the numbers that:
:param #    end up in a given bin. This for example must be used when oscillation:
:param #    probabilities are translated…..otherwise we end up with probability*count:
:param #    per bin:</p>
<p class="rubric">Notes</p>
<p>right now, CPU-only</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.container.Container.auto_translate">
<span class="sig-name descname"><span class="pre">auto_translate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#Container.auto_translate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.Container.auto_translate" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.container.Container.binned_to_array">
<span class="sig-name descname"><span class="pre">binned_to_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_representation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest_representation</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#Container.binned_to_array"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.Container.binned_to_array" title="Link to this definition"></a></dt>
<dd><p>Augmented binned data to array data</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pisa.core.container.Container.default_translation_mode">
<span class="sig-name descname"><span class="pre">default_translation_mode</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'average'</span></em><a class="headerlink" href="#pisa.core.container.Container.default_translation_mode" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.container.Container.find_valid_representation">
<span class="sig-name descname"><span class="pre">find_valid_representation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#Container.find_valid_representation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.Container.find_valid_representation" title="Link to this definition"></a></dt>
<dd><p>Find valid, and best representation for key</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.container.Container.get_hist">
<span class="sig-name descname"><span class="pre">get_hist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#Container.get_hist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.Container.get_hist" title="Link to this definition"></a></dt>
<dd><p>Return reshaped data as normal n-dimensional histogram</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.container.Container.get_map">
<span class="sig-name descname"><span class="pre">get_map</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#Container.get_map"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.Container.get_map" title="Link to this definition"></a></dt>
<dd><p>Return binned data in the form of a PISA map</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.container.Container.is_map">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_map</span></span><a class="headerlink" href="#pisa.core.container.Container.is_map" title="Link to this definition"></a></dt>
<dd><p>Is current representation a map/grid</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.container.Container.keys">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">keys</span></span><a class="headerlink" href="#pisa.core.container.Container.keys" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.container.Container.mark_changed">
<span class="sig-name descname"><span class="pre">mark_changed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#Container.mark_changed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.Container.mark_changed" title="Link to this definition"></a></dt>
<dd><p>mark a key as changed and only what is in the current representation is valid</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.container.Container.mark_valid">
<span class="sig-name descname"><span class="pre">mark_valid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#Container.mark_valid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.Container.mark_valid" title="Link to this definition"></a></dt>
<dd><p>validate data as is in current representation, regardless</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.container.Container.num_dims">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">num_dims</span></span><a class="headerlink" href="#pisa.core.container.Container.num_dims" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.container.Container.representation">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">representation</span></span><a class="headerlink" href="#pisa.core.container.Container.representation" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.container.Container.representation_keys">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">representation_keys</span></span><a class="headerlink" href="#pisa.core.container.Container.representation_keys" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.container.Container.representations">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">representations</span></span><a class="headerlink" href="#pisa.core.container.Container.representations" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.container.Container.resample">
<span class="sig-name descname"><span class="pre">resample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_representation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest_representation</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#Container.resample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.Container.resample" title="Link to this definition"></a></dt>
<dd><p>Resample a binned key into a different binning
:param key:
:type key: str
:param src_representation:
:type src_representation: MultiDimBinning
:param dest_representation:
:type dest_representation: MultiDimBinning</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.container.Container.set_aux_data">
<span class="sig-name descname"><span class="pre">set_aux_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#Container.set_aux_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.Container.set_aux_data" title="Link to this definition"></a></dt>
<dd><p>Add any auxillary data, which will not be translated or tied to a specific representation</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.container.Container.shape">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">shape</span></span><a class="headerlink" href="#pisa.core.container.Container.shape" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.container.Container.size">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">size</span></span><a class="headerlink" href="#pisa.core.container.Container.size" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.container.Container.translate">
<span class="sig-name descname"><span class="pre">translate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_representation</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#Container.translate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.Container.translate" title="Link to this definition"></a></dt>
<dd><p>translate variable from source representation</p>
<p>key : str
src_representation : representation present in container</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pisa.core.container.Container.translation_modes">
<span class="sig-name descname"><span class="pre">translation_modes</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">('average',</span> <span class="pre">'sum',</span> <span class="pre">None)</span></em><a class="headerlink" href="#pisa.core.container.Container.translation_modes" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.container.Container.unroll_binning">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">unroll_binning</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binning</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#Container.unroll_binning"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.Container.unroll_binning" title="Link to this definition"></a></dt>
<dd><p>Get an Array containing the unrolled binning</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pisa.core.container.ContainerSet">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pisa.core.container.</span></span><span class="sig-name descname"><span class="pre">ContainerSet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">containers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_specs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#ContainerSet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.ContainerSet" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class to hold a set of container objects</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>)</p></li>
<li><p><strong>containers</strong> (<em>list</em><em> or </em><em>None</em>)</p></li>
<li><p><strong>data_specs</strong> (<a class="reference internal" href="#pisa.core.binning.MultiDimBinning" title="pisa.core.binning.MultiDimBinning"><em>MultiDimBinning</em></a><em>, </em><em>&quot;events&quot;</em><em> or </em><em>None</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.container.ContainerSet.add_container">
<span class="sig-name descname"><span class="pre">add_container</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">container</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#ContainerSet.add_container"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.ContainerSet.add_container" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.container.ContainerSet.get_mapset">
<span class="sig-name descname"><span class="pre">get_mapset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#ContainerSet.get_mapset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.ContainerSet.get_mapset" title="Link to this definition"></a></dt>
<dd><p>For a given key, get a PISA MapSet</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>)</p></li>
<li><p><strong>error</strong> (<em>None</em><em> or </em><em>str</em>) – specify a key that errors are read from</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>map_set</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pisa.core.map.MapSet" title="pisa.core.map.MapSet">MapSet</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.container.ContainerSet.is_map">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_map</span></span><a class="headerlink" href="#pisa.core.container.ContainerSet.is_map" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.container.ContainerSet.link_containers">
<span class="sig-name descname"><span class="pre">link_containers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#ContainerSet.link_containers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.ContainerSet.link_containers" title="Link to this definition"></a></dt>
<dd><p>Link containers together. When containers are linked, they are
treated as a single (virtual) container for binned data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – name of linked object</p></li>
<li><p><strong>names</strong> (<em>list</em>) – name of containers to be linked under the given key</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.container.ContainerSet.names">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">names</span></span><a class="headerlink" href="#pisa.core.container.ContainerSet.names" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.container.ContainerSet.representation">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">representation</span></span><a class="headerlink" href="#pisa.core.container.ContainerSet.representation" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.container.ContainerSet.unlink_containers">
<span class="sig-name descname"><span class="pre">unlink_containers</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#ContainerSet.unlink_containers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.ContainerSet.unlink_containers" title="Link to this definition"></a></dt>
<dd><p>Unlink all container</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pisa.core.container.VirtualContainer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pisa.core.container.</span></span><span class="sig-name descname"><span class="pre">VirtualContainer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">containers</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#VirtualContainer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.VirtualContainer" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class providing a virtual container for linked individual containers</p>
<p>It should just behave like a normal container</p>
<p>For reading, it just uses one container as a representative (no checkng at the mment
if the others actually contain the same data)</p>
<p>For writting, it creates one object that is added to all containers</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>)</p></li>
<li><p><strong>containers</strong> (<em>list</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.container.VirtualContainer.mark_changed">
<span class="sig-name descname"><span class="pre">mark_changed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#VirtualContainer.mark_changed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.VirtualContainer.mark_changed" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.container.VirtualContainer.mark_valid">
<span class="sig-name descname"><span class="pre">mark_valid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#VirtualContainer.mark_valid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.VirtualContainer.mark_valid" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.container.VirtualContainer.representation">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">representation</span></span><a class="headerlink" href="#pisa.core.container.VirtualContainer.representation" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.container.VirtualContainer.set_aux_data">
<span class="sig-name descname"><span class="pre">set_aux_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#VirtualContainer.set_aux_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.VirtualContainer.set_aux_data" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.container.VirtualContainer.shape">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">shape</span></span><a class="headerlink" href="#pisa.core.container.VirtualContainer.shape" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.container.VirtualContainer.size">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">size</span></span><a class="headerlink" href="#pisa.core.container.VirtualContainer.size" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.container.VirtualContainer.unlink">
<span class="sig-name descname"><span class="pre">unlink</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#VirtualContainer.unlink"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.VirtualContainer.unlink" title="Link to this definition"></a></dt>
<dd><p>Reset flag and copy all accessed keys</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.container.test_container">
<span class="sig-prename descclassname"><span class="pre">pisa.core.container.</span></span><span class="sig-name descname"><span class="pre">test_container</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#test_container"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.test_container" title="Link to this definition"></a></dt>
<dd><p>Unit tests for Container class.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.container.test_container_set">
<span class="sig-prename descclassname"><span class="pre">pisa.core.container.</span></span><span class="sig-name descname"><span class="pre">test_container_set</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/container.html#test_container_set"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.container.test_container_set" title="Link to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-pisa.core.detectors">
<span id="pisa-core-detectors-module"></span><h2>pisa.core.detectors module<a class="headerlink" href="#module-pisa.core.detectors" title="Link to this heading"></a></h2>
<p>Detector class definition and a simple script to generate, save, and
plot distributions for different detectors from pipeline config file(s).
A detector is represented by a DistributionMaker.</p>
<p>DistributionMaker: A single detector
Detectors: A sequence of detectors</p>
<dl class="py class">
<dt class="sig sig-object py" id="pisa.core.detectors.Detectors">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pisa.core.detectors.</span></span><span class="sig-name descname"><span class="pre">Detectors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pipelines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_livetime_from_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">profile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shared_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/detectors.html#Detectors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.detectors.Detectors" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Container for one or more distribution makers, that represent different detectors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pipelines</strong> (<a class="reference internal" href="#pisa.core.pipeline.Pipeline" title="pisa.core.pipeline.Pipeline"><em>Pipeline</em></a><em> or </em><em>convertible thereto</em><em>, or </em><em>iterable thereof</em>) – A new pipline is instantiated with each object passed. Legal objects
are already-instantiated Pipelines and anything interpret-able by the
Pipeline init method.</p></li>
<li><p><strong>shared_params</strong> (<em>Parameter to be treated the same way in all the</em>) – distribution_makers that contain them.</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.detectors.Detectors.distribution_makers">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">distribution_makers</span></span><a class="headerlink" href="#pisa.core.detectors.Detectors.distribution_makers" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.detectors.Detectors.empty_bin_indices">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">empty_bin_indices</span></span><a class="headerlink" href="#pisa.core.detectors.Detectors.empty_bin_indices" title="Link to this definition"></a></dt>
<dd><p>Find indices where there are no events present</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.detectors.Detectors.get_outputs">
<span class="sig-name descname"><span class="pre">get_outputs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/detectors.html#Detectors.get_outputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.detectors.Detectors.get_outputs" title="Link to this definition"></a></dt>
<dd><p>Compute and return the outputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>**kwargs</strong> – Passed on to each distribution_maker’s <cite>get_outputs</cite> method.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>List of MapSets if <cite>return_sum=True</cite> or list of lists of MapSets if <cite>return_sum=False</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.detectors.Detectors.hash">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hash</span></span><a class="headerlink" href="#pisa.core.detectors.Detectors.hash" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.detectors.Detectors.init_params">
<span class="sig-name descname"><span class="pre">init_params</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/detectors.html#Detectors.init_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.detectors.Detectors.init_params" title="Link to this definition"></a></dt>
<dd><p>Returns a ParamSet including all params of all detectors. First the shared params
(if there are some), then all the “single detector” params. If two detectors use a
parameter with the same name (but not shared), the name of the detector is added to the
parameter name (except for the first detector).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.detectors.Detectors.num_events_per_bin">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">num_events_per_bin</span></span><a class="headerlink" href="#pisa.core.detectors.Detectors.num_events_per_bin" title="Link to this definition"></a></dt>
<dd><p>returns list of arrays of bin indices where none of the
pipelines in the respective distribution maker have MC events</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.detectors.Detectors.param_selections">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">param_selections</span></span><a class="headerlink" href="#pisa.core.detectors.Detectors.param_selections" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.detectors.Detectors.params">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">params</span></span><a class="headerlink" href="#pisa.core.detectors.Detectors.params" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.detectors.Detectors.profile">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">profile</span></span><a class="headerlink" href="#pisa.core.detectors.Detectors.profile" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.detectors.Detectors.randomize_free_params">
<span class="sig-name descname"><span class="pre">randomize_free_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/detectors.html#Detectors.randomize_free_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.detectors.Detectors.randomize_free_params" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.detectors.Detectors.reset_all">
<span class="sig-name descname"><span class="pre">reset_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/detectors.html#Detectors.reset_all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.detectors.Detectors.reset_all" title="Link to this definition"></a></dt>
<dd><p>Reset both free and fixed parameters to their nominal values.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.detectors.Detectors.reset_free">
<span class="sig-name descname"><span class="pre">reset_free</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/detectors.html#Detectors.reset_free"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.detectors.Detectors.reset_free" title="Link to this definition"></a></dt>
<dd><p>Reset only free parameters to their nominal values.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.detectors.Detectors.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/detectors.html#Detectors.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.detectors.Detectors.run" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.detectors.Detectors.select_params">
<span class="sig-name descname"><span class="pre">select_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">selections</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_on_missing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/detectors.html#Detectors.select_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.detectors.Detectors.select_params" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.detectors.Detectors.set_free_params">
<span class="sig-name descname"><span class="pre">set_free_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/detectors.html#Detectors.set_free_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.detectors.Detectors.set_free_params" title="Link to this definition"></a></dt>
<dd><p>Set free parameters’ values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>values</strong> (<em>a list</em><em> of </em><em>quantities</em>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.detectors.Detectors.set_nominal_by_current_values">
<span class="sig-name descname"><span class="pre">set_nominal_by_current_values</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/detectors.html#Detectors.set_nominal_by_current_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.detectors.Detectors.set_nominal_by_current_values" title="Link to this definition"></a></dt>
<dd><p>Define the nominal values as the parameters’ current values.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.detectors.Detectors.setup">
<span class="sig-name descname"><span class="pre">setup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/detectors.html#Detectors.setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.detectors.Detectors.setup" title="Link to this definition"></a></dt>
<dd><p>Setup (reset) all distribution makers</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.detectors.Detectors.shared_param_ind_list">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">shared_param_ind_list</span></span><a class="headerlink" href="#pisa.core.detectors.Detectors.shared_param_ind_list" title="Link to this definition"></a></dt>
<dd><p>A list of lists (one for each detector) containing the position of the shared
params in the free params of the DistributionMaker (that belongs to the detector)
together with their position in the shared parameter list.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.detectors.Detectors.source_code_hash">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">source_code_hash</span></span><a class="headerlink" href="#pisa.core.detectors.Detectors.source_code_hash" title="Link to this definition"></a></dt>
<dd><p>Hash for the source code of this object’s class.</p>
<p>Not meant to be perfect, but should suffice for tracking provenance of
an object stored to disk that were produced by a Stage.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.detectors.Detectors.tabulate">
<span class="sig-name descname"><span class="pre">tabulate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tablefmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'plain'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/detectors.html#Detectors.tabulate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.detectors.Detectors.tabulate" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.detectors.Detectors.update_params">
<span class="sig-name descname"><span class="pre">update_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/detectors.html#Detectors.update_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.detectors.Detectors.update_params" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.detectors.main">
<span class="sig-prename descclassname"><span class="pre">pisa.core.detectors.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">return_outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/detectors.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.detectors.main" title="Link to this definition"></a></dt>
<dd><p>Main; call as script with <cite>return_outputs=False</cite> or interactively with
<cite>return_outputs=True</cite></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.detectors.parse_args">
<span class="sig-prename descclassname"><span class="pre">pisa.core.detectors.</span></span><span class="sig-name descname"><span class="pre">parse_args</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/detectors.html#parse_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.detectors.parse_args" title="Link to this definition"></a></dt>
<dd><p>Get command line arguments</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.detectors.test_Detectors">
<span class="sig-prename descclassname"><span class="pre">pisa.core.detectors.</span></span><span class="sig-name descname"><span class="pre">test_Detectors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">verbosity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">Levels.WARN</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/detectors.html#test_Detectors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.detectors.test_Detectors" title="Link to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-pisa.core.distribution_maker">
<span id="pisa-core-distribution-maker-module"></span><h2>pisa.core.distribution_maker module<a class="headerlink" href="#module-pisa.core.distribution_maker" title="Link to this heading"></a></h2>
<p>DistributionMaker class definition and a simple script to generate, save, and
plot a distribution from pipeline config file(s).</p>
<dl class="py class">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.DistributionMaker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pisa.core.distribution_maker.</span></span><span class="sig-name descname"><span class="pre">DistributionMaker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pipelines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_livetime_from_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">profile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/distribution_maker.html#DistributionMaker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.distribution_maker.DistributionMaker" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Container for one or more pipelines; the outputs from all contained
pipelines are added together to create the distribution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pipelines</strong> (<a class="reference internal" href="#pisa.core.pipeline.Pipeline" title="pisa.core.pipeline.Pipeline"><em>Pipeline</em></a><em> or </em><em>convertible thereto</em><em>, or </em><em>iterable thereof</em>) – A new pipline is instantiated with each object passed. Legal objects
are already-instantiated Pipelines and anything interpret-able by the
Pipeline init method.</p></li>
<li><p><strong>label</strong> (<em>str</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – A label for the DistributionMaker.</p></li>
<li><p><strong>set_livetime_from_data</strong> (<em>bool</em><em>, </em><em>optional</em>) – If a (data) pipeline is found with the attr <cite>metadata</cite> and which has
the contained key “livetime”, this livetime is used to set the livetime
on all pipelines which have param <cite>params.livetime</cite>. If multiple such
data pipelines are found and <cite>set_livetime_from_data</cite> is True, all are
checked for consistency (you should use multiple <a href="#id5"><span class="problematic" id="id6">`</span></a>Detector`s if you
have incompatible data sets).</p></li>
<li><p><strong>profile</strong> (<em>bool</em>) – timing of inidividual pipelines / stages</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Free params with the same name in two pipelines are updated at the same
time so long as you use the <cite>update_params</cite>, <cite>set_free_params</cite>, or
<cite>_set_rescaled_free_params</cite> methods. Also use <cite>select_params</cite> to select
params across all pipelines (if a pipeline does not have one or more of
the param selectors specified, those param selectors have no effect in
that pipeline).</p>
<p><cite>_*_rescaled_*</cite> properties and methods are for interfacing with a
minimizer, where values are linearly mapped onto the interval [0, 1]
according to the parameter’s allowed range. Avoid interfacing with these
except if using a minimizer, since, e.g., units are stripped and values and
intervals are non-physical.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.DistributionMaker.add_covariance">
<span class="sig-name descname"><span class="pre">add_covariance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">covmat</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/distribution_maker.html#DistributionMaker.add_covariance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.distribution_maker.DistributionMaker.add_covariance" title="Link to this definition"></a></dt>
<dd><p>Incorporates covariance between parameters.
This is done by replacing relevant correlated parameters with “DerivedParams”</p>
<blockquote>
<div><p>that depend on new parameters in an uncorrelated basis</p>
</div></blockquote>
<p>The parameters are all updated, but this doesn’t add the new parameters in
So we go to the first stage we find that has one of the original parameters and manually add this in</p>
<p>See the docstring in “pisa.core.param.ParamSet” for more</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.DistributionMaker.empty_bin_indices">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">empty_bin_indices</span></span><a class="headerlink" href="#pisa.core.distribution_maker.DistributionMaker.empty_bin_indices" title="Link to this definition"></a></dt>
<dd><p>Find indices where there are no events present</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.DistributionMaker.get_outputs">
<span class="sig-name descname"><span class="pre">get_outputs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">return_sum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sum_map_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'total'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sum_map_tex_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Total'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/distribution_maker.html#DistributionMaker.get_outputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.distribution_maker.DistributionMaker.get_outputs" title="Link to this definition"></a></dt>
<dd><p>Compute and return the outputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>return_sum</strong> (<em>bool</em>) – If True, add up all Maps in all MapSets returned by all pipelines.
The result will be a single Map contained in a MapSet.
If False, return a list where each element is the full MapSet
returned by each pipeline in the DistributionMaker.</p>
</dd>
</dl>
<dl class="simple">
<dt><a href="#id7"><span class="problematic" id="id8">**</span></a>kwargs</dt><dd><p>Passed on to each pipeline’s <cite>get_outputs</cite> method.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>MapSet if <cite>return_sum=True</cite> or list of MapSets if <cite>return_sum=False</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.DistributionMaker.hash">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hash</span></span><a class="headerlink" href="#pisa.core.distribution_maker.DistributionMaker.hash" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.DistributionMaker.num_events_per_bin">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">num_events_per_bin</span></span><a class="headerlink" href="#pisa.core.distribution_maker.DistributionMaker.num_events_per_bin" title="Link to this definition"></a></dt>
<dd><p>returns an array of bin indices where none of the
pipelines have MC events</p>
<p>assumes that all pipelines have the same binning output specs</p>
<p>number of events is taken out of the last stage of the pipeline</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.DistributionMaker.param_selections">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">param_selections</span></span><a class="headerlink" href="#pisa.core.distribution_maker.DistributionMaker.param_selections" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.DistributionMaker.params">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">params</span></span><a class="headerlink" href="#pisa.core.distribution_maker.DistributionMaker.params" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.DistributionMaker.pipelines">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">pipelines</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pisa.core.pipeline.Pipeline" title="pisa.core.pipeline.Pipeline"><span class="pre">Pipeline</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pisa.core.distribution_maker.DistributionMaker.pipelines" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.DistributionMaker.profile">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">profile</span></span><a class="headerlink" href="#pisa.core.distribution_maker.DistributionMaker.profile" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.DistributionMaker.randomize_free_params">
<span class="sig-name descname"><span class="pre">randomize_free_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/distribution_maker.html#DistributionMaker.randomize_free_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.distribution_maker.DistributionMaker.randomize_free_params" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.DistributionMaker.reset_all">
<span class="sig-name descname"><span class="pre">reset_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/distribution_maker.html#DistributionMaker.reset_all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.distribution_maker.DistributionMaker.reset_all" title="Link to this definition"></a></dt>
<dd><p>Reset both free and fixed parameters to their nominal values.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.DistributionMaker.reset_free">
<span class="sig-name descname"><span class="pre">reset_free</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/distribution_maker.html#DistributionMaker.reset_free"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.distribution_maker.DistributionMaker.reset_free" title="Link to this definition"></a></dt>
<dd><p>Reset only free parameters to their nominal values.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.DistributionMaker.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/distribution_maker.html#DistributionMaker.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.distribution_maker.DistributionMaker.run" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.DistributionMaker.select_params">
<span class="sig-name descname"><span class="pre">select_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">selections</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_on_missing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/distribution_maker.html#DistributionMaker.select_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.distribution_maker.DistributionMaker.select_params" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.DistributionMaker.set_free_params">
<span class="sig-name descname"><span class="pre">set_free_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/distribution_maker.html#DistributionMaker.set_free_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.distribution_maker.DistributionMaker.set_free_params" title="Link to this definition"></a></dt>
<dd><p>Set free parameters’ values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>values</strong> (<em>list</em><em> of </em><em>quantities</em>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.DistributionMaker.set_nominal_by_current_values">
<span class="sig-name descname"><span class="pre">set_nominal_by_current_values</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/distribution_maker.html#DistributionMaker.set_nominal_by_current_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.distribution_maker.DistributionMaker.set_nominal_by_current_values" title="Link to this definition"></a></dt>
<dd><p>Define the nominal values as the parameters’ current values.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.DistributionMaker.setup">
<span class="sig-name descname"><span class="pre">setup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/distribution_maker.html#DistributionMaker.setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.distribution_maker.DistributionMaker.setup" title="Link to this definition"></a></dt>
<dd><p>Setup (reset) all pipelines</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.DistributionMaker.source_code_hash">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">source_code_hash</span></span><a class="headerlink" href="#pisa.core.distribution_maker.DistributionMaker.source_code_hash" title="Link to this definition"></a></dt>
<dd><p>Hash for the source code of this object’s class.</p>
<p>Not meant to be perfect, but should suffice for tracking provenance of
an object stored to disk that were produced by a Stage.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.DistributionMaker.tabulate">
<span class="sig-name descname"><span class="pre">tabulate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tablefmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'plain'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/distribution_maker.html#DistributionMaker.tabulate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.distribution_maker.DistributionMaker.tabulate" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.DistributionMaker.update_params">
<span class="sig-name descname"><span class="pre">update_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/distribution_maker.html#DistributionMaker.update_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.distribution_maker.DistributionMaker.update_params" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.main">
<span class="sig-prename descclassname"><span class="pre">pisa.core.distribution_maker.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">return_outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/distribution_maker.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.distribution_maker.main" title="Link to this definition"></a></dt>
<dd><p>Main; call as script with <cite>return_outputs=False</cite> or interactively with
<cite>return_outputs=True</cite></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.parse_args">
<span class="sig-prename descclassname"><span class="pre">pisa.core.distribution_maker.</span></span><span class="sig-name descname"><span class="pre">parse_args</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/distribution_maker.html#parse_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.distribution_maker.parse_args" title="Link to this definition"></a></dt>
<dd><p>Get command line arguments</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.distribution_maker.test_DistributionMaker">
<span class="sig-prename descclassname"><span class="pre">pisa.core.distribution_maker.</span></span><span class="sig-name descname"><span class="pre">test_DistributionMaker</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/distribution_maker.html#test_DistributionMaker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.distribution_maker.test_DistributionMaker" title="Link to this definition"></a></dt>
<dd><p>Unit tests for DistributionMaker</p>
</dd></dl>

</section>
<section id="module-pisa.core.events">
<span id="pisa-core-events-module"></span><h2>pisa.core.events module<a class="headerlink" href="#module-pisa.core.events" title="Link to this heading"></a></h2>
<p>Events class for working with PISA events files and Data class for working
with arbitrary Monte Carlo and datasets</p>
<dl class="py class">
<dt class="sig sig-object py" id="pisa.core.events.Data">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pisa.core.events.</span></span><span class="sig-name descname"><span class="pre">Data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flavint_groups</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events.html#Data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events.Data" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pisa.utils.html#pisa.utils.flavInt.FlavIntDataGroup" title="pisa.utils.flavInt.FlavIntDataGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">FlavIntDataGroup</span></code></a></p>
<p>Container for storing events, including metadata about the events.</p>
<p class="rubric">Examples</p>
<dl>
<dt>[(‘cuts’, [‘analysis’]),</dt><dd><p>(‘detector’, ‘pingu’),
(‘flavints_joined’,</p>
<blockquote>
<div><dl class="simple">
<dt>[‘nue_cc+nuebar_cc’,</dt><dd><p>‘numu_cc+numubar_cc’,
‘nutau_cc+nutaubar_cc’,
‘nuall_nc+nuallbar_nc’]),</p>
</dd>
</dl>
</div></blockquote>
<p>(‘geom’, ‘v39’),
(‘proc_ver’, ‘5.1’),
(‘runs’, [620, 621, 622])]</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.events.Data.applyCut">
<span class="sig-name descname"><span class="pre">applyCut</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keep_criteria</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events.html#Data.applyCut"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events.Data.applyCut" title="Link to this definition"></a></dt>
<dd><p>Apply a cut by specifying criteria for keeping events. The cut must
be successfully applied to all flav/ints in the events object before
the changes are kept, otherwise the cuts are reverted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>keep_criteria</strong> (<em>string</em>) – Any string interpretable as numpy boolean expression.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>remaining_events</strong> – An Events object with the remaining events (deepcopied) and with
updated cut metadata including <cite>keep_criteria</cite>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pisa.core.events.Events" title="pisa.core.events.Events">Events</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Keep events with true energies in [1, 80] GeV (note that units are not
recognized, so have to be handled outside this method)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">remaining</span> <span class="o">=</span> <span class="n">applyCut</span><span class="p">(</span><span class="s2">&quot;(true_energy &gt;= 1) &amp; (true_energy &lt;= 80)&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Do the opposite with “~” inverting the criteria</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">remaining</span> <span class="o">=</span> <span class="n">applyCut</span><span class="p">(</span><span class="s2">&quot;~((true_energy &gt;= 1) &amp; (true_energy &lt;= 80))&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Numpy namespace is available for use via <cite>np</cite> prefix</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">remaining</span> <span class="o">=</span> <span class="n">applyCut</span><span class="p">(</span><span class="s2">&quot;np.log10(true_energy) &gt;= 0&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.events.Data.data_eq">
<span class="sig-name descname"><span class="pre">data_eq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events.html#Data.data_eq"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events.Data.data_eq" title="Link to this definition"></a></dt>
<dd><p>Test whether the data for this object matche that of <cite>other</cite></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.events.Data.digitize">
<span class="sig-name descname"><span class="pre">digitize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kinds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binning</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binning_cols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events.html#Data.digitize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events.Data.digitize" title="Link to this definition"></a></dt>
<dd><p>Wrapper for numpy’s digitize function.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.events.Data.hash">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hash</span></span><a class="headerlink" href="#pisa.core.events.Data.hash" title="Link to this definition"></a></dt>
<dd><p>Probabilistically unique identifier</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.events.Data.histogram">
<span class="sig-name descname"><span class="pre">histogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kinds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binning</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binning_cols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events.html#Data.histogram"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events.Data.histogram" title="Link to this definition"></a></dt>
<dd><p>Histogram the events of all <cite>kinds</cite> specified, with <cite>binning</cite> and
optionally applying <cite>weights</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kinds</strong> (<em>string</em><em>, </em><em>sequence</em><em> of </em><a class="reference internal" href="pisa.utils.html#pisa.utils.flavInt.NuFlavInt" title="pisa.utils.flavInt.NuFlavInt"><em>NuFlavInt</em></a><em>, or </em><a class="reference internal" href="pisa.utils.html#pisa.utils.flavInt.NuFlavIntGroup" title="pisa.utils.flavInt.NuFlavIntGroup"><em>NuFlavIntGroup</em></a>)</p></li>
<li><p><strong>binning</strong> (<a class="reference internal" href="#pisa.core.binning.OneDimBinning" title="pisa.core.binning.OneDimBinning"><em>OneDimBinning</em></a><em>, </em><a class="reference internal" href="#pisa.core.binning.MultiDimBinning" title="pisa.core.binning.MultiDimBinning"><em>MultiDimBinning</em></a><em> or </em><em>sequence</em><em> of </em><em>arrays</em>) – (one array per binning dimension)</p></li>
<li><p><strong>binning_cols</strong> (<em>string</em><em> or </em><em>sequence</em><em> of </em><em>strings</em>) – Bin only these dimensions, ignoring other dimensions in <cite>binning</cite></p></li>
<li><p><strong>weights_col</strong> (<em>None</em><em> or </em><em>string</em>) – Column to use for weighting the events</p></li>
<li><p><strong>errors</strong> (<em>bool</em>) – Whether to attach errors to the resulting Map</p></li>
<li><p><strong>name</strong> (<em>None</em><em> or </em><em>string</em>) – Name to give to resulting Map. If None, a default is derived from
<cite>kinds</cite> and <cite>weights_col</cite>.</p></li>
<li><p><strong>tex</strong> (<em>None</em><em> or </em><em>string</em>) – TeX label to give to the resulting Map. If None, default is
dereived from the <cite>name</cite> specified or the derived default.</p></li>
<li><p><strong>**kwargs</strong> (<em>Keyword args passed to Map object</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>Map</strong> – argument</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy ndarray with as many dimensions as specified by <cite>binning</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.events.Data.histogram_set">
<span class="sig-name descname"><span class="pre">histogram_set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">binning</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nu_weights_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mu_weights_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noise_weights_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mapset_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events.html#Data.histogram_set"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events.Data.histogram_set" title="Link to this definition"></a></dt>
<dd><p>Uses the above histogram function but returns the set of all of them
for everything in the Data object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>binning</strong> (<a class="reference internal" href="#pisa.core.binning.OneDimBinning" title="pisa.core.binning.OneDimBinning"><em>OneDimBinning</em></a><em>, </em><a class="reference internal" href="#pisa.core.binning.MultiDimBinning" title="pisa.core.binning.MultiDimBinning"><em>MultiDimBinning</em></a>) – The definition of the binning for the histograms.</p></li>
<li><p><strong>nu_weights_col</strong> (<em>None</em><em> or </em><em>string</em>) – The column in the Data object by which to weight the neutrino
histograms. Specify None for unweighted histograms.</p></li>
<li><p><strong>mu_weights_col</strong> (<em>None</em><em> or </em><em>string</em>) – The column in the Data object by which to weight the muon
histograms. Specify None for unweighted histograms.</p></li>
<li><p><strong>noise_weights_col</strong> (<em>None</em><em> or </em><em>string</em>) – The column in the Data object by which to weight the noise
histograms. Specify None for unweighted histograms.</p></li>
<li><p><strong>mapset_name</strong> (<em>string</em>) – The name by which the resulting MapSet will be identified.</p></li>
<li><p><strong>errors</strong> (<em>boolean</em>) – A flag for whether to calculate errors on the histograms or not.
This defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>MapSet</strong> – Data object.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>A MapSet containing all of the Maps for everything in this</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.events.Data.keepInbounds">
<span class="sig-name descname"><span class="pre">keepInbounds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">binning</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events.html#Data.keepInbounds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events.Data.keepInbounds" title="Link to this definition"></a></dt>
<dd><p>Cut out any events that fall outside <cite>binning</cite>. Note that events
that fall exactly on the outer edge are kept.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>binning</strong> (<a class="reference internal" href="#pisa.core.binning.OneDimBinning" title="pisa.core.binning.OneDimBinning"><em>OneDimBinning</em></a><em> or </em><a class="reference internal" href="#pisa.core.binning.MultiDimBinning" title="pisa.core.binning.MultiDimBinning"><em>MultiDimBinning</em></a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.events.Data.meta_eq">
<span class="sig-name descname"><span class="pre">meta_eq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events.html#Data.meta_eq"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events.Data.meta_eq" title="Link to this definition"></a></dt>
<dd><p>Test whether the metadata for this object matches that of <cite>other</cite></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.events.Data.muons">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">muons</span></span><a class="headerlink" href="#pisa.core.events.Data.muons" title="Link to this definition"></a></dt>
<dd><p>muon data</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.events.Data.names">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">names</span></span><a class="headerlink" href="#pisa.core.events.Data.names" title="Link to this definition"></a></dt>
<dd><p>Names of flavints joined</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.events.Data.neutrinos">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">neutrinos</span></span><a class="headerlink" href="#pisa.core.events.Data.neutrinos" title="Link to this definition"></a></dt>
<dd><p>neutrino data</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.events.Data.noise">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">noise</span></span><a class="headerlink" href="#pisa.core.events.Data.noise" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.events.Data.transform_groups">
<span class="sig-name descname"><span class="pre">transform_groups</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flavint_groups</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events.html#Data.transform_groups"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events.Data.transform_groups" title="Link to this definition"></a></dt>
<dd><p>Transform Data into a structure given by the input
flavint_groups. Calls the corresponding inherited function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>flavint_groups</strong> (<em>string</em><em>, or </em><em>sequence</em><em> of </em><em>strings</em><em> or </em><em>sequence of</em>) – NuFlavIntGroups</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>t_data</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pisa.core.events.Data" title="pisa.core.events.Data">Data</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.events.Data.update_hash">
<span class="sig-name descname"><span class="pre">update_hash</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events.html#Data.update_hash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events.Data.update_hash" title="Link to this definition"></a></dt>
<dd><p>Update the cached hash value</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pisa.core.events.Events">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pisa.core.events.</span></span><span class="sig-name descname"><span class="pre">Events</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events.html#Events"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events.Events" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pisa.utils.html#pisa.utils.flavInt.FlavIntData" title="pisa.utils.flavInt.FlavIntData"><code class="xref py py-class docutils literal notranslate"><span class="pre">FlavIntData</span></code></a></p>
<p>Container for storing events, including metadata about the events.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pisa.core.binning</span> <span class="kn">import</span> <span class="n">OneDimBinning</span><span class="p">,</span> <span class="n">MultiDimBinning</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Load events from a PISA HDF5 file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">events</span> <span class="o">=</span> <span class="n">Events</span><span class="p">(</span><span class="s1">&#39;events/events__vlvnt__toy_1_to_80GeV_spidx1.0_cz-1_to_1_1e2evts_set0__unjoined__with_fluxes_honda-2015-spl-solmin-aa.hdf5&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Apply a simple cut</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">events</span> <span class="o">=</span> <span class="n">events</span><span class="o">.</span><span class="n">applyCut</span><span class="p">(</span><span class="s1">&#39;(true_coszen &lt;= 0.5) &amp; (true_energy &lt;= 70)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">events</span><span class="p">[</span><span class="n">fi</span><span class="p">][</span><span class="s1">&#39;true_coszen&#39;</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="mf">0.5</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Apply an &quot;inbounds&quot; cut via a OneDimBinning</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">true_e_binning</span> <span class="o">=</span> <span class="n">OneDimBinning</span><span class="p">(</span>
<span class="gp">... </span>   <span class="n">name</span><span class="o">=</span><span class="s1">&#39;true_energy&#39;</span><span class="p">,</span> <span class="n">num_bins</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span> <span class="n">is_log</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>   <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">60</span><span class="p">]</span><span class="o">*</span><span class="n">ureg</span><span class="o">.</span><span class="n">GeV</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">events</span> <span class="o">=</span> <span class="n">events</span><span class="o">.</span><span class="n">keepInbounds</span><span class="p">(</span><span class="n">true_e_binning</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">events</span><span class="p">[</span><span class="n">fi</span><span class="p">][</span><span class="s1">&#39;true_energy&#39;</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="mi">10</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">([(</span><span class="n">k</span><span class="p">,</span> <span class="n">events</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">k</span><span class="p">])</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">())])</span>
<span class="go">[(&#39;cuts&#39;, [&#39;analysis&#39;]),</span>
<span class="go">  (&#39;detector&#39;, &#39;pingu&#39;),</span>
<span class="go">  (&#39;flavints_joined&#39;,</span>
<span class="go">     [&#39;nue_cc+nuebar_cc&#39;,</span>
<span class="go">         &#39;numu_cc+numubar_cc&#39;,</span>
<span class="go">         &#39;nutau_cc+nutaubar_cc&#39;,</span>
<span class="go">         &#39;nuall_nc+nuallbar_nc&#39;]),</span>
<span class="go">  (&#39;geom&#39;, &#39;v39&#39;),</span>
<span class="go">  (&#39;proc_ver&#39;, &#39;5.1&#39;),</span>
<span class="go">  (&#39;runs&#39;, [620, 621, 622])]</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.events.Events.applyCut">
<span class="sig-name descname"><span class="pre">applyCut</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keep_criteria</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events.html#Events.applyCut"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events.Events.applyCut" title="Link to this definition"></a></dt>
<dd><p>Apply a cut by specifying criteria for keeping events. The cut must
be successfully applied to all flav/ints in the events object before
the changes are kept, otherwise the cuts are reverted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>keep_criteria</strong> (<em>string</em>) – Any string interpretable as numpy boolean expression.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Keep events with true energies in [1, 80] GeV (note that units are not
recognized, so have to be handled outside this method)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">events</span> <span class="o">=</span> <span class="n">events</span><span class="o">.</span><span class="n">applyCut</span><span class="p">(</span><span class="s2">&quot;(true_energy &gt;= 1) &amp; (true_energy &lt;= 80)&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Do the opposite with “~” inverting the criteria</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">events</span> <span class="o">=</span> <span class="n">events</span><span class="o">.</span><span class="n">applyCut</span><span class="p">(</span><span class="s2">&quot;~((true_energy &gt;= 1) &amp; (true_energy &lt;= 80))&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Numpy namespace is available for use via <cite>np</cite> prefix</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">events</span> <span class="o">=</span> <span class="n">events</span><span class="o">.</span><span class="n">applyCut</span><span class="p">(</span><span class="s2">&quot;np.log10(true_energy) &gt;= 0&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.events.Events.data_eq">
<span class="sig-name descname"><span class="pre">data_eq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events.html#Events.data_eq"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events.Events.data_eq" title="Link to this definition"></a></dt>
<dd><p>Test whether the data for this object matches that of <cite>other</cite></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.events.Events.flavint_groups">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">flavint_groups</span></span><a class="headerlink" href="#pisa.core.events.Events.flavint_groups" title="Link to this definition"></a></dt>
<dd><p>All flavor/interaction type groups (even singletons) present</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.events.Events.flavints_present">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">flavints_present</span></span><a class="headerlink" href="#pisa.core.events.Events.flavints_present" title="Link to this definition"></a></dt>
<dd><p>Returns a tuple of the flavints that are present in the events</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.events.Events.hash">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hash</span></span><a class="headerlink" href="#pisa.core.events.Events.hash" title="Link to this definition"></a></dt>
<dd><p>Hash value</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.events.Events.histogram">
<span class="sig-name descname"><span class="pre">histogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kinds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binning</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binning_cols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events.html#Events.histogram"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events.Events.histogram" title="Link to this definition"></a></dt>
<dd><p>Histogram the events of all <cite>kinds</cite> specified, with <cite>binning</cite> and
optionally applying <cite>weights</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kinds</strong> (<em>string</em><em>, </em><em>sequence</em><em> of </em><a class="reference internal" href="pisa.utils.html#pisa.utils.flavInt.NuFlavInt" title="pisa.utils.flavInt.NuFlavInt"><em>NuFlavInt</em></a><em>, or </em><a class="reference internal" href="pisa.utils.html#pisa.utils.flavInt.NuFlavIntGroup" title="pisa.utils.flavInt.NuFlavIntGroup"><em>NuFlavIntGroup</em></a>)</p></li>
<li><p><strong>binning</strong> (<a class="reference internal" href="#pisa.core.binning.OneDimBinning" title="pisa.core.binning.OneDimBinning"><em>OneDimBinning</em></a><em>, </em><a class="reference internal" href="#pisa.core.binning.MultiDimBinning" title="pisa.core.binning.MultiDimBinning"><em>MultiDimBinning</em></a><em> or </em><em>sequence</em><em> of </em><em>arrays</em><em> (</em><em>one array per binning dimension</em><em>)</em>)</p></li>
<li><p><strong>binning_cols</strong> (<em>string</em><em> or </em><em>sequence</em><em> of </em><em>strings</em>) – Bin only these dimensions, ignoring other dimensions in <cite>binning</cite></p></li>
<li><p><strong>weights_col</strong> (<em>None</em><em> or </em><em>string</em>) – Column to use for weighting the events</p></li>
<li><p><strong>errors</strong> (<em>bool</em>) – Whether to attach errors to the resulting Map</p></li>
<li><p><strong>name</strong> (<em>None</em><em> or </em><em>string</em>) – Name to give to resulting Map. If None, a default is derived from
<cite>kinds</cite> and <cite>weights_col</cite>.</p></li>
<li><p><strong>tex</strong> (<em>None</em><em> or </em><em>string</em>) – TeX label to give to the resulting Map. If None, default is
dereived from the <cite>name</cite> specified (or its value derived from
<cite>kinds</cite> and <cite>weights_col</cite>).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>Map</strong> – argument</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy ndarray with as many dimensions as specified by <cite>binning</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.events.Events.joined_string">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">joined_string</span></span><a class="headerlink" href="#pisa.core.events.Events.joined_string" title="Link to this definition"></a></dt>
<dd><p>Concise string identifying _only_ joined flavints</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.events.Events.keepInbounds">
<span class="sig-name descname"><span class="pre">keepInbounds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">binning</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events.html#Events.keepInbounds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events.Events.keepInbounds" title="Link to this definition"></a></dt>
<dd><p>Cut out any events that fall outside <cite>binning</cite>. Note that events
that fall exactly on an outer edge are kept.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>binning</strong> (<a class="reference internal" href="#pisa.core.binning.OneDimBinning" title="pisa.core.binning.OneDimBinning"><em>OneDimBinning</em></a><em> or </em><a class="reference internal" href="#pisa.core.binning.MultiDimBinning" title="pisa.core.binning.MultiDimBinning"><em>MultiDimBinning</em></a>)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>remaining_events</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pisa.core.events.Events" title="pisa.core.events.Events">Events</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.events.Events.meta_eq">
<span class="sig-name descname"><span class="pre">meta_eq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events.html#Events.meta_eq"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events.Events.meta_eq" title="Link to this definition"></a></dt>
<dd><p>Test whether the metadata for this object matches that of <cite>other</cite></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.events.Events.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events.html#Events.save"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events.Events.save" title="Link to this definition"></a></dt>
<dd><p>Save data structure to a file; see fileio.to_file for details</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.events.Events.update_hash">
<span class="sig-name descname"><span class="pre">update_hash</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events.html#Events.update_hash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events.Events.update_hash" title="Link to this definition"></a></dt>
<dd><p>Update the cached hash value</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.events.test_Events">
<span class="sig-prename descclassname"><span class="pre">pisa.core.events.</span></span><span class="sig-name descname"><span class="pre">test_Events</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events.html#test_Events"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events.test_Events" title="Link to this definition"></a></dt>
<dd><p>Unit tests for Events class</p>
</dd></dl>

</section>
<section id="module-pisa.core.events_pi">
<span id="pisa-core-events-pi-module"></span><h2>pisa.core.events_pi module<a class="headerlink" href="#module-pisa.core.events_pi" title="Link to this heading"></a></h2>
<p>PISA data container</p>
<dl class="py class">
<dt class="sig sig-object py" id="pisa.core.events_pi.EventsPi">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pisa.core.events_pi.</span></span><span class="sig-name descname"><span class="pre">EventsPi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">neutrinos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fraction_events_to_keep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">events_subsample_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events_pi.html#EventsPi"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events_pi.EventsPi" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pisa.html#pisa.OrderedDict" title="collections.OrderedDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">OrderedDict</span></code></a></p>
<p>Container for events for use with PISA pi</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>string</em><em>, </em><em>optional</em>) – Name to identify events</p></li>
<li><p><strong>neutrinos</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag indicating if events represent neutrinos; toggles special
behavior such as splitting into nu/nubar and CC/NC. Default is True.</p></li>
<li><p><strong>fraction_events_to_keep</strong> (<em>float</em>) – Fraction of loaded events to use (use to downsample).
Must be in range [0.,1.], or disable by setting to <cite>None</cite>.
Default in None.</p></li>
<li><p><strong>*args</strong> – Passed on to <cite>__init__</cite> method of OrderedDict</p></li>
<li><p><strong>**kwargs</strong> – Passed on to <cite>__init__</cite> method of OrderedDict</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.events_pi.EventsPi.apply_cut">
<span class="sig-name descname"><span class="pre">apply_cut</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keep_criteria</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events_pi.html#EventsPi.apply_cut"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events_pi.EventsPi.apply_cut" title="Link to this definition"></a></dt>
<dd><p>Apply a cut by specifying criteria for keeping events. The cut must
be successfully applied to all flav/ints in the events object before
the changes are kept, otherwise the cuts are reverted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>keep_criteria</strong> (<em>string</em>) – Any string interpretable as numpy boolean expression.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Keep events with true energies in [1, 80] GeV (note that units are not
recognized, so have to be handled outside this method)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">events</span> <span class="o">=</span> <span class="n">events</span><span class="o">.</span><span class="n">apply_cut</span><span class="p">(</span><span class="s2">&quot;(true_energy &gt;= 1) &amp; (true_energy &lt;= 80)&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Do the opposite with “~” inverting the criteria</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">events</span> <span class="o">=</span> <span class="n">events</span><span class="o">.</span><span class="n">apply_cut</span><span class="p">(</span><span class="s2">&quot;~((true_energy &gt;= 1) &amp; (true_energy &lt;= 80))&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Numpy namespace is available for use via <cite>np</cite> prefix</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">events</span> <span class="o">=</span> <span class="n">events</span><span class="o">.</span><span class="n">apply_cut</span><span class="p">(</span><span class="s2">&quot;np.log10(true_energy) &gt;= 0&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.events_pi.EventsPi.keep_inbounds">
<span class="sig-name descname"><span class="pre">keep_inbounds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">binning</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events_pi.html#EventsPi.keep_inbounds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events_pi.EventsPi.keep_inbounds" title="Link to this definition"></a></dt>
<dd><p>Cut out any events that fall outside <cite>binning</cite>. Note that events
that fall exactly on an outer edge are kept.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>binning</strong> (<a class="reference internal" href="#pisa.core.binning.OneDimBinning" title="pisa.core.binning.OneDimBinning"><em>OneDimBinning</em></a><em> or </em><a class="reference internal" href="#pisa.core.binning.MultiDimBinning" title="pisa.core.binning.MultiDimBinning"><em>MultiDimBinning</em></a>)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>cut_data</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pisa.core.events_pi.EventsPi" title="pisa.core.events_pi.EventsPi">EventsPi</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.events_pi.EventsPi.load_events_file">
<span class="sig-name descname"><span class="pre">load_events_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">events_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">123456</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events_pi.html#EventsPi.load_events_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events_pi.EventsPi.load_events_file" title="Link to this definition"></a></dt>
<dd><p>Fill this events container from an input HDF5 file filled with event
data Optionally can provide a variable mapping so select a subset of
variables, rename them, etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>events_file</strong> (<em>string</em><em> or </em><em>mapping</em>) – If string, interpret as a path and load file at that path; the
loaded object should be a mapping. If already a mapping, take and
interpret events from that.</p></li>
<li><p><strong>variable_mapping</strong> (<em>mapping</em><em>, </em><em>optional</em>) – If specified, should be a mapping where the keys are the
destination variable names and the items are either the source
variable names or an iterable of source variables names. In the
latter case, each of the specified source variables will become a
column vector in the destination array.</p></li>
<li><p><strong>required_metadata</strong> (<em>None</em><em>, or </em><em>list</em><em> of </em><em>str</em>) – Can optionally specify metadata keys to parse from the input file metdata.
ONLY metadata specified here will be parsed.
Anything specified here MUST exist in the files.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.events_pi.fix_oppo_flux">
<span class="sig-prename descclassname"><span class="pre">pisa.core.events_pi.</span></span><span class="sig-name descname"><span class="pre">fix_oppo_flux</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events_pi.html#fix_oppo_flux"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events_pi.fix_oppo_flux" title="Link to this definition"></a></dt>
<dd><p>Fix this <cite>oppo</cite> flux insanity
someone added this in the nominal flux calculation that
oppo flux is nue flux if flavour is nuebar, and vice versa
here we revert that, incase these oppo keys are there</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.events_pi.main">
<span class="sig-prename descclassname"><span class="pre">pisa.core.events_pi.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events_pi.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events_pi.main" title="Link to this definition"></a></dt>
<dd><p>Load an events file and print the contents</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.events_pi.split_nu_events_by_flavor_and_interaction">
<span class="sig-prename descclassname"><span class="pre">pisa.core.events_pi.</span></span><span class="sig-name descname"><span class="pre">split_nu_events_by_flavor_and_interaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/events_pi.html#split_nu_events_by_flavor_and_interaction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.events_pi.split_nu_events_by_flavor_and_interaction" title="Link to this definition"></a></dt>
<dd><p>Split neutrino events by nu vs nubar, and CC vs NC.</p>
<p>Should be compatible with DRAGON and GRECO samples, but this depends on the
contents of the original I3 files and whatever conversion script was used
to produce the HDF5 files from these.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>input_data</strong> (<em>mapping</em>)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>output_data</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="pisa.html#pisa.OrderedDict" title="pisa.OrderedDict">OrderedDict</a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-pisa.core.map">
<span id="pisa-core-map-module"></span><h2>pisa.core.map module<a class="headerlink" href="#module-pisa.core.map" title="Link to this heading"></a></h2>
<p>Map class to contain 2D histogram, error, and metadata about the contents.
MapSet class to contain a set of maps.</p>
<p>Also provide basic mathematical operations that user applies directly to the
containers but that get passed down to operate on the contained data.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pisa.core.map.Map">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pisa.core.map.</span></span><span class="sig-name descname"><span class="pre">Map</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binning</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_hist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hash</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_comparison</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class to contain a multi-dimensional histogram, error, and metadata
about the histogram. Also provides basic mathematical operations for the
contained data. See Examples below for how to use a Map object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>string</em>) – Name for the map. Used to identify the map.</p></li>
<li><p><strong>hist</strong> (<em>numpy.ndarray</em><em> (</em><em>incl. obj array from uncertainties.unumpy.uarray</em><em>)</em>) – The “data” (counts, etc.) in the map.  The shape of <cite>hist</cite> must be
compatible with the <cite>binning</cite> specified.</p></li>
<li><p><strong>binning</strong> (<a class="reference internal" href="#pisa.core.binning.MultiDimBinning" title="pisa.core.binning.MultiDimBinning"><em>MultiDimBinning</em></a>) – Describes the binning of the Map.</p></li>
<li><p><strong>error_hist</strong> (<em>numpy ndarray</em>) – Must be same shape as <cite>hist</cite>. If specified, sets the error standard
deviations for the contained <cite>hist</cite>, replacing any stddev information
that might be contained in the passed <cite>hist</cite> arg.</p></li>
<li><p><strong>hash</strong> (<em>None</em><em>, or </em><em>immutable object</em><em> (</em><em>typically an integer</em><em>)</em>) – Hash value to attach to the map.</p></li>
<li><p><strong>tex</strong> (<em>None</em><em> or </em><em>string</em>) – TeX string that can be used for e.g. plotting.</p></li>
<li><p><strong>full_comparison</strong> (<em>bool</em>) – Whether to perform full (recursive) comparisons when testing the
equality of this map with another. See <cite>__eq__</cite> method.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pisa.core.binning</span> <span class="kn">import</span> <span class="n">MultiDimBinning</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">binning</span> <span class="o">=</span> <span class="n">MultiDimBinning</span><span class="p">([</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;energy&#39;</span><span class="p">,</span> <span class="n">is_log</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">num_bins</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="gp">... </span>                                <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">80</span><span class="p">],</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;GeV&#39;</span><span class="p">),</span>
<span class="gp">... </span>                           <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;coszen&#39;</span><span class="p">,</span> <span class="n">is_lin</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">num_bins</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
<span class="gp">... </span>                                <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m0</span> <span class="o">=</span> <span class="n">Map</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">binning</span><span class="o">=</span><span class="n">binning</span><span class="p">,</span> <span class="n">hist</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">binning</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m0</span>
<span class="go">array([[ 0.,  0.,  0.,  0.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.,  0.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.,  0.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.,  0.,  0.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m0</span><span class="o">.</span><span class="n">binning</span>
<span class="go">energy: 4 logarithmically-uniform bins spanning [1.0, 80.0] GeV</span>
<span class="go">coszen: 5 equally-sized bins spanning [-1.0, 0.0]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m0</span><span class="o">.</span><span class="n">hist</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m0</span>
<span class="go">array([[ 1.,  0.,  0.,  0.,  0.],</span>
<span class="go">       [ 1.,  0.,  0.,  0.,  0.],</span>
<span class="go">       [ 1.,  0.,  0.,  0.,  0.],</span>
<span class="go">       [ 1.,  0.,  0.,  0.,  0.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m1</span> <span class="o">=</span> <span class="n">m0</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m1</span><span class="o">.</span><span class="n">binning</span>
<span class="go">energy: 3 logarithmically-uniform bins spanning [1.0, 26.7496121991]</span>
<span class="go">coszen: 2 equally-sized bins spanning [-1.0, -0.6]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m1</span>
<span class="go">array([[ 1.,  0.],</span>
<span class="go">       [ 1.,  0.],</span>
<span class="go">       [ 1.,  0.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="nb">bin</span> <span class="ow">in</span> <span class="n">m1</span><span class="o">.</span><span class="n">iterbins</span><span class="p">():</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;({0:~.2f}, {1:~.2f}): </span><span class="si">{2:0.1f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
<span class="gp">... </span>            <span class="nb">bin</span><span class="o">.</span><span class="n">binning</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">midpoints</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>            <span class="nb">bin</span><span class="o">.</span><span class="n">binning</span><span class="o">.</span><span class="n">coszen</span><span class="o">.</span><span class="n">midpoints</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>            <span class="nb">bin</span><span class="o">.</span><span class="n">hist</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]))</span>
<span class="go">(2.00 GeV, -0.90 ): 1.0</span>
<span class="go">(2.00 GeV, -0.70 ): 0.0</span>
<span class="go">(5.97 GeV, -0.90 ): 1.0</span>
<span class="go">(5.97 GeV, -0.70 ): 0.0</span>
<span class="go">(17.85 GeV, -0.90 ): 1.0</span>
<span class="go">(17.85 GeV, -0.70 ): 0.0</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.allclose">
<span class="sig-name descname"><span class="pre">allclose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.allclose"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.allclose" title="Link to this definition"></a></dt>
<dd><p>Check if this map and another have the same (within machine precision) bin counts</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.assert_compat">
<span class="sig-name descname"><span class="pre">assert_compat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.assert_compat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.assert_compat" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.barlow_llh">
<span class="sig-name descname"><span class="pre">barlow_llh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binned</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.barlow_llh"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.barlow_llh" title="Link to this definition"></a></dt>
<dd><p>Calculate the total barlow log-likelihood value between this map and
the map described by <cite>expected_values</cite>; self is taken to be the “actual
values” (or (pseudo)data), and <cite>expected_values</cite> are the expectation
values for each bin. I assumes at the moment some things that are not
true, namely that the weights are uniform</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expected_values</strong> (<em>numpy.ndarray</em><em> or </em><a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map"><em>Map</em></a><em> of </em><em>same dimension as this</em>)</p></li>
<li><p><strong>binned</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>total_barlow_llh</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float or binned_barlow_llh if binned=True</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.map.Map.binning">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">binning</span></span><a class="headerlink" href="#pisa.core.map.Map.binning" title="Link to this definition"></a></dt>
<dd><p>Map’s binning</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pisa.core.binning.MultiDimBinning" title="pisa.core.binning.MultiDimBinning">pisa.core.binning.MultiDimBinning</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.chi2">
<span class="sig-name descname"><span class="pre">chi2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binned</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.chi2"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.chi2" title="Link to this definition"></a></dt>
<dd><p>Calculate the total chi-squared value between this map and the map
described by <cite>expected_values</cite>; self is taken to be the “actual values”
(or (pseudo)data), and <cite>expected_values</cite> are the expectation values for
each bin.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expected_values</strong> (<em>numpy.ndarray</em><em> or </em><a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map"><em>Map</em></a><em> of </em><em>same dimension as this</em>)</p></li>
<li><p><strong>binned</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>total_chi2</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float or binned_chi2 if binned=True</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.compare">
<span class="sig-name descname"><span class="pre">compare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.compare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.compare" title="Link to this definition"></a></dt>
<dd><p>Compare this map with another, where the other map is taken to be
the “reference” against which this is compared.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ref</strong> (<a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map"><em>Map</em></a>) – Map against with to compare this one. <cite>ref is taken as reference.
Each dimension in `ref.binning</cite> must have the same name and
bin edges as this map, but the order of the dimensions does not
matter.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><strong>comparisons</strong> –</p>
<ul class="simple">
<li><p>‘diff’ : Map, <cite>self - ref</cite></p></li>
<li><p>’fract’ : Map, <cite>self / ref</cite></p></li>
<li><p>’fractdiff’ : Map, <cite>(self - ref) / ref</cite></p></li>
<li><p>’max_abs_diff’ : float, <cite>max(abs(diff))</cite></p></li>
<li><p>’max_abs_fractdiff’ : float, <cite>max(abs(fractdiff))</cite></p></li>
<li><p>’nanmatch’ : bool, whether nan elements match</p></li>
<li><p>’infmatch’ : bool, whether +inf (and separately -inf) entries match</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>OrderedDict containing the following key/value pairs:</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.conv_llh">
<span class="sig-name descname"><span class="pre">conv_llh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binned</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.conv_llh"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.conv_llh" title="Link to this definition"></a></dt>
<dd><p>Calculate the total convoluted log-likelihood value between this map
and the map described by <cite>expected_values</cite>; self is taken to be the
“actual values” (or (pseudo)data), and <cite>expected_values</cite> are the
expectation values for each bin.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expected_values</strong> (<em>numpy.ndarray</em><em> or </em><a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map"><em>Map</em></a><em> of </em><em>same dimension as this</em>)</p></li>
<li><p><strong>binned</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>total_conv_llh</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float or binned_conv_llh if binned=True</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.correct_chi2">
<span class="sig-name descname"><span class="pre">correct_chi2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binned</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.correct_chi2"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.correct_chi2" title="Link to this definition"></a></dt>
<dd><p>Calculate the total correct chi2 value between this map and the map
described by <cite>expected_values</cite>; self is taken to be the “actual values”
(or (pseudo)data), and <cite>expected_values</cite> are the expectation values for
each bin.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expected_values</strong> (<em>numpy.ndarray</em><em> or </em><a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map"><em>Map</em></a><em> of </em><em>same dimension as this.</em>)</p></li>
<li><p><strong>binned</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>total_correct_chi2</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float or binned_correct_chi2 if binned=True</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.downsample">
<span class="sig-name descname"><span class="pre">downsample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.downsample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.downsample" title="Link to this definition"></a></dt>
<dd><p>Downsample by integer factor(s), summing together merged bins’
values.</p>
<p>See pisa.utils.binning.MultiDimBinning.downsample for args/kwargs
details.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.fluctuate">
<span class="sig-name descname"><span class="pre">fluctuate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">jumpahead</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.fluctuate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.fluctuate" title="Link to this definition"></a></dt>
<dd><p>Apply fluctuations to the map’s values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> (<em>None</em><em> or </em><em>string</em>) – Valid strings are ‘’, ‘none’, ‘poisson’, ‘scaled_poisson’, ‘gauss’, or
‘gauss+poisson’. Strings are case-insensitive and whitespace is
removed.
The ‘scaled_poisson’ method implements a Scaled Poisson Process, which is
a better approximation than a normal distribution to the true distribution
of bin counts that are the result of a Poisson process with weighted events[1].
The fluctuated maps are guaranteed to have the same mean and standard
deviation as the original map.</p></li>
<li><p><strong>random_state</strong> (<em>None</em><em> or </em><em>type accepted by utils.random_numbers.get_random_state</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>fluctuated_map</strong> – New map with entries fluctuated as compared to this map</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map">Map</a></p>
</dd>
</dl>
<p class="rubric">References</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id9" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></span>
<p>Bohm &amp; Zech, “Statistics of weighted Poisson events and its applications” (2013),
<a class="reference external" href="https://arxiv.org/abs/1309.1287">https://arxiv.org/abs/1309.1287</a></p>
</aside>
</aside>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.from_json">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resource</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.from_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.from_json" title="Link to this definition"></a></dt>
<dd><p>Instantiate a new Map object from a JSON file.</p>
<p>The format of the JSON is generated by the <cite>Map.to_json</cite> method, which
converts a Map object to basic types and then numpy arrays are
converted in a call to <cite>pisa.utils.jsons.to_json</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>resource</strong> (<em>str</em>) – A PISA resource specification (see pisa.utils.resources)</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#pisa.core.map.Map.to_json" title="pisa.core.map.Map.to_json"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_json</span></code></a>, <a class="reference internal" href="pisa.utils.html#pisa.utils.jsons.to_json" title="pisa.utils.jsons.to_json"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pisa.utils.jsons.to_json</span></code></a></p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.map.Map.full_comparison">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">full_comparison</span></span><a class="headerlink" href="#pisa.core.map.Map.full_comparison" title="Link to this definition"></a></dt>
<dd><p>Compare element-by-element instead of just comparing hashes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.generalized_poisson_llh">
<span class="sig-name descname"><span class="pre">generalized_poisson_llh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected_values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">empty_bins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binned</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.generalized_poisson_llh"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.generalized_poisson_llh" title="Link to this definition"></a></dt>
<dd><p>compute the likelihood of this map’s count to originate from</p>
<p>Note that unlike the other likelihood functions, expected_values
is expected to be a ditribution maker</p>
<section id="inputs">
<h3>inputs:<a class="headerlink" href="#inputs" title="Link to this heading"></a></h3>
<blockquote>
<div><p>expected_values: OrderedDict of MapSets</p>
<p>empty_bins: None, list or np.ndarray (list the bin indices that are empty)</p>
<p>binned: bool (return the bin-by-bin llh or the sum over all bins)</p>
</div></blockquote>
</section>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.map.Map.hash">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hash</span></span><a class="headerlink" href="#pisa.core.map.Map.hash" title="Link to this definition"></a></dt>
<dd><p>Hash value</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.map.Map.hashable_state">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hashable_state</span></span><a class="headerlink" href="#pisa.core.map.Map.hashable_state" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.map.Map.hist">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hist</span></span><a class="headerlink" href="#pisa.core.map.Map.hist" title="Link to this definition"></a></dt>
<dd><p>Histogram array underlying the Map</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.item">
<span class="sig-name descname"><span class="pre">item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.item" title="Link to this definition"></a></dt>
<dd><p>Call <code class="docutils literal notranslate"><span class="pre">item(*args)</span></code> method on the contained <cite>hist</cite>, returning a
single Python scalar corresponding to <cite>*args</cite>. See help for
<a href="#id10"><span class="problematic" id="id11">:method:`numpy.ndarray.item`</span></a> for more info.</p>
<p>Note that this method is called by <a href="#id12"><span class="problematic" id="id13">:method:`numpy.asscalar`</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>*args</strong> – Passed to <a href="#id14"><span class="problematic" id="id15">:method:`numpy.ndarray.item`</span></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>z</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Standard Python scalar object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.iterbins">
<span class="sig-name descname"><span class="pre">iterbins</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.iterbins"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.iterbins" title="Link to this definition"></a></dt>
<dd><p>Returns a bin iterator which yields a map containing a single bin
each time. Note that modifications to that single-bin map will be
reflected in this (the parent) map.</p>
<p>Note that the returned map has the attribute <cite>parent_indexer</cite> for
indexing directly into to the parent map (or to a similar map).</p>
<dl class="field-list simple">
<dt class="field-odd">Yields<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Map object containing one of each bin of this Map</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.itercoords">
<span class="sig-name descname"><span class="pre">itercoords</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.itercoords"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.itercoords" title="Link to this definition"></a></dt>
<dd><p>Iterator that yields the coordinate of each bin in the map.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.llh">
<span class="sig-name descname"><span class="pre">llh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binned</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.llh"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.llh" title="Link to this definition"></a></dt>
<dd><p>Calculate the total log-likelihood value between this map and the
map described by <cite>expected_values</cite>; self is taken to be the “actual
values” (or (pseudo)data), and <cite>expected_values</cite> are the expectation
values for each bin.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expected_values</strong> (<em>numpy.ndarray</em><em> or </em><a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map"><em>Map</em></a><em> of </em><em>same dimension as this</em>)</p></li>
<li><p><strong>binned</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>total_llh</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float or binned_llh if binned=True</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.log">
<span class="sig-name descname"><span class="pre">log</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.log"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.log" title="Link to this definition"></a></dt>
<dd><p>Take natural logarithm of map’s values, returning a new map.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>log_map</strong></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map">Map</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.log10">
<span class="sig-name descname"><span class="pre">log10</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.log10"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.log10" title="Link to this definition"></a></dt>
<dd><p>Take base-10 logarithm of map’s values, returning a new map.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>log10_map</strong></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map">Map</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.mcllh_eff">
<span class="sig-name descname"><span class="pre">mcllh_eff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binned</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.mcllh_eff"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.mcllh_eff" title="Link to this definition"></a></dt>
<dd><p>Calculate the total LEff log-likelihood value between this map and the
map described by <cite>expected_values</cite>; self is taken to be the “actual
values” (or (pseudo)data), and <cite>expected_values</cite> are the expectation
values for each bin.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expected_values</strong> (<em>numpy.ndarray</em><em> or </em><a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map"><em>Map</em></a><em> of </em><em>same dimension as this</em>)</p></li>
<li><p><strong>binned</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>total_llh</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float or binned_llh if binned=True</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.mcllh_mean">
<span class="sig-name descname"><span class="pre">mcllh_mean</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binned</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.mcllh_mean"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.mcllh_mean" title="Link to this definition"></a></dt>
<dd><p>Calculate the total LMean log-likelihood value between this map and the
map described by <cite>expected_values</cite>; self is taken to be the “actual
values” (or (pseudo)data), and <cite>expected_values</cite> are the expectation
values for each bin.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expected_values</strong> (<em>numpy.ndarray</em><em> or </em><a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map"><em>Map</em></a><em> of </em><em>same dimension as this</em>)</p></li>
<li><p><strong>binned</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>total_llh</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float or binned_llh if binned=True</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.metric_total">
<span class="sig-name descname"><span class="pre">metric_total</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.metric_total"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.metric_total" title="Link to this definition"></a></dt>
<dd><p>Compute the optimization metric on the bins of a Map</p>
<section id="id16">
<h3>Inputs<a class="headerlink" href="#id16" title="Link to this heading"></a></h3>
<p>expected_values: Map (the data/pseudo-data binned counts)</p>
<p>metric: str (name of the optimization metric)</p>
<dl class="simple">
<dt>metric_kwargs: None or Dict (special arguments to pass to</dt><dd><p>a special metric - right now just
useful for generalized_poisson_llh)</p>
</dd>
</dl>
</section>
<section id="returns">
<h3>Returns:<a class="headerlink" href="#returns" title="Link to this heading"></a></h3>
<p>float (sum of the metric over all bins of expected_values)</p>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.mod_chi2">
<span class="sig-name descname"><span class="pre">mod_chi2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binned</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.mod_chi2"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.mod_chi2" title="Link to this definition"></a></dt>
<dd><p>Calculate the total modified chi2 value between this map and the map
described by <cite>expected_values</cite>; self is taken to be the “actual values”
(or (pseudo)data), and <cite>expected_values</cite> are the expectation values for
each bin.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expected_values</strong> (<em>numpy.ndarray</em><em> or </em><a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map"><em>Map</em></a><em> of </em><em>same dimension as this.</em>)</p></li>
<li><p><strong>binned</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>total_mod_chi2</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float or binned_mod_chi2 if binned=True</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.map.Map.name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#pisa.core.map.Map.name" title="Link to this definition"></a></dt>
<dd><p>Map’s name</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.map.Map.nominal_values">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">nominal_values</span></span><a class="headerlink" href="#pisa.core.map.Map.nominal_values" title="Link to this definition"></a></dt>
<dd><p>Bin values stripped of uncertainties</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.map.Map.normalize_values">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">normalize_values</span></span><a class="headerlink" href="#pisa.core.map.Map.normalize_values" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.map.Map.num_entries">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">num_entries</span></span><a class="headerlink" href="#pisa.core.map.Map.num_entries" title="Link to this definition"></a></dt>
<dd><p>total number of weighted entries in all bins</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">symm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logz</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clabel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clabelsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlabelsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylabelsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">titlesize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fig_kw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pcolormesh_kw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colorbar_kw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colorbar_label_kw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binlabel_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binlabel_colors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['white',</span> <span class="pre">'black']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binlabel_color_thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binlabel_stripzeros</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dpi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">300</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bad_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pure_bin_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.plot" title="Link to this definition"></a></dt>
<dd><p>Plot a 2D map.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symm</strong> (<em>bool</em><em>, </em><em>optional</em>) – Plot with symmetric (about 0) value-range limits.</p></li>
<li><p><strong>logz</strong> (<em>bool</em><em>, </em><em>optional</em>) – Plot logarithmic value-range</p></li>
<li><p><strong>vmin</strong> (<em>float</em><em>, </em><em>optional</em>) – Minimum and maximum values for the value-range of the plot. If None
specified, these are set according to <cite>symm</cite> and/or the values of
the <cite>hist</cite> in this Map.</p></li>
<li><p><strong>vmax</strong> (<em>float</em><em>, </em><em>optional</em>) – Minimum and maximum values for the value-range of the plot. If None
specified, these are set according to <cite>symm</cite> and/or the values of
the <cite>hist</cite> in this Map.</p></li>
<li><p><strong>backend</strong> (<em>string</em><em>, </em><em>optional</em>) – Matplotlib backend to use (only takes effect if matplotlib is first
imported by this function).</p></li>
<li><p><strong>ax</strong> (<em>matplotlib.axis.Axis</em><em>, </em><em>optional</em>) – Provide an axis onto which the plot is drawn; if None is specified,
a new figure and axis are created.</p></li>
<li><p><strong>title</strong> (<em>string</em><em>, </em><em>optional</em>) – Set the title to this value; if None is specified, the title is
taken from the name of this Map.</p></li>
<li><p><strong>cmap</strong> (<em>string</em><em> or </em><em>matplotlib.colors.Colormap</em><em>, </em><em>optional</em>)</p></li>
<li><p><strong>clabel</strong> (<em>string</em><em>, </em><em>optional</em>) – Label to place on the colorbar</p></li>
<li><p><strong>clabelsize</strong> (<em>float</em><em>, </em><em>optional</em>) – Size of the colorbar, x-axis label, y-axis label, and title text</p></li>
<li><p><strong>xlabelsize</strong> (<em>float</em><em>, </em><em>optional</em>) – Size of the colorbar, x-axis label, y-axis label, and title text</p></li>
<li><p><strong>ylabelsize</strong> (<em>float</em><em>, </em><em>optional</em>) – Size of the colorbar, x-axis label, y-axis label, and title text</p></li>
<li><p><strong>titlesize</strong> (<em>float</em><em>, </em><em>optional</em>) – Size of the colorbar, x-axis label, y-axis label, and title text</p></li>
<li><p><strong>fig_kw</strong> (<em>mapping</em><em>, </em><em>optional</em>) – Keyword arguments passed to call to matplotlib.pyplot.subplots;
this is only done, however, if <cite>ax</cite> is None and so a new figure
needs to be created.</p></li>
<li><p><strong>pcolormesh_kw</strong> (<em>mapping</em><em>, </em><em>optional</em>) – Keyword arguments to pass to call to <cite>matplotlib.pyplot.pcolormesh</cite>
(if Map is two or more dimensions).</p></li>
<li><p><strong>colorbar_kw</strong> (<em>mapping</em><em>, </em><em>optional</em>) – Keyword arguments to pass to call to <cite>matplotlib.colorbar</cite>.</p></li>
<li><p><strong>colorbar_label_kw</strong> (<em>mapping</em><em>, </em><em>optional</em>) – Keyword arguments to pass to call to <cite>matplotlib.colorbar.set_label</cite>.</p></li>
<li><p><strong>fmt</strong> (<em>string in</em><em> (</em><em>'pdf'</em><em>, </em><em>'png'</em><em>) or </em><em>iterable thereof</em><em>, </em><em>optional</em>) – File format(s) in which to save the file. If None, then the plot
will not be saved.</p></li>
<li><p><strong>outdir</strong> (<em>string</em><em>, </em><em>optional</em>) – Directory into which to save the plot. If None is provided, the the
default is the current directory. Note that if <cite>fmt</cite> is None, then
this argument is irrelevant.</p></li>
<li><p><strong>fname</strong> (<em>string</em><em>, </em><em>optional</em>) – Custom filename to set for saved figure. If not provided, a name
is derived from the <cite>name</cite> attribute of the Map. Note that if
<cite>fmt</cite> is None, then this argument is irrelevant.</p></li>
<li><p><strong>binlabel_format</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>, optional) – Format string to label the content in each bin. If None (default), the bins
will not be labeled. Bin labels are generated by calling <cite>.format(zi)</cite> on
the given string, where <cite>zi</cite> is the z-value of bin i.</p></li>
<li><p><strong>binlabel_stripzeros</strong> (<em>bool</em><em>, </em><em>optional</em>) – Strip zeros from bin labels. Default: <cite>True</cite></p></li>
<li><p><strong>binlabel_colors</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code> or list of <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>, optional) – Colors to be used below (index 0) and above (index 1) the
<cite>binlabel_color_thresh</cite> value. Default: “white” below and “black” above
threshold. If only one <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code> is given, all labels will have that color.</p></li>
<li><p><strong>binlabel_color_thresh</strong> (float or <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>, optional) – Threshold at which to switch color of the bin labels for better contrast. If
<cite>None</cite> (default), all labels will use the last color given in
<cite>binlabel_colors</cite>. If a <cite>float</cite> is given, bins with a value below the given
number use the first color in <cite>binlabel_colors</cite> and bins with a value above
the given number use the second color in <cite>binlabel_colors</cite>. If “auto”, set
threshold automatically (basically half way).</p></li>
<li><p><strong>dpi</strong> (<em>int</em><em>, </em><em>optional</em>) – Dots per inch for saved figure. Default: 300</p></li>
<li><p><strong>bad_color</strong> (<em>string</em><em>, </em><em>optional</em>) – Can choose the color used for “bad” bins (e.g. NaN)</p></li>
<li><p><strong>pure_bin_names</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, use the (third dimension) bin names as they are defined in binning config, without any formatting. Default: <cite>False</cite></p></li>
<li><p><strong>bin_id</strong> (<em>int</em><em>, </em><em>optional</em>) – If the map is a slice of a multi-dimensional map, this is the index of the slice.
Used for the internal recursive function call, to keep track of current third dimension slice.
Default setting produces the correct behaviour for 3-dimensional histograms. Default: <cite>None</cite></p></li>
<li><p><strong>full_ax</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.axes.Axes</span></code>, optional) – If the map is a slice of a multi-dimensional map, this is the full axis object of the overall map.
Used for the internal recursive function call, to keep track of the main axis.
Default setting produces the correct behaviour for 3-dimensional histograms. Default: <cite>None</cite></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>fig</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.figure.Figure</span></code> object)</p></li>
<li><p><strong>ax</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.axes.Axes</span></code> object)</p></li>
<li><p><strong>pcmesh</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.collections.QuadMesh</span></code>)</p></li>
<li><p><strong>colorbar</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.colorbar.Colorbar</span></code>)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.project">
<span class="sig-name descname"><span class="pre">project</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">axis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keepdims</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.project"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.project" title="Link to this definition"></a></dt>
<dd><p>Project all dimensions onto a single <cite>axis</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>axis</strong> (<em>string</em><em> or </em><em>int</em>) – Dimensions to be projected onto.</p></li>
<li><p><strong>keepdims</strong> (<em>bool</em>) – If True, marginalizes out (removes) the _un_specified dimensions.
If False, the binning in the summed dimension(s) includes
the full range of the binning for each dimension in the original
Map. Note that if you want to remove all _singleton_ dimensions
(which could include the <cite>axis</cite> specified here), call the
<cite>squeeze</cite> method on the result of <cite>project</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>projection</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map">Map</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.rebin">
<span class="sig-name descname"><span class="pre">rebin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_binning</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.rebin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.rebin" title="Link to this definition"></a></dt>
<dd><p>Rebin the map with bin edge locations and names according to those
specified in <cite>new_binning</cite>.</p>
<p>Calls the <cite>rebin</cite> function in the pisa.core.map.rebin module to do the
actual work.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>new_binning</strong> (<a class="reference internal" href="#pisa.core.binning.MultiDimBinning" title="pisa.core.binning.MultiDimBinning"><em>MultiDimBinning</em></a>) – Dimensions specified in <cite>new_binning</cite> must match (modulo
pre/suffixes) the current dimensions.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Map binned according to <cite>new_binning</cite>.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></dt><dd><p>function called to do the work</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.reorder_dimensions">
<span class="sig-name descname"><span class="pre">reorder_dimensions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">order</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.reorder_dimensions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.reorder_dimensions" title="Link to this definition"></a></dt>
<dd><p>Rearrange the dimensions in the map. This affects both the binning
and the contained histogram.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>order</strong> (<a class="reference internal" href="#pisa.core.binning.MultiDimBinning" title="pisa.core.binning.MultiDimBinning"><em>MultiDimBinning</em></a><em> or </em><em>sequence</em><em> of </em><em>str</em><em>, </em><em>int</em><em>, or </em><a class="reference internal" href="#pisa.core.binning.OneDimBinning" title="pisa.core.binning.OneDimBinning"><em>OneDimBinning</em></a>) – Ordering desired for the dimensions of this map. See
<cite>binning.reorder_dimensions</cite> for details on how to specify <cite>order</cite>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>Map</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>copy of this map but with dimensions reordered</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#pisa.core.map.rebin" title="pisa.core.map.rebin"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rebin</span></code></a></dt><dd><p>Modify Map (and its binning) by splitting or combining adjacent bins</p>
</dd>
<dt><a class="reference internal" href="#pisa.core.map.Map.downsample" title="pisa.core.map.Map.downsample"><code class="xref py py-obj docutils literal notranslate"><span class="pre">downsample</span></code></a></dt><dd><p>Modify Map (and its binning) by combining adjacent bins</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.round2int">
<span class="sig-name descname"><span class="pre">round2int</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.round2int"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.round2int" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.map.Map.serializable_state">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">serializable_state</span></span><a class="headerlink" href="#pisa.core.map.Map.serializable_state" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.set_errors">
<span class="sig-name descname"><span class="pre">set_errors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">error_hist</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.set_errors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.set_errors" title="Link to this definition"></a></dt>
<dd><p>Manually define the error with an array the same shape as the
contained histogram. Can also remove errors by passing None.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>error_hist</strong> (<em>None</em><em> or </em><em>ndarray</em><em> (</em><em>same shape as hist</em><em>)</em>) – Standard deviations to apply to <cite>self.hist</cite>.
If None is passed, any errors present are removed, making
<cite>self.hist</cite> a bare numpy array.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.set_poisson_errors">
<span class="sig-name descname"><span class="pre">set_poisson_errors</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.set_poisson_errors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.set_poisson_errors" title="Link to this definition"></a></dt>
<dd><p>Approximate poisson errors using sqrt(n).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.map.Map.shape">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">shape</span></span><a class="headerlink" href="#pisa.core.map.Map.shape" title="Link to this definition"></a></dt>
<dd><p>shape of the map, akin to <cite>nump.ndarray.shape</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.signed_sqrt_mod_chi2">
<span class="sig-name descname"><span class="pre">signed_sqrt_mod_chi2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected_values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.signed_sqrt_mod_chi2"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.signed_sqrt_mod_chi2" title="Link to this definition"></a></dt>
<dd><p>Calculate the binwise (signed) square-root of the modified chi2 value
between this map and the map described by <cite>expected_values</cite>; self is
taken to be the “actual values” (or (pseudo)data), and <cite>expected_values</cite>
are the expectation values for each bin.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>expected_values</strong> (<em>numpy.ndarray</em><em> or </em><a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map"><em>Map</em></a><em> of </em><em>same dimension as this.</em>)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>m_pulls</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>signed_sqrt_mod_chi2</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.map.Map.size">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">size</span></span><a class="headerlink" href="#pisa.core.map.Map.size" title="Link to this definition"></a></dt>
<dd><p>total number of elements</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.slice">
<span class="sig-name descname"><span class="pre">slice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.slice"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.slice" title="Link to this definition"></a></dt>
<dd><p>Slice the map, where each argument is the name of a dimension.
Dimensions not named are included in full (i.e., via <cite>np.slice(None)</cite>).</p>
<p>Note that the resulting map maintains the same number of dimensions as
its parent, including the ordering of the dimensions. The size of each
dimension, however, is reduced by slicing.</p>
<p>Note also that modifications to the returned object’s <cite>hist</cite> will
modify the parent’s <cite>hist</cite>.</p>
<p class="rubric">Examples</p>
<p>Indexing can be done as in the following examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mdb</span> <span class="o">=</span> <span class="n">MultiDimBinning</span><span class="p">([</span>
<span class="gp">... </span>    <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">is_lin</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">num_bins</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>    <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">is_lin</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">num_bins</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">... </span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ones</span> <span class="o">=</span> <span class="n">mdb</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;ones&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ones</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,))</span>
<span class="go">Map(name=&#39;ones&#39;,</span>
<span class="go">        tex=&#39;{\rm ones}&#39;,</span>
<span class="go">        full_comparison=False,</span>
<span class="go">        hash=None,</span>
<span class="go">        parent_indexer=(0, slice(None, None, None)),</span>
<span class="go">        binning=MultiDimBinning([</span>
<span class="go">                    OneDimBinning(name=OneDimBinning(&#39;x&#39;, 1 bin with edges at [0.0, 0.2] (behavior is linear))),</span>
<span class="go">                    OneDimBinning(name=OneDimBinning(&#39;y&#39;, 10 equally-sized bins spanning [1.0, 2.0]))]),</span>
<span class="go">        hist=array([[ 1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.]]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ones</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">))</span><span class="o">.</span><span class="n">hist</span><span class="p">)</span>
<span class="go">[[ 1.  1.  1.  1.  1.  1.  1.  1.  1.  1.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ones</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">hist</span><span class="p">)</span>
<span class="go">[[ 1.]]</span>
</pre></div>
</div>
<p>Modifications to the slice modifies the original:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mdb</span> <span class="o">=</span> <span class="n">MultiDimBinning</span><span class="p">([</span>
<span class="gp">... </span>    <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">is_lin</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">num_bins</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>    <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">is_lin</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">num_bins</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">... </span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ones</span> <span class="o">=</span> <span class="n">mdb</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;ones&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sl</span> <span class="o">=</span> <span class="n">ones</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sl</span><span class="o">.</span><span class="n">hist</span><span class="p">[</span><span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">sl</span><span class="o">.</span><span class="n">hist</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ones</span><span class="o">.</span><span class="n">hist</span><span class="p">)</span>
<span class="go">[[ 1.  1.  1.  1.  1.  1.  1.  1.  1.  1.]</span>
<span class="go"> [ 1.  1.  1.  1.  1.  1.  1.  1.  1.  1.]</span>
<span class="go"> [ 0.  0.  0.  0.  0.  0.  0.  0.  0.  0.]</span>
<span class="go"> [ 1.  1.  1.  1.  1.  1.  1.  1.  1.  1.]</span>
<span class="go"> [ 1.  1.  1.  1.  1.  1.  1.  1.  1.  1.]]</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#pisa.core.binning.MultiDimBinning.indexer" title="pisa.core.binning.MultiDimBinning.indexer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pisa.core.binning.MultiDimBinning.indexer</span></code></a></dt><dd><p>Method used to generate a raw indexer (that can be used to index into a map or a Numpy array of same dimensionality). This method is accessible from a Map <cite>map_x</cite> object via its <cite>binning</cite> attribute: <cite>map_x.binning.indexer(…)</cite></p>
</dd>
<dt><a class="reference internal" href="#pisa.core.binning.MultiDimBinning.broadcast" title="pisa.core.binning.MultiDimBinning.broadcast"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pisa.core.binning.MultiDimBinning.broadcast</span></code></a></dt><dd><p>Broadcast a 1D Numpy array to dimensionality with reference to this object’s dimensionality.</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.split">
<span class="sig-name descname"><span class="pre">split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_basenames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pure_bin_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.split"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.split" title="Link to this definition"></a></dt>
<dd><p>Split this map into one or more maps by selecting the <cite>dim</cite>
dimension and optionally the specific bin(s) within that dimension
specified by <cite>bin</cite>.</p>
<p>If both <cite>dim</cite> and <cite>bin</cite> are specified and this identifies a single bin,
a single Map is returned, while if this locates multiple bins, a MapSet
is returned where each map corresponds to a bin (in the order dictated
by the <cite>bin</cite> specification).</p>
<p>If only <cite>dim</cite> is specified, _regardless_ if multiple bins meet the
(dim, bin) criteria, the maps corresponding to each <cite>bin</cite> are collected
into a MapSet and returned.</p>
<p>Resulting maps are ordered according to the binning and are renamed as:</p>
<blockquote>
<div><p>new_map[j].name = orig_map.name__dim.binning.bin_names[i]</p>
</div></blockquote>
<p>if the current map has a name, or</p>
<blockquote>
<div><p>new_map[j].name = dim.binning.bin_names[i]</p>
</div></blockquote>
<p>if the current map has a zero-length name.</p>
<p>In the above, j is the index into the new MapSet and i is the index to
the bin in the original binning spec. <cite>map.name</cite> is the current
(pre-split) map’s name, and if the bins do not have names, then the
stringified integer index to the bin, str(i), is used instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dim</strong> (<em>string</em><em>, </em><em>int</em>) – Name or index of a dimension in the map</p></li>
<li><p><strong>bin</strong> (<em>None</em><em> or </em><em>bin indexing object</em><em> (</em><em>str</em><em>, </em><em>int</em><em>, </em><em>slice</em><em>, </em><em>ellipsis</em><em>)</em>) – Optionally specify specific bin(s) to split out from the chosen
dimension.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>split_maps</strong> – If only <cite>dim</cite> is passed, returns MapSet regardless of how many maps
are found. If both <cite>dim</cite> and <cite>bin</cite> are specified and this results
in selecting more than one bin, also returns a MapSet. However if
both <cite>dim</cite> and <cite>bin</cite> are specified and this selects a single bin,
just the indexed Map is returned. Naming of the maps and MapSet is
updated to reflect what the map represents, while the hash value is
copied into the new map(s).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map">Map</a> or <a class="reference internal" href="#pisa.core.map.MapSet" title="pisa.core.map.MapSet">MapSet</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.sqrt">
<span class="sig-name descname"><span class="pre">sqrt</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.sqrt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.sqrt" title="Link to this definition"></a></dt>
<dd><p>Take square root of map’s values, returning a new map.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>sqrt_map</strong></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map">Map</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.squeeze">
<span class="sig-name descname"><span class="pre">squeeze</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.squeeze"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.squeeze" title="Link to this definition"></a></dt>
<dd><p>Remove any singleton dimensions (i.e. that have only a single bin).
Analagous to <cite>numpy.squeeze</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Map with equivalent values but singleton dimensions removed</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.map.Map.std_devs">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">std_devs</span></span><a class="headerlink" href="#pisa.core.map.Map.std_devs" title="Link to this definition"></a></dt>
<dd><p>Uncertainties (standard deviations) per bin</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.sum">
<span class="sig-name descname"><span class="pre">sum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keepdims</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.sum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.sum" title="Link to this definition"></a></dt>
<dd><p>Sum over dimensions corresponding to <cite>axis</cite> specification. Similar
in behavior to <cite>numpy.sum</cite> method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>axis</strong> (<em>None;</em><em> or </em><em>str</em><em>, </em><em>int</em><em>, or </em><em>sequence thereof</em>) – Dimension(s) to be summed over. If None, sum over _all_ dimensions.</p></li>
<li><p><strong>keepdims</strong> (<em>bool</em>) – If True, marginalizes out (removes) the specified dimensions. If
False, the binning in the summed dimension(s) is expanded to the
full range of the binning for each dimension over which the sum is
performed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>s</strong> – If all contained dimensiosn are summed over and <cite>keepdims</cite> is
False, a scalar is returned. Otherwise, a Map is returned with
dimensions marginalized out in the sum removed if <cite>keepdims</cite> is
False.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map">Map</a> or scalar</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.map.Map.tex">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">tex</span></span><a class="headerlink" href="#pisa.core.map.Map.tex" title="Link to this definition"></a></dt>
<dd><p>TeX label</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.Map.to_json">
<span class="sig-name descname"><span class="pre">to_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#Map.to_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.Map.to_json" title="Link to this definition"></a></dt>
<dd><p>Serialize the state to a JSON file that can be instantiated as a new
object later.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – Filename; must be either a relative or absolute path (<em>not
interpreted as a PISA resource specification</em>)</p></li>
<li><p><strong>**kwargs</strong> – Further keyword args are sent to <cite>pisa.utils.jsons.to_json()</cite></p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#pisa.core.map.Map.from_json" title="pisa.core.map.Map.from_json"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_json</span></code></a></dt><dd><p>Intantiate new object from the file written by this method</p>
</dd>
</dl>
<p><a class="reference internal" href="pisa.utils.html#pisa.utils.jsons.to_json" title="pisa.utils.jsons.to_json"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pisa.utils.jsons.to_json</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pisa.core.map.MapSet">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pisa.core.map.</span></span><span class="sig-name descname"><span class="pre">MapSet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">maps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hash</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collate_by_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Ordered set of event rate maps (aka histograms) defined over an arbitrary
regluar hyper-rectangular binning.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>maps</strong> (<a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map"><em>Map</em></a><em> or </em><em>sequence</em><em> of </em><a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map"><em>Map</em></a>)</p></li>
<li><p><strong>name</strong> (<em>string</em>)</p></li>
<li><p><strong>tex</strong> (<em>string</em>)</p></li>
<li><p><strong>hash</strong> (<em>immutable</em>)</p></li>
<li><p><strong>collate_by_name</strong> (<em>bool</em>) – <p>If True, when this MapSet is passed alongside another MapSet to a
function that operates on the maps, contained maps in each will be
accessed by name. Hence, only maps with the same names will be operated
on simultaneously.</p>
<p>If false, the contained maps in each MapSet will be accessed by their
order in each MapSet. This behavior is useful if maps are renamed
through some operation but their order is maintained, and then
comparisons are sought with their progenitors with the original
(different) name.</p>
</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.allclose">
<span class="sig-name descname"><span class="pre">allclose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.allclose"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.allclose" title="Link to this definition"></a></dt>
<dd><p>Check if this mapset and another have the same (within machine precision) bin counts</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.apply_to_maps">
<span class="sig-name descname"><span class="pre">apply_to_maps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.apply_to_maps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.apply_to_maps" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.chi2_per_map">
<span class="sig-name descname"><span class="pre">chi2_per_map</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected_values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.chi2_per_map"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.chi2_per_map" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.chi2_total">
<span class="sig-name descname"><span class="pre">chi2_total</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected_values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.chi2_total"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.chi2_total" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.collate_with_names">
<span class="sig-name descname"><span class="pre">collate_with_names</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vals</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.collate_with_names"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.collate_with_names" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.combine_re">
<span class="sig-name descname"><span class="pre">combine_re</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">regexes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.combine_re"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.combine_re" title="Link to this definition"></a></dt>
<dd><p>For each regex passed, add together contained maps whose names
match.</p>
<p>If a string or regex is passed, the corresponding maps are combined and
returned as a Map object. If an iterable of one or more regexes is
passed, each grouping found is combined into a Map separately and the
resulting Maps are populated into a new MapSet to be returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>regexes</strong> (<em>compiled regex</em><em>, </em><em>str representing a regex</em><em>, or </em><em>iterable thereof</em>) – See Python module <cite>re</cite> for formatting.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Map if <cite>regexes</cite> is a string or regex; MapSet if <cite>regexes</cite> is an
iterable of one or more strings or regexes</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>combined</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If any <cite>regexes</cite> fail to match any map names.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>If special characters are used in the regex, like a backslash, be sure
to use a Python raw string (which does not interpret such special
characters) by prefixing the string with an “r”. E.g., the regex to
match a period requires passing</p>
<blockquote>
<div><p><cite>regex=r’.’</cite></p>
</div></blockquote>
<p class="rubric">Examples</p>
<p>Get total of trck and cscd maps, which are named with suffixes “trck”
and “cscd”, respectively.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">total_trck_map</span> <span class="o">=</span> <span class="n">outputs</span><span class="o">.</span><span class="n">combine_re</span><span class="p">(</span><span class="s1">&#39;.*trck&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">total_cscd_map</span> <span class="o">=</span> <span class="n">outputs</span><span class="o">.</span><span class="n">combine_re</span><span class="p">(</span><span class="s1">&#39;.*cscd&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Get a MapSet with both of the above maps in it (and a single command)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">total_pid_maps</span> <span class="o">=</span> <span class="n">outputs</span><span class="o">.</span><span class="n">combine_re</span><span class="p">([</span><span class="s1">&#39;.*trck&#39;</span><span class="p">,</span> <span class="s1">&#39;.*cscd&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Strict name-checking, combine  nue_cc + nuebar_cc, including both
cascades and tracks.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nue_cc_nuebar_cc_map</span> <span class="o">=</span> <span class="n">outputs</span><span class="o">.</span><span class="n">combine_re</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;^nue(bar){0,1}_cc_(cscd|trck)$&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Lenient nue_cc + nuebar_cc including both cascades and tracks.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nue_cc_nuebar_cc_map</span> <span class="o">=</span> <span class="n">outputs</span><span class="o">.</span><span class="n">combine_re</span><span class="p">(</span><span class="s1">&#39;nue.*_cc_.*&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Total of all maps</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">total</span> <span class="o">=</span> <span class="n">outputs</span><span class="o">.</span><span class="n">combine_re</span><span class="p">(</span><span class="s1">&#39;.*&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#pisa.core.map.MapSet.combine_wildcard" title="pisa.core.map.MapSet.combine_wildcard"><code class="xref py py-obj docutils literal notranslate"><span class="pre">combine_wildcard</span></code></a></dt><dd><p>Similar method but using wildcards (i.e., globbing, like filename matching in the Unix shell)</p>
</dd>
</dl>
</div>
<p class="rubric">References</p>
<dl class="simple">
<dt>re<span class="classifier">Python module used for parsing regular expressions</span></dt><dd><p><a class="reference external" href="https://docs.python.org/2/library/re.html">https://docs.python.org/2/library/re.html</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.combine_wildcard">
<span class="sig-name descname"><span class="pre">combine_wildcard</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expressions</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.combine_wildcard"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.combine_wildcard" title="Link to this definition"></a></dt>
<dd><p>For each expression passed, add together contained maps whose names
match.</p>
<p>Expressions can contain wildcards like those used in the Unix shell.</p>
<dl class="simple">
<dt>Valid wildcards (from fnmatch docs, link below):</dt><dd><p>“*” : matches everything
“?” : mateches any single character
“[<cite>seq</cite>]” : matches any character in <cite>seq</cite>
“[!`seq`]” : matches any character not in <cite>seq</cite></p>
</dd>
</dl>
<p>Note that if a string is passed, the matching maps are combined and
returned as a Map object. If an iterable of strings is passed, each
grouping found is combined into a Map separately and the resulting Maps
are populated into a new MapSet to be returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>expressions</strong> (<em>string</em><em> or </em><em>sequence thereof</em>) – See Python module <cite>fnmatch</cite> for more info.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Map if <cite>expressions</cite> is a string; MapSet if <cite>expressions</cite> is an
iterable of one or more strings</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>combined</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If any <cite>expressions</cite> fail to match any map names.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">total_trck_map</span> <span class="o">=</span> <span class="n">outputs</span><span class="o">.</span><span class="n">combine_wildcard</span><span class="p">(</span><span class="s1">&#39;*trck&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">total_cscd_map</span> <span class="o">=</span> <span class="n">outputs</span><span class="o">.</span><span class="n">combine_wildcard</span><span class="p">(</span><span class="s1">&#39;*cscd&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">total_pid_maps</span> <span class="o">=</span> <span class="n">outpubs</span><span class="o">.</span><span class="n">combine_wildcard</span><span class="p">([</span><span class="s1">&#39;*trck&#39;</span><span class="p">,</span> <span class="s1">&#39;*cscd&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nue_cc_nuebar_cc_map</span> <span class="o">=</span> <span class="n">outputs</span><span class="o">.</span><span class="n">combine_wildcard</span><span class="p">(</span><span class="s1">&#39;nue*_cc_*&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">total</span> <span class="o">=</span> <span class="n">outputs</span><span class="o">.</span><span class="n">combine_wildcard</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#pisa.core.map.MapSet.combine_re" title="pisa.core.map.MapSet.combine_re"><code class="xref py py-obj docutils literal notranslate"><span class="pre">combine_re</span></code></a></dt><dd><p>similar method but using regular expressions</p>
</dd>
</dl>
</div>
<p class="rubric">References</p>
<dl class="simple">
<dt>fnmatch<span class="classifier">Python module used for parsing the expression with wildcards</span></dt><dd><p><a class="reference external" href="https://docs.python.org/2/library/fnmatch.html">https://docs.python.org/2/library/fnmatch.html</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.compare">
<span class="sig-name descname"><span class="pre">compare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.compare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.compare" title="Link to this definition"></a></dt>
<dd><p>Compare maps in this MapSet against a reference MapSet.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ref</strong> (<a class="reference internal" href="#pisa.core.map.MapSet" title="pisa.core.map.MapSet"><em>MapSet</em></a>) – Maps taken as the reference against which to compare maps
contained within this MapSet.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>stats</strong> – Each key is the name of a map, and each value is istelf an
OrderedDict as returned by the <cite>Map.compare</cite> method</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="pisa.html#pisa.OrderedDict" title="pisa.OrderedDict">OrderedDict</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span> <span class="o">=</span> <span class="n">map_set_test</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">map_set_ref</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.downsample">
<span class="sig-name descname"><span class="pre">downsample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.downsample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.downsample" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.find_map">
<span class="sig-name descname"><span class="pre">find_map</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.find_map"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.find_map" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.fluctuate">
<span class="sig-name descname"><span class="pre">fluctuate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">jumpahead</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.fluctuate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.fluctuate" title="Link to this definition"></a></dt>
<dd><p>Add fluctuations to the maps in the set and return as a new MapSet.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> (<em>None</em><em> or </em><em>string</em>)</p></li>
<li><p><strong>random_state</strong> (<em>None</em><em>, </em><em>numpy.random.RandomState</em><em>, or </em><em>seed spec</em>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.from_json">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resource</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.from_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.from_json" title="Link to this definition"></a></dt>
<dd><p>Instantiate a new MapSet object from a JSON file.</p>
<p>The format of the JSON is generated by the <cite>MapSet.to_json</cite> method,
which converts a MapSet object to basic types and then numpy arrays are
converted in a call to <cite>pisa.utils.jsons.to_json</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>resource</strong> (<em>str</em>) – A PISA resource specification (see pisa.utils.resources)</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#pisa.core.map.MapSet.to_json" title="pisa.core.map.MapSet.to_json"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_json</span></code></a>, <a class="reference internal" href="pisa.utils.html#pisa.utils.jsons.to_json" title="pisa.utils.jsons.to_json"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pisa.utils.jsons.to_json</span></code></a></p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.hash">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hash</span></span><a class="headerlink" href="#pisa.core.map.MapSet.hash" title="Link to this definition"></a></dt>
<dd><p>Hash value of the map set is based upon the contained maps.
* If all maps have the same hash value, this value is returned as</p>
<blockquote>
<div><p>the map set’s hash</p>
</div></blockquote>
<ul class="simple">
<li><p>If one or more maps have different hash values, a list of the
contained maps’ hash values is hashed</p></li>
<li><p>If any contained map has None for hash value, the hash value of
the map set is also None (i.e., invalid)</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.hash_maps">
<span class="sig-name descname"><span class="pre">hash_maps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.hash_maps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.hash_maps" title="Link to this definition"></a></dt>
<dd><p>Generate a hash on the contained maps (i.e. exclude state pertaining
only to the MapSet itself, but include all state pertaining to the
contained Maps).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>map_names</strong> (<em>None</em><em> or </em><em>sequence</em><em> of </em><em>strings</em>) – If sequence of strings, use these as the map names instead of any
names contained.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>hash</strong> – If any contained map hashes to None, the resulting hash will also
be None.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None or int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.hashes">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hashes</span></span><a class="headerlink" href="#pisa.core.map.MapSet.hashes" title="Link to this definition"></a></dt>
<dd><p>hash of each map</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.index">
<span class="sig-name descname"><span class="pre">index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.index" title="Link to this definition"></a></dt>
<dd><p>Find map corresponding to <cite>x</cite> and return its index. Accepts either
an integer index or a map name to make interface consistent.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<em>int</em><em>, </em><em>string</em><em>, or </em><a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map"><em>Map</em></a>) – Map, map name, or integer index of map in this MapSet. If a Map is
passed, only its name is matched to the maps in this set.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>integer index to the map</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.llh_per_map">
<span class="sig-name descname"><span class="pre">llh_per_map</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected_values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.llh_per_map"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.llh_per_map" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.llh_total">
<span class="sig-name descname"><span class="pre">llh_total</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected_values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.llh_total"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.llh_total" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.log">
<span class="sig-name descname"><span class="pre">log</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.log"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.log" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.log10">
<span class="sig-name descname"><span class="pre">log10</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.log10"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.log10" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.metric_per_map">
<span class="sig-name descname"><span class="pre">metric_per_map</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.metric_per_map"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.metric_per_map" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.metric_total">
<span class="sig-name descname"><span class="pre">metric_total</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.metric_total"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.metric_total" title="Link to this definition"></a></dt>
<dd><p>Compute the binned optimization metric on all maps of a mapset,
then sum it up.</p>
<dl class="simple">
<dt>metric_kwargs allows to pass extra arguments to the metric, like</dt><dd><p>the number of empty bins for the generalized poisson llh
(Not yet implemented for Mapset)</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#pisa.core.map.MapSet.name" title="Link to this definition"></a></dt>
<dd><p>name of the map (legal Python name)</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.names">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">names</span></span><a class="headerlink" href="#pisa.core.map.MapSet.names" title="Link to this definition"></a></dt>
<dd><p>name of each map</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of strings</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.plot" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.pop">
<span class="sig-name descname"><span class="pre">pop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.pop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.pop" title="Link to this definition"></a></dt>
<dd><p>Remove a map and return it. If a value is passed, the map
corresponding to <cite>index(value)</cite> is removed and returned instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>(</strong><strong>optional</strong><strong>)</strong> (<em>x</em>) – Map, map name, or integer index of map in this MapSet. If a Map is
passed, only its name is matched to the maps in this set.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Map removed from this MapSet</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">list.pop</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.project">
<span class="sig-name descname"><span class="pre">project</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">axis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keepdims</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.project"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.project" title="Link to this definition"></a></dt>
<dd><p>Per-map projections onto single axis. See Map.project for more
detailed help.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>axis</strong> (<em>string</em><em> or </em><em>int</em>)</p></li>
<li><p><strong>keepdims</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>projection</strong> – Each map in this MapSet projected onto <cite>axis</cite>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pisa.core.map.MapSet" title="pisa.core.map.MapSet">MapSet</a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#pisa.core.map.MapSet.sum" title="pisa.core.map.MapSet.sum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sum</span></code></a></dt><dd><p>Sum over specified dimension(s)</p>
</dd>
<dt><a class="reference internal" href="#pisa.core.map.Map.project" title="pisa.core.map.Map.project"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Map.project</span></code></a></dt><dd><p>Method called for each map in this MapSet to perform the actual projection.</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.rebin">
<span class="sig-name descname"><span class="pre">rebin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.rebin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.rebin" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.reorder_dimensions">
<span class="sig-name descname"><span class="pre">reorder_dimensions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">order</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.reorder_dimensions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.reorder_dimensions" title="Link to this definition"></a></dt>
<dd><p>Return a new MapSet object with dimensions ordered
according to <cite>order</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>order</strong> (<a class="reference internal" href="#pisa.core.binning.MultiDimBinning" title="pisa.core.binning.MultiDimBinning"><em>MultiDimBinning</em></a><em> or </em><em>sequence</em><em> of </em><em>string</em><em>, </em><em>int</em><em>, or </em><a class="reference internal" href="#pisa.core.binning.OneDimBinning" title="pisa.core.binning.OneDimBinning"><em>OneDimBinning</em></a>) – Order of dimensions to use. Strings are interpreted as dimension
basenames, integers are interpreted as dimension indices, and
OneDimBinning objects are interpreted by their <cite>basename</cite>
attributes (so e.g. the exact binnings in <cite>order</cite> do not have to
match this object’s exact binnings; only their basenames). Note
that a MultiDimBinning object is a valid sequence type to use for
<cite>order</cite>.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Dimensions specified in <cite>order</cite> that are not in this object are
ignored, but dimensions in this object that are missing in <cite>order</cite>
result in an error.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>MapSet object with reordred dimensions.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError if dimensions present in this object are missing from</strong> – </p></li>
<li><p><strong>order</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.serializable_state">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">serializable_state</span></span><a class="headerlink" href="#pisa.core.map.MapSet.serializable_state" title="Link to this definition"></a></dt>
<dd><p>all state needed to reconstruct object</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="pisa.html#pisa.OrderedDict" title="pisa.OrderedDict">OrderedDict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.set_poisson_errors">
<span class="sig-name descname"><span class="pre">set_poisson_errors</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.set_poisson_errors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.set_poisson_errors" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.sqrt">
<span class="sig-name descname"><span class="pre">sqrt</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.sqrt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.sqrt" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.squeeze">
<span class="sig-name descname"><span class="pre">squeeze</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.squeeze"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.squeeze" title="Link to this definition"></a></dt>
<dd><p>Remove any singleton dimensions (i.e. that have only a single bin)
from all contained maps. Analagous to <cite>numpy.squeeze</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>MapSet with equivalent values but singleton Map dimensions removed</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.sum">
<span class="sig-name descname"><span class="pre">sum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.sum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.sum" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.map.MapSet.to_json">
<span class="sig-name descname"><span class="pre">to_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#MapSet.to_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.MapSet.to_json" title="Link to this definition"></a></dt>
<dd><p>Serialize the state to a JSON file that can be instantiated as a new
object later.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – Filename; must be either a relative or absolute path (<em>not
interpreted as a PISA resource specification</em>)</p></li>
<li><p><strong>**kwargs</strong> – Further keyword args are sent to <cite>pisa.utils.jsons.to_json()</cite></p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#pisa.core.map.MapSet.from_json" title="pisa.core.map.MapSet.from_json"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_json</span></code></a></dt><dd><p>Intantiate new object from the file written by this method</p>
</dd>
</dl>
<p><a class="reference internal" href="pisa.utils.html#pisa.utils.jsons.to_json" title="pisa.utils.jsons.to_json"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pisa.utils.jsons.to_json</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.map.rebin">
<span class="sig-prename descclassname"><span class="pre">pisa.core.map.</span></span><span class="sig-name descname"><span class="pre">rebin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig_binning</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_binning</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalize_values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#rebin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.rebin" title="Link to this definition"></a></dt>
<dd><p>Rebin a histogram.</p>
<p>Note that the new binning’s edges must be a subset of the original
binning’s edges (i.e. no sub-division or extrapolation of bins is
implemented).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hist</strong> (<em>numpy.ndarray</em>) – Array containing the (original) histogram’s entries</p></li>
<li><p><strong>orig_binning</strong> (<a class="reference internal" href="#pisa.core.binning.MultiDimBinning" title="pisa.core.binning.MultiDimBinning"><em>MultiDimBinning</em></a>) – Original binning</p></li>
<li><p><strong>new_binning</strong> (<a class="reference internal" href="#pisa.core.binning.MultiDimBinning" title="pisa.core.binning.MultiDimBinning"><em>MultiDimBinning</em></a>) – Desired binning, where <cite>new_binning.bin_edges</cite> must be a subset of
<cite>orig_binning.bin_edges</cite>.</p></li>
<li><p><strong>normalize_values</strong> (<em>bool</em>) – Whether to apply <cite>pisa.utils.comparisons.normQuant</cite> to the bin edges
prior to comparing <cite>new_binning</cite> to <cite>orig_binning</cite>. This is
computationally expensive but ensures similar binnings and eqivalent
units do not cause erroneous results. It is recommended to set
<cite>normalize_values=True</cite> unless you know the two binning specs are
consistently defined.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>new_hist</strong> – New histogram rebinned from <cite>hist</cite></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.map.reduceToHist">
<span class="sig-prename descclassname"><span class="pre">pisa.core.map.</span></span><span class="sig-name descname"><span class="pre">reduceToHist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#reduceToHist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.reduceToHist" title="Link to this definition"></a></dt>
<dd><p>Recursively sum to reduce an object to a single histogram.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>obj</strong> (<em>numpy.ndarray</em><em>, </em><a class="reference internal" href="#pisa.core.map.Map" title="pisa.core.map.Map"><em>Map</em></a><em>, </em><a class="reference internal" href="#pisa.core.map.MapSet" title="pisa.core.map.MapSet"><em>MapSet</em></a><em>, or </em><em>iterable</em><em> of </em><em>MapSets</em>)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>hist</strong> – Single histogram version of <cite>obj</cite></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>TypeError if obj is an unhandled type</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.map.test_Map">
<span class="sig-prename descclassname"><span class="pre">pisa.core.map.</span></span><span class="sig-name descname"><span class="pre">test_Map</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#test_Map"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.test_Map" title="Link to this definition"></a></dt>
<dd><p>Unit tests for Map class</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.map.test_MapSet">
<span class="sig-prename descclassname"><span class="pre">pisa.core.map.</span></span><span class="sig-name descname"><span class="pre">test_MapSet</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#test_MapSet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.test_MapSet" title="Link to this definition"></a></dt>
<dd><p>Unit tests for MapSet class</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.map.type_error">
<span class="sig-prename descclassname"><span class="pre">pisa.core.map.</span></span><span class="sig-name descname"><span class="pre">type_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#type_error"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.type_error" title="Link to this definition"></a></dt>
<dd><p>Generic formulation of a TypeError that can be called throughout the
code</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.map.valid_nominal_values">
<span class="sig-prename descclassname"><span class="pre">pisa.core.map.</span></span><span class="sig-name descname"><span class="pre">valid_nominal_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_array</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/map.html#valid_nominal_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.map.valid_nominal_values" title="Link to this definition"></a></dt>
<dd><p>Get the the nominal values that are valid for an array</p>
</dd></dl>

</section>
<section id="module-pisa.core.param">
<span id="pisa-core-param-module"></span><h2>pisa.core.param module<a class="headerlink" href="#module-pisa.core.param" title="Link to this heading"></a></h2>
<p>Define Param, ParamSet, and ParamSelector classes for handling parameters, sets
of parameters, and being able to discretely switch between sets of parameter
values.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pisa.core.param.DerivedParam">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pisa.core.param.</span></span><span class="sig-name descname"><span class="pre">DerivedParam</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unique_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_discrete</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scales_as_log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nominal_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depends_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">help</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#DerivedParam"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.DerivedParam" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#pisa.core.param.Param" title="pisa.core.param.Param"><code class="xref py py-class docutils literal notranslate"><span class="pre">Param</span></code></a></p>
<p>This is a meta-parameter param that implements a param depending on other Params.</p>
<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.DerivedParam.callable">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">callable</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="pisa.utils.html#pisa.utils.callable.Funct" title="pisa.utils.callable.Funct"><span class="pre">Funct</span></a></em><a class="headerlink" href="#pisa.core.param.DerivedParam.callable" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.DerivedParam.depends_names">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">depends_names</span></span><a class="headerlink" href="#pisa.core.param.DerivedParam.depends_names" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.DerivedParam.dependson">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dependson</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pisa.core.param.Param" title="pisa.core.param.Param"><span class="pre">Param</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pisa.core.param.DerivedParam.dependson" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.DerivedParam.from_state">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#pisa.core.param.DerivedParam" title="pisa.core.param.DerivedParam"><span class="pre">DerivedParam</span></a></span></span><a class="reference internal" href="_modules/pisa/core/param.html#DerivedParam.from_state"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.DerivedParam.from_state" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.DerivedParam.prior_penalty">
<span class="sig-name descname"><span class="pre">prior_penalty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metric</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#DerivedParam.prior_penalty"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.DerivedParam.prior_penalty" title="Link to this definition"></a></dt>
<dd><p>We don’t want to double-count the penalty from derived params</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.DerivedParam.range">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">range</span></span><a class="headerlink" href="#pisa.core.param.DerivedParam.range" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.DerivedParam.serializable_state">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">serializable_state</span></span><a class="headerlink" href="#pisa.core.param.DerivedParam.serializable_state" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.DerivedParam.state">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">state</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span></em><a class="headerlink" href="#pisa.core.param.DerivedParam.state" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.DerivedParam.to_json">
<span class="sig-name descname"><span class="pre">to_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#DerivedParam.to_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.DerivedParam.to_json" title="Link to this definition"></a></dt>
<dd><p>Serialize the state to a JSON file that can be instantiated as a new
object later.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.DerivedParam.validate_value">
<span class="sig-name descname"><span class="pre">validate_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#DerivedParam.validate_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.DerivedParam.validate_value" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pisa.core.param.Param">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pisa.core.param.</span></span><span class="sig-name descname"><span class="pre">Param</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prior</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">range</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_fixed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unique_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_discrete</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scales_as_log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nominal_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">help</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#Param"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.Param" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Parameter class to store any kind of parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>string</em>)</p></li>
<li><p><strong>value</strong> (<em>scalar</em><em>, </em><em>bool</em><em>, </em><em>pint Quantity</em><em> (</em><em>value with units</em><em>)</em><em>, </em><em>string</em><em>, or </em><em>None</em>)</p></li>
<li><p><strong>prior</strong> (<em>pisa.prior.Prior</em><em> or </em><em>instantiable thereto</em>)</p></li>
<li><p><strong>range</strong> (<em>sequence</em><em> of </em><em>two scalars</em><em> or </em><em>Pint quantities</em><em>, or </em><em>None</em>)</p></li>
<li><p><strong>is_fixed</strong> (<em>bool</em>)</p></li>
<li><p><strong>unique_id</strong> (<em>string</em><em>, </em><em>optional</em>) – If None is provided (default), <cite>unique_id</cite> is set to <cite>name</cite></p></li>
<li><p><strong>is_discrete</strong> (<em>bool</em><em>, </em><em>optional</em>) – Default is False</p></li>
<li><p><strong>scales_as_log</strong> (<em>bool</em><em>, </em><em>optional</em>) – Rescale the log of the parameter’s value between 0 and 1 for minimization,
rather than the value itself. This can help optimizing parameters spanning
several orders of magnitude.</p></li>
<li><p><strong>nominal_value</strong> (same type as <cite>value</cite>, optional) – If None (default), set to same as <cite>value</cite></p></li>
<li><p><strong>tex</strong> (<em>None</em><em> or </em><em>string</em>)</p></li>
<li><p><strong>help</strong> (<em>string</em>)</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>In the case of a free (<a href="#id17"><span class="problematic" id="id18">`</span></a>is_fixed`=False) parameter, a valid range for the
parameter should be spicfied and a prior must be assigned to compute llh
and chi2 values.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pisa</span> <span class="kn">import</span> <span class="n">ureg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pisa.core.prior</span> <span class="kn">import</span> <span class="n">Prior</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gaussian</span> <span class="o">=</span> <span class="n">Prior</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;gaussian&#39;</span><span class="p">,</span> <span class="n">mean</span><span class="o">=</span><span class="mi">10</span><span class="o">*</span><span class="n">ureg</span><span class="o">.</span><span class="n">meter</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">stddev</span><span class="o">=</span><span class="mi">1</span><span class="o">*</span><span class="n">ureg</span><span class="o">.</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">1.5</span><span class="o">*</span><span class="n">ureg</span><span class="o">.</span><span class="n">foot</span><span class="p">,</span> <span class="n">prior</span><span class="o">=</span><span class="n">gaussian</span><span class="p">,</span>
<span class="gp">... </span>          <span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">60</span><span class="p">]</span><span class="o">*</span><span class="n">ureg</span><span class="o">.</span><span class="n">foot</span><span class="p">,</span> <span class="n">is_fixed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">value</span>
<span class="go">&lt;Quantity(1.5, &#39;foot&#39;)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">prior_penalty</span><span class="p">(</span><span class="n">metric</span><span class="o">=</span><span class="s1">&#39;llh&#39;</span><span class="p">))</span>
<span class="go">-45.532515919999994</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">10</span><span class="o">*</span><span class="n">ureg</span><span class="o">.</span><span class="n">m</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="go">&lt;Quantity(32.8083989501, &#39;foot&#39;)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">ito</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">prior_penalty</span><span class="p">(</span><span class="n">metric</span><span class="o">=</span><span class="s1">&#39;llh&#39;</span><span class="p">)</span>
<span class="go">-1.5777218104420236e-30</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">nominal_value</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.Param.dimensionality">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dimensionality</span></span><a class="headerlink" href="#pisa.core.param.Param.dimensionality" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.Param.from_json">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#Param.from_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.Param.from_json" title="Link to this definition"></a></dt>
<dd><p>Instantiate a new Param from a JSON file</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.Param.hash">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hash</span></span><a class="headerlink" href="#pisa.core.param.Param.hash" title="Link to this definition"></a></dt>
<dd><p>hash of full state</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.Param.ito">
<span class="sig-name descname"><span class="pre">ito</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">units</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#Param.ito"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.Param.ito" title="Link to this definition"></a></dt>
<dd><p>Convert this param (in place) to have units of <cite>units</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>units</strong> (<em>string</em><em> or </em><em>pint.Unit</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#pisa.core.param.Param.to" title="pisa.core.param.Param.to"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">Pint.to</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">Pint.ito</span></code></p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.Param.m">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">m</span></span><a class="headerlink" href="#pisa.core.param.Param.m" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.Param.m_as">
<span class="sig-name descname"><span class="pre">m_as</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">u</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#Param.m_as"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.Param.m_as" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.Param.magnitude">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">magnitude</span></span><a class="headerlink" href="#pisa.core.param.Param.magnitude" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.Param.nominal_value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">nominal_value</span></span><a class="headerlink" href="#pisa.core.param.Param.nominal_value" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.Param.prior">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">prior</span></span><a class="headerlink" href="#pisa.core.param.Param.prior" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.Param.prior_chi2">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">prior_chi2</span></span><a class="headerlink" href="#pisa.core.param.Param.prior_chi2" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.Param.prior_llh">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">prior_llh</span></span><a class="headerlink" href="#pisa.core.param.Param.prior_llh" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.Param.prior_penalty">
<span class="sig-name descname"><span class="pre">prior_penalty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metric</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#Param.prior_penalty"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.Param.prior_penalty" title="Link to this definition"></a></dt>
<dd><p>Return the prior penalty according to <cite>metric</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>metric</strong> (<em>str</em>) – Metric to use for evaluating the prior penalty.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>penalty</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float prior penalty value</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.Param.randomize">
<span class="sig-name descname"><span class="pre">randomize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#Param.randomize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.Param.randomize" title="Link to this definition"></a></dt>
<dd><p>Randomize the parameter’s value according to a uniform random
distribution within the parameter’s defined limits.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>random_state</strong> (<em>None</em><em>, </em><em>int</em><em>, or </em><em>RandomState</em>) – Object to use for random state. None defaults to the global random
state (this is discouraged, as results are not reproducible). An
integer acts as a seed to <cite>numpy.random.seed()</cite>, and RandomState is
a <cite>numpy.random.RandomState</cite> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.Param.range">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">range</span></span><a class="headerlink" href="#pisa.core.param.Param.range" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.Param.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#Param.reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.Param.reset" title="Link to this definition"></a></dt>
<dd><p>Reset the parameter’s value to its nominal value.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.Param.serializable_state">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">serializable_state</span></span><a class="headerlink" href="#pisa.core.param.Param.serializable_state" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.Param.set_nominal_to_current_value">
<span class="sig-name descname"><span class="pre">set_nominal_to_current_value</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#Param.set_nominal_to_current_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.Param.set_nominal_to_current_value" title="Link to this definition"></a></dt>
<dd><p>Define the nominal value to the parameter’s current value.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.Param.state">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">state</span></span><a class="headerlink" href="#pisa.core.param.Param.state" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.Param.tex">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">tex</span></span><a class="headerlink" href="#pisa.core.param.Param.tex" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.Param.to">
<span class="sig-name descname"><span class="pre">to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">units</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#Param.to"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.Param.to" title="Link to this definition"></a></dt>
<dd><p>Return an equivalent copy of param but in units of <cite>units</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>units</strong> (<em>string</em><em> or </em><em>pint.Unit</em>)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>Param</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>copy of this param, but in specified <cite>units</cite>.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#pisa.core.param.Param.ito" title="pisa.core.param.Param.ito"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ito</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">Pint.to</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">Pint.ito</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.Param.to_json">
<span class="sig-name descname"><span class="pre">to_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#Param.to_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.Param.to_json" title="Link to this definition"></a></dt>
<dd><p>Serialize the state to a JSON file that can be instantiated as a new
object later.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.Param.u">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">u</span></span><a class="headerlink" href="#pisa.core.param.Param.u" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.Param.units">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">units</span></span><a class="headerlink" href="#pisa.core.param.Param.units" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.Param.validate_value">
<span class="sig-name descname"><span class="pre">validate_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#Param.validate_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.Param.validate_value" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.Param.value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#pisa.core.param.Param.value" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pisa.core.param.ParamSelector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pisa.core.param.</span></span><span class="sig-name descname"><span class="pre">ParamSelector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">regular_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selector_param_sets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSelector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSelector" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>regular_params</strong> (<a class="reference internal" href="#pisa.core.param.ParamSet" title="pisa.core.param.ParamSet"><em>ParamSet</em></a><em> or </em><em>instantiable thereto</em>)</p></li>
<li><p><strong>selector_param_sets</strong> (<em>None</em><em>, </em><em>dict</em><em>, or </em><em>sequence</em><em> of </em><em>dict</em>) – <dl>
<dt>Dict(s) format:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>‘&lt;name1&gt;’: &lt;ParamSet or instantiable thereto&gt;,
‘&lt;name2&gt;’: &lt;ParamSet or instantiable thereto&gt;,
…</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>The names are what must be specified in <cite>selections</cite> to select the
corresponding ParamSets. Params specified in any of the ParamSets
within <cite>selector_param_sets cannot be in `regular_params</cite>.</p>
</p></li>
<li><p><strong>selections</strong> (<em>None</em><em>, </em><em>string</em><em>, or </em><em>sequence</em><em> of </em><em>strings</em>) – One string is required per</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Params specified in <cite>regular_params</cite> are enforced to be mutually exclusive
with params in the param sets specified by <cite>selector_param_sets</cite>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSelector.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selector</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSelector.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSelector.get" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSelector.param_selections">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">param_selections</span></span><a class="headerlink" href="#pisa.core.param.ParamSelector.param_selections" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSelector.params">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">params</span></span><a class="headerlink" href="#pisa.core.param.ParamSelector.params" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSelector.select_params">
<span class="sig-name descname"><span class="pre">select_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">selections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_on_missing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSelector.select_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSelector.select_params" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSelector.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">p</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selector</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">existing_must_match</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSelector.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSelector.update" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pisa.core.param.</span></span><span class="sig-name descname"><span class="pre">ParamSet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSet" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">MutableSequence</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></p>
<p>Container class for a set of parameters. Most methods are passed
through to contained params.</p>
<p>Interface is a superset of both <cite>MutableSequence</cite> (i.e., behaves like a
Python <cite>list</cite>, so ordering, appending, extending, etc. all work) and <cite>Set</cite>
(i.e., behaves like a Python <cite>set</cite>, so no duplicates (tested by name) are
allowed, you can test set membership like issuperset, issubset, etc.).
See ..</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">docs</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="mi">3</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">html</span>
</pre></div>
</div>
<p>for the definitions of the <cite>MutableSequence</cite> and <cite>Set</cite> interfaces.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>*args</strong> (<em>one</em><em> or </em><em>more Param objects</em><em> or </em><em>sequences thereof</em>)</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pisa</span> <span class="kn">import</span> <span class="n">ureg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pisa.core.prior</span> <span class="kn">import</span> <span class="n">Prior</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">e_prior</span> <span class="o">=</span> <span class="n">Prior</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;gaussian&#39;</span><span class="p">,</span> <span class="n">mean</span><span class="o">=</span><span class="mi">10</span><span class="o">*</span><span class="n">ureg</span><span class="o">.</span><span class="n">GeV</span><span class="p">,</span> <span class="n">stddev</span><span class="o">=</span><span class="mi">1</span><span class="o">*</span><span class="n">ureg</span><span class="o">.</span><span class="n">GeV</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cz_prior</span> <span class="o">=</span> <span class="n">Prior</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;uniform&#39;</span><span class="p">,</span> <span class="n">llh_offset</span><span class="o">=-</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reco_energy</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;reco_energy&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">12</span><span class="o">*</span><span class="n">ureg</span><span class="o">.</span><span class="n">GeV</span><span class="p">,</span>
<span class="gp">... </span>                    <span class="n">prior</span><span class="o">=</span><span class="n">e_prior</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">80</span><span class="p">]</span><span class="o">*</span><span class="n">ureg</span><span class="o">.</span><span class="n">GeV</span><span class="p">,</span>
<span class="gp">... </span>                    <span class="n">is_fixed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>                    <span class="n">tex</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;E^{\rm reco}&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reco_coszen</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;reco_coszen&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=-</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">prior</span><span class="o">=</span><span class="n">cz_prior</span><span class="p">,</span>
<span class="gp">... </span>                    <span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">is_fixed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">is_discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>                    <span class="n">tex</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;\cos\,\theta_Z^{\rm reco}&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">param_set</span> <span class="o">=</span> <span class="n">ParamSet</span><span class="p">(</span><span class="n">reco_energy</span><span class="p">,</span> <span class="n">reco_coszen</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">param_set</span><span class="p">)</span>
<span class="go">reco_coszen=-2.0000e-01 reco_energy=+1.2000e+01 GeV</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">param_set</span><span class="o">.</span><span class="n">free</span><span class="p">)</span>
<span class="go">reco_energy=+1.2000e+01 GeV</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">param_set</span><span class="o">.</span><span class="n">reco_energy</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="go">12 gigaelectron_volt</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">([</span><span class="n">p</span><span class="o">.</span><span class="n">prior_penalty</span><span class="p">(</span><span class="n">metric</span><span class="o">=</span><span class="s1">&#39;llh&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">param_set</span><span class="p">])</span>
<span class="go">[-5.0, -2]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">param_set</span><span class="o">.</span><span class="n">priors_penalty</span><span class="p">(</span><span class="n">metric</span><span class="o">=</span><span class="s1">&#39;llh&#39;</span><span class="p">))</span>
<span class="go">-7.0</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">param_set</span><span class="o">.</span><span class="n">values_hash</span><span class="p">)</span>
<span class="go">3917547535160330856</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">param_set</span><span class="o">.</span><span class="n">free</span><span class="o">.</span><span class="n">values_hash</span><span class="p">)</span>
<span class="go">-7121742559130813936</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.add_covariance">
<span class="sig-name descname"><span class="pre">add_covariance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">covmat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSet.add_covariance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSet.add_covariance" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>Correlates several Params.</dt><dd><p>It works by taking the existing params, and rotating them into a new, uncorrelated, basis state.
New parameters are added in the new basis, and the old params are replaced with derived params
The fits therefore are done in the uncorrelated basis</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>covmat</strong> (<em>dict</em>) – A two-deep nested dictionary for covariances between Params
Note: this is specifically not a 2D array such as to be explicit about which params are used</p></li>
<li><p><strong>ex</strong></p></li>
<li><p><strong>{</strong></p></li>
<li><p><strong>Param1</strong> – Param1: 0.9,
Param2: 0.1 },</p></li>
<li><p><strong>Param2</strong> – Param1:0.1,
Param2:0.8}</p></li>
<li><p><strong>}</strong></p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>KeyError if given dict has keys not not shared with Parameter names</strong> – </p></li>
<li><p><strong>TypeError if a given entry in covmat is not the proper type</strong> – </p></li>
<li><p><strong>NotImplementedError if the means</strong><strong> of </strong><strong>calculating the mean for a given parameters prior isn't there yet</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.are_discrete">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">are_discrete</span></span><a class="headerlink" href="#pisa.core.param.ParamSet.are_discrete" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.are_fixed">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">are_fixed</span></span><a class="headerlink" href="#pisa.core.param.ParamSet.are_fixed" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.continuous">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">continuous</span></span><a class="headerlink" href="#pisa.core.param.ParamSet.continuous" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.discrete">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">discrete</span></span><a class="headerlink" href="#pisa.core.param.ParamSet.discrete" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.extend">
<span class="sig-name descname"><span class="pre">extend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSet.extend"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSet.extend" title="Link to this definition"></a></dt>
<dd><p>Append param(s) in <cite>values</cite> to this param set, but ensure params in
<cite>values</cite> that are already in this param set match. Params with same name
attribute are not duplicated.</p>
<p>(Convenience method or calling <cite>update</cite> method with
existing_must_match=True and extend=True.)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.fix">
<span class="sig-name descname"><span class="pre">fix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSet.fix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSet.fix" title="Link to this definition"></a></dt>
<dd><p>Set param(s) to be fixed in value (and hence not modifiable by e.g.
a minimizer).</p>
<p>Note that the operation is atomic: If <cite>x</cite> is a sequence of indexing
objects, if _any_ index in <cite>x</cite> cannot be found, _no_ other params
specified in <cite>x</cite> will be set to be fixed.</p>
<p>Any params specified in <cite>x</cite> that are already fixed simply remain so.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<em>int</em><em>, </em><em>str</em><em>, </em><a class="reference internal" href="#pisa.core.param.Param" title="pisa.core.param.Param"><em>Param</em></a><em>, or </em><em>iterable thereof</em>) – Object or sequence to index into params to define which to affix.
See <cite>index</cite> method for valid objects to use for indexing into the
ParamSet.</p>
</dd>
</dl>
<p>:raises ValueError : if any index cannot be found:</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.fixed">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fixed</span></span><a class="headerlink" href="#pisa.core.param.ParamSet.fixed" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.free">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">free</span></span><a class="headerlink" href="#pisa.core.param.ParamSet.free" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.from_json">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSet.from_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSet.from_json" title="Link to this definition"></a></dt>
<dd><p>Instantiate a new ParamSet from a JSON file</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.has_derived">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">has_derived</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#pisa.core.param.ParamSet.has_derived" title="Link to this definition"></a></dt>
<dd><p>Returns whether or not this set contains a derived parameter</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.hash">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hash</span></span><a class="headerlink" href="#pisa.core.param.ParamSet.hash" title="Link to this definition"></a></dt>
<dd><p>full state hash</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.index">
<span class="sig-name descname"><span class="pre">index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSet.index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSet.index" title="Link to this definition"></a></dt>
<dd><p>Return an integer index to the Param in this ParamSet indexed by
<cite>value</cite>. This does not look up a param’s <cite>value</cite> property but looks for
param by name, integer index, or matching object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>value</strong> (<em>int</em><em>, </em><em>str</em><em> or </em><a class="reference internal" href="#pisa.core.param.Param" title="pisa.core.param.Param"><em>Param</em></a>) – The object to return an index for. If int, the integer is returned
(so long as it’s in the valid range). If str, return index of param
with matching <cite>name</cite> attribute. If Param object, return index of an
equivalent Param in this set.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>idx</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int index to a corresponding param in this ParamSet</p>
</dd>
</dl>
<p>:raises ValueError : if <cite>value</cite> does not correspond to a param in this ParamSet:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.insert">
<span class="sig-name descname"><span class="pre">insert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSet.insert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSet.insert" title="Link to this definition"></a></dt>
<dd><p>Insert value before index</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.is_nominal">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_nominal</span></span><a class="headerlink" href="#pisa.core.param.ParamSet.is_nominal" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.issubset">
<span class="sig-name descname"><span class="pre">issubset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSet.issubset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSet.issubset" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.issuperset">
<span class="sig-name descname"><span class="pre">issuperset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSet.issuperset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSet.issuperset" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.name_val_dict">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name_val_dict</span></span><a class="headerlink" href="#pisa.core.param.ParamSet.name_val_dict" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.names">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">names</span></span><a class="headerlink" href="#pisa.core.param.ParamSet.names" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.nominal_values">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">nominal_values</span></span><a class="headerlink" href="#pisa.core.param.ParamSet.nominal_values" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.nominal_values_hash">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">nominal_values_hash</span></span><a class="headerlink" href="#pisa.core.param.ParamSet.nominal_values_hash" title="Link to this definition"></a></dt>
<dd><p>hash only on the nominal param values</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.priors">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">priors</span></span><a class="headerlink" href="#pisa.core.param.ParamSet.priors" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.priors_chi2">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">priors_chi2</span></span><a class="headerlink" href="#pisa.core.param.ParamSet.priors_chi2" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.priors_llh">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">priors_llh</span></span><a class="headerlink" href="#pisa.core.param.ParamSet.priors_llh" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.priors_penalties">
<span class="sig-name descname"><span class="pre">priors_penalties</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metric</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSet.priors_penalties"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSet.priors_penalties" title="Link to this definition"></a></dt>
<dd><p>Return the prior penalties for each param at their current values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>metric</strong> (<em>str</em>) – Metric to use for evaluating the prior.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>penalty</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of float prior values, one for each param</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.priors_penalty">
<span class="sig-name descname"><span class="pre">priors_penalty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metric</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSet.priors_penalty"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSet.priors_penalty" title="Link to this definition"></a></dt>
<dd><p>Return the aggregate prior penalty for all params at their current
values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>metric</strong> (<em>str</em>) – Metric to use for evaluating the prior.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>penalty</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float sum of all parameters’ prior values</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.randomize_free">
<span class="sig-name descname"><span class="pre">randomize_free</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSet.randomize_free"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSet.randomize_free" title="Link to this definition"></a></dt>
<dd><p>Randomize any free parameters with according to a uniform random
distribution within the parameters’ defined limits.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>random_state</strong> (<em>None</em><em>, </em><em>int</em><em>, or </em><em>RandomState</em>) – Object to use for random state. None defaults to the global random
state (this is discouraged, as results are not reproducible). An
integer acts as a seed to <cite>numpy.random.seed()</cite>, and RandomState is
a <cite>numpy.random.RandomState</cite> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.ranges">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ranges</span></span><a class="headerlink" href="#pisa.core.param.ParamSet.ranges" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.replace">
<span class="sig-name descname"><span class="pre">replace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSet.replace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSet.replace" title="Link to this definition"></a></dt>
<dd><p>Replace an existing param with <cite>new</cite> param, where the existing param
must have the same <cite>name</cite> attribute as <cite>new</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>new</strong> (<a class="reference internal" href="#pisa.core.param.Param" title="pisa.core.param.Param"><em>Param</em></a>) – New param to use instead of current param.</p>
</dd>
</dl>
<p>:raises ValueError : if <cite>new.name</cite> does not match an existing param’s name:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.reset_all">
<span class="sig-name descname"><span class="pre">reset_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSet.reset_all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSet.reset_all" title="Link to this definition"></a></dt>
<dd><p>Reset both free and fixed parameters to their nominal values.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.reset_free">
<span class="sig-name descname"><span class="pre">reset_free</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSet.reset_free"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSet.reset_free" title="Link to this definition"></a></dt>
<dd><p>Reset only free parameters to their nominal values.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.serializable_state">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">serializable_state</span></span><a class="headerlink" href="#pisa.core.param.ParamSet.serializable_state" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.set_nominal_by_current_values">
<span class="sig-name descname"><span class="pre">set_nominal_by_current_values</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSet.set_nominal_by_current_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSet.set_nominal_by_current_values" title="Link to this definition"></a></dt>
<dd><p>Define the nominal values as the parameters’ current values.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.set_values">
<span class="sig-name descname"><span class="pre">set_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSet.set_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSet.set_values" title="Link to this definition"></a></dt>
<dd><p>Set values in current ParamSet to those defined in new ParamSet</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>new_params</strong> (<a class="reference internal" href="#pisa.core.param.ParamSet" title="pisa.core.param.ParamSet"><em>ParamSet</em></a>) – ParamSet containing set of values to change current ParamSet to.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.state">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">state</span></span><a class="headerlink" href="#pisa.core.param.ParamSet.state" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.tabulate">
<span class="sig-name descname"><span class="pre">tabulate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tablefmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'plain'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSet.tabulate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSet.tabulate" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.tex">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">tex</span></span><a class="headerlink" href="#pisa.core.param.ParamSet.tex" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.to_json">
<span class="sig-name descname"><span class="pre">to_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSet.to_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSet.to_json" title="Link to this definition"></a></dt>
<dd><p>Serialize the state to a JSON file that can be instantiated as a new
object later.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.unfix">
<span class="sig-name descname"><span class="pre">unfix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSet.unfix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSet.unfix" title="Link to this definition"></a></dt>
<dd><p>Set param(s) to be free (and hence  modifiable by e.g. a minimizer).</p>
<p>Note that the operation is atomic: If <cite>x</cite> is a sequence of indexing
objects, if _any_ index in <cite>x</cite> cannot be found, _no_ other params
specified in <cite>x</cite> will be set to be free.</p>
<p>Any params specified in <cite>x</cite> that are already free simply remain so.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<em>int</em><em>, </em><em>str</em><em>, </em><a class="reference internal" href="#pisa.core.param.Param" title="pisa.core.param.Param"><em>Param</em></a><em>, or </em><em>iterable thereof</em>) – Object or sequence to index into params to define which to affix.
See <cite>index</cite> method for valid objects to use for indexing into the
ParamSet.</p>
</dd>
</dl>
<p>:raises ValueError : if any index cannot be found:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">existing_must_match</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSet.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSet.update" title="Link to this definition"></a></dt>
<dd><p>Update this param set using <cite>obj</cite>.</p>
<p>Default behavior is similar to Python’s dict.update, but this can be
modified via <cite>existing_must_match</cite> and <cite>extend</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<a class="reference internal" href="#pisa.core.param.Param" title="pisa.core.param.Param"><em>Param</em></a><em>, </em><a class="reference internal" href="#pisa.core.param.ParamSet" title="pisa.core.param.ParamSet"><em>ParamSet</em></a><em>, or </em><em>sequence thereof</em>) – Param or container with params to update and/or extend this param
set</p></li>
<li><p><strong>existing_must_match</strong> (<em>bool</em>) – If True, raises ValueError if param values passed in that already
exist in this param set have differing values.</p></li>
<li><p><strong>extend</strong> (<em>bool</em>) – If True, params not in this param set are appended.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.update_existing">
<span class="sig-name descname"><span class="pre">update_existing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#ParamSet.update_existing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.ParamSet.update_existing" title="Link to this definition"></a></dt>
<dd><p>Only existing params in this set are updated by that(those) param(s)
in obj.</p>
<p>Convenience method for calling <cite>update</cite> with
existing_must_match=False and extend=False.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.values">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">values</span></span><a class="headerlink" href="#pisa.core.param.ParamSet.values" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.param.ParamSet.values_hash">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">values_hash</span></span><a class="headerlink" href="#pisa.core.param.ParamSet.values_hash" title="Link to this definition"></a></dt>
<dd><p>hash only on the current param values (not full state)</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.param.test_Param">
<span class="sig-prename descclassname"><span class="pre">pisa.core.param.</span></span><span class="sig-name descname"><span class="pre">test_Param</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#test_Param"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.test_Param" title="Link to this definition"></a></dt>
<dd><p>Unit tests for Param class</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.param.test_ParamSelector">
<span class="sig-prename descclassname"><span class="pre">pisa.core.param.</span></span><span class="sig-name descname"><span class="pre">test_ParamSelector</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#test_ParamSelector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.test_ParamSelector" title="Link to this definition"></a></dt>
<dd><p>Unit tests for ParamSelector class</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.param.test_ParamSet">
<span class="sig-prename descclassname"><span class="pre">pisa.core.param.</span></span><span class="sig-name descname"><span class="pre">test_ParamSet</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/param.html#test_ParamSet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.param.test_ParamSet" title="Link to this definition"></a></dt>
<dd><p>Unit tests for ParamSet class</p>
</dd></dl>

</section>
<section id="module-pisa.core.pipeline">
<span id="pisa-core-pipeline-module"></span><h2>pisa.core.pipeline module<a class="headerlink" href="#module-pisa.core.pipeline" title="Link to this heading"></a></h2>
<p>Implementation of the Pipeline object, and a simple script to instantiate and
run a pipeline (the outputs of which can be plotted and stored to disk).</p>
<dl class="py class">
<dt class="sig sig-object py" id="pisa.core.pipeline.Pipeline">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pisa.core.pipeline.</span></span><span class="sig-name descname"><span class="pre">Pipeline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">profile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/pipeline.html#Pipeline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.pipeline.Pipeline" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Instantiate stages according to a parsed config object; excecute
stages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<em>string</em><em>, </em><a class="reference internal" href="pisa.html#pisa.OrderedDict" title="pisa.OrderedDict"><em>OrderedDict</em></a><em>, or </em><a class="reference internal" href="pisa.utils.html#pisa.utils.config_parser.PISAConfigParser" title="pisa.utils.config_parser.PISAConfigParser"><em>PISAConfigParser</em></a>) – If string, interpret as resource location; send to the
<cite>config_parser.parse_pipeline_config()</cite> method to get a config
OrderedDict. If <cite>OrderedDict</cite>, use directly as pipeline configuration.</p></li>
<li><p><strong>profile</strong> (<em>bool</em>) – Perform timings</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.pipeline.Pipeline.add_covariance">
<span class="sig-name descname"><span class="pre">add_covariance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">covmat</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/pipeline.html#Pipeline.add_covariance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.pipeline.Pipeline.add_covariance" title="Link to this definition"></a></dt>
<dd><p>Incorporates covariance between parameters.
This is done by replacing relevant correlated parameters with “DerivedParams”</p>
<blockquote>
<div><p>that depend on new parameters in an uncorrelated basis</p>
</div></blockquote>
<p>The parameters are all updated, but this doesn’t add the new parameters in
So we go to the first stage we find that has one of the original parameters and manually add this in</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.pipeline.Pipeline.config">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">config</span></span><a class="headerlink" href="#pisa.core.pipeline.Pipeline.config" title="Link to this definition"></a></dt>
<dd><p>Deepcopy of the OrderedDict used to instantiate the pipeline</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.pipeline.Pipeline.get_outputs">
<span class="sig-name descname"><span class="pre">get_outputs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_binning</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/pipeline.html#Pipeline.get_outputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.pipeline.Pipeline.get_outputs" title="Link to this definition"></a></dt>
<dd><p>Get MapSet output</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.pipeline.Pipeline.hash">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hash</span></span><a class="headerlink" href="#pisa.core.pipeline.Pipeline.hash" title="Link to this definition"></a></dt>
<dd><p>Hash of the state of the pipeline. This hashes together a hash
of the Pipeline class’s source code and a hash of the state of each
contained stage.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.pipeline.Pipeline.index">
<span class="sig-name descname"><span class="pre">index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stage_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/pipeline.html#Pipeline.index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.pipeline.Pipeline.index" title="Link to this definition"></a></dt>
<dd><p>Return the index in the pipeline of <cite>stage_id</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stage_id</strong> (<em>string</em><em> or </em><em>int</em>) – Name of the stage, or stage number (0-indexed)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>idx</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>integer stage number (0-indexed)</p>
</dd>
</dl>
<p>:raises ValueError : if <cite>stage_id</cite> not in pipeline.:</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.pipeline.Pipeline.param_selections">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">param_selections</span></span><a class="headerlink" href="#pisa.core.pipeline.Pipeline.param_selections" title="Link to this definition"></a></dt>
<dd><p>param selections collected from all stages</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of strings</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.pipeline.Pipeline.params">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">params</span></span><a class="headerlink" href="#pisa.core.pipeline.Pipeline.params" title="Link to this definition"></a></dt>
<dd><p>pipeline’s parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pisa.core.param.ParamSet" title="pisa.core.param.ParamSet">pisa.core.param.ParamSet</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.pipeline.Pipeline.profile">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">profile</span></span><a class="headerlink" href="#pisa.core.pipeline.Pipeline.profile" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.pipeline.Pipeline.report_profile">
<span class="sig-name descname"><span class="pre">report_profile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">detailed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/pipeline.html#Pipeline.report_profile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.pipeline.Pipeline.report_profile" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.pipeline.Pipeline.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/pipeline.html#Pipeline.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.pipeline.Pipeline.run" title="Link to this definition"></a></dt>
<dd><p>Run the pipeline to compute</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.pipeline.Pipeline.select_params">
<span class="sig-name descname"><span class="pre">select_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">selections</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_on_missing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/pipeline.html#Pipeline.select_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.pipeline.Pipeline.select_params" title="Link to this definition"></a></dt>
<dd><p>Select a set of alternate param values/specifications.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>selections</strong> (<em>string</em><em> or </em><em>iterable</em><em> of </em><em>strings</em>)</p></li>
<li><p><strong>error_on_missing</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>KeyError if error_on_missing is True and any</strong><strong> of </strong><strong>selections does</strong> – not exist in any stage in the pipeline.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.pipeline.Pipeline.setup">
<span class="sig-name descname"><span class="pre">setup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/pipeline.html#Pipeline.setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.pipeline.Pipeline.setup" title="Link to this definition"></a></dt>
<dd><p>Setup (reset) all stages</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.pipeline.Pipeline.source_code_hash">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">source_code_hash</span></span><a class="headerlink" href="#pisa.core.pipeline.Pipeline.source_code_hash" title="Link to this definition"></a></dt>
<dd><p>Hash for the source code of this object’s class.</p>
<p>Not meant to be perfect, but should suffice for tracking provenance of
an object stored to disk that were produced by a Stage.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.pipeline.Pipeline.stage_names">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stage_names</span></span><a class="headerlink" href="#pisa.core.pipeline.Pipeline.stage_names" title="Link to this definition"></a></dt>
<dd><p>names of stages in the pipeline</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of strings</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.pipeline.Pipeline.stages">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stages</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pisa.core.stage.Stage" title="pisa.core.stage.Stage"><span class="pre">Stage</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pisa.core.pipeline.Pipeline.stages" title="Link to this definition"></a></dt>
<dd><p>stages in the pipeline</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of <a class="reference internal" href="#pisa.core.stage.Stage" title="pisa.core.stage.Stage">Stage</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.pipeline.Pipeline.tabulate">
<span class="sig-name descname"><span class="pre">tabulate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tablefmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'plain'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/pipeline.html#Pipeline.tabulate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.pipeline.Pipeline.tabulate" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.pipeline.Pipeline.update_params">
<span class="sig-name descname"><span class="pre">update_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">existing_must_match</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/pipeline.html#Pipeline.update_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.pipeline.Pipeline.update_params" title="Link to this definition"></a></dt>
<dd><p>Update params for the pipeline.</p>
<p>Note that any param in <cite>params</cite> in excess of those that already exist
in the pipeline’s stages will have no effect.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> (<a class="reference internal" href="#pisa.core.param.ParamSet" title="pisa.core.param.ParamSet"><em>ParamSet</em></a>) – Parameters to be updated</p></li>
<li><p><strong>existing_must_match</strong> (<em>bool</em>)</p></li>
<li><p><strong>extend</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.pipeline.main">
<span class="sig-prename descclassname"><span class="pre">pisa.core.pipeline.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">return_outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/pipeline.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.pipeline.main" title="Link to this definition"></a></dt>
<dd><p>Main; call as script with <cite>return_outputs=False</cite> or interactively with
<cite>return_outputs=True</cite></p>
<p>FIXME: This is broken in various ways (easiest fix:
pipeline.get_outputs() has no idx parameter anymore)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.pipeline.parse_args">
<span class="sig-prename descclassname"><span class="pre">pisa.core.pipeline.</span></span><span class="sig-name descname"><span class="pre">parse_args</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/pipeline.html#parse_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.pipeline.parse_args" title="Link to this definition"></a></dt>
<dd><p>Parse command line arguments if <cite>pipeline.py</cite> is called as a script.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.pipeline.test_Pipeline">
<span class="sig-prename descclassname"><span class="pre">pisa.core.pipeline.</span></span><span class="sig-name descname"><span class="pre">test_Pipeline</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/pipeline.html#test_Pipeline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.pipeline.test_Pipeline" title="Link to this definition"></a></dt>
<dd><p>Unit tests for Pipeline class</p>
</dd></dl>

</section>
<section id="module-pisa.core.prior">
<span id="pisa-core-prior-module"></span><h2>pisa.core.prior module<a class="headerlink" href="#module-pisa.core.prior" title="Link to this heading"></a></h2>
<p>Prior class for use in pisa.core.Param objects</p>
<dl class="py class">
<dt class="sig sig-object py" id="pisa.core.prior.Prior">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pisa.core.prior.</span></span><span class="sig-name descname"><span class="pre">Prior</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kind</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/prior.html#Prior"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.prior.Prior" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Prior information for a parameter. Defines the penalty (in
log-likelihood (llh)) for a parameter being at a given value (within the
prior’s valid parameter range). Chi-squared penalties can also be returned
(but the <em>definition</em> of a prior here is always in terms of llh).</p>
<p>Note that since this is a penalty, the more negative the prior’s log
likelihood, the greater the penalty and the less likely the parameter’s
value is.</p>
<p>Valid parameters and properties of the object differ based upon what <cite>kind</cite>
of prior is specified.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kind='uniform'</strong> – Uniform prior, no preference for any position relative to the valid
range, which is taken to be [-inf, +inf] [x-units].</p></li>
<li><p><strong>llh_offset=</strong><strong>...</strong> – Uniform prior, no preference for any position relative to the valid
range, which is taken to be [-inf, +inf] [x-units].</p></li>
<li><p><strong>kind='gaussian'</strong> – Gaussian prior, defining log likelihood penalty for parameter being at
any particular position. Valid range is [-inf, +inf] [x-units].</p></li>
<li><p><strong>mean=</strong><strong>...</strong> – Gaussian prior, defining log likelihood penalty for parameter being at
any particular position. Valid range is [-inf, +inf] [x-units].</p></li>
<li><p><strong>stddev=</strong><strong>...</strong> – Gaussian prior, defining log likelihood penalty for parameter being at
any particular position. Valid range is [-inf, +inf] [x-units].</p></li>
<li><p><strong>kind='linterp'</strong> – Linearly-interpolated prior. Note that “corners” in linear
interpolation may cause difficulties for some minimizers.</p></li>
<li><p><strong>param_vals=</strong><strong>...</strong> – Linearly-interpolated prior. Note that “corners” in linear
interpolation may cause difficulties for some minimizers.</p></li>
<li><p><strong>llh_vals=</strong><strong>...</strong> – Linearly-interpolated prior. Note that “corners” in linear
interpolation may cause difficulties for some minimizers.</p></li>
<li><p><strong>kind='spline'</strong> – Smooth spline interpolation.</p></li>
<li><p><strong>knots=</strong><strong>...</strong> – Smooth spline interpolation.</p></li>
<li><p><strong>coeffs=</strong><strong>...</strong> – Smooth spline interpolation.</p></li>
<li><p><strong>deg=</strong><strong>...</strong> – Smooth spline interpolation.</p></li>
<li><p><strong>Properties</strong></p></li>
<li><p><strong>----------</strong></p></li>
<li><p><strong>kind</strong> (<em>Additional properties are defined based on</em>)</p></li>
<li><p><strong>max_at</strong></p></li>
<li><p><strong>max_at_str</strong></p></li>
<li><p><strong>state</strong></p></li>
<li><p><strong>valid_range</strong></p></li>
<li><p><strong>kind</strong></p></li>
<li><p><strong>kind='uniform'</strong> – llh_offset</p></li>
<li><p><strong>kind='gaussian'</strong> – mean
stddev</p></li>
<li><p><strong>kind='linterp'</strong> – param_vals
llh_vals</p></li>
<li><p><strong>kind='spline'</strong> – knots
coeffs
deg</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.prior.Prior.chi2">
<span class="sig-name descname"><span class="pre">chi2</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pisa.core.prior.Prior.chi2" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.prior.Prior.llh">
<span class="sig-name descname"><span class="pre">llh</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pisa.core.prior.Prior.llh" title="Link to this definition"></a></dt>
<dd></dd></dl>

<p class="rubric">Notes</p>
<p>If the parameter the prior is being applied to has units, the prior’s
“x”-values specification must have compatible units.</p>
<p>If you implement a new prior, it <strong>*must*</strong> raise an exception if methods
<cite>llh</cite> or <cite>chi2</cite> are called with a parameter value outside the prior’s valid
range, so subtle bugs aren’t introduced that appear as an issue in e.g. the
minimizer.</p>
<p class="rubric">Examples</p>
<p>For spline prior: knots, coeffs, and deg can be found by, e.g.,
scipy.interpolate.splrep; evaluation of spline priors is carried out
internally by scipy.interpolate.splev, so an exact match to the output of
the spline prior can be produced as follows:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy.interpolate</span> <span class="kn">import</span> <span class="n">splrep</span><span class="p">,</span> <span class="n">splev</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Generate sample points</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">param_vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">llh_vals</span> <span class="o">=</span> <span class="n">param_vals</span><span class="o">**</span><span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define spline interpolant</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">knots</span><span class="p">,</span> <span class="n">coeffs</span><span class="p">,</span> <span class="n">deg</span> <span class="o">=</span> <span class="n">splrep</span><span class="p">(</span><span class="n">param_vals</span><span class="p">,</span> <span class="n">llh_vals</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Instantiate spline prior</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prior</span> <span class="o">=</span> <span class="n">Prior</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;spline&#39;</span><span class="p">,</span> <span class="n">knots</span><span class="o">=</span><span class="n">knots</span><span class="p">,</span> <span class="n">coeffs</span><span class="o">=</span><span class="n">coeffs</span><span class="p">,</span> <span class="n">deg</span><span class="o">=</span><span class="n">deg</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Generate sample points for interpolation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">param_upsamp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Evaluation of spline using splev</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">llh_upsamp</span> <span class="o">=</span> <span class="n">splev</span><span class="p">(</span><span class="n">param_upsamp</span><span class="p">,</span> <span class="n">tck</span><span class="o">=</span><span class="p">(</span><span class="n">knots</span><span class="p">,</span> <span class="n">coeffs</span><span class="p">,</span> <span class="n">deg</span><span class="p">),</span> <span class="n">ext</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Check that evaluation of spline matches call to prior.llh()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">all</span><span class="p">(</span><span class="n">prior</span><span class="o">.</span><span class="n">llh</span><span class="p">(</span><span class="n">param_upsamp</span><span class="p">)</span> <span class="o">==</span> <span class="n">llh_upsamp</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.prior.Prior.serializable_state">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">serializable_state</span></span><a class="headerlink" href="#pisa.core.prior.Prior.serializable_state" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.prior.Prior.state">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">state</span></span><a class="headerlink" href="#pisa.core.prior.Prior.state" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.prior.Prior.units_str">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">units_str</span></span><a class="headerlink" href="#pisa.core.prior.Prior.units_str" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.prior.get_prior_bounds">
<span class="sig-prename descclassname"><span class="pre">pisa.core.prior.</span></span><span class="sig-name descname"><span class="pre">get_prior_bounds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stddev</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/prior.html#get_prior_bounds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.prior.get_prior_bounds" title="Link to this definition"></a></dt>
<dd><p>Obtain confidence intervals for given number of
standard deviations from parameter prior.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<a class="reference internal" href="#pisa.core.prior.Prior" title="pisa.core.prior.Prior"><em>Prior</em></a><em>, </em><em>string</em><em>, or </em><em>Mapping</em>) – <p>if str, interpret as path from which to load a dict
if dict, can be:</p>
<blockquote>
<div><p>template settings dict; must supply parameter name via <cite>param</cite>
params dict; must supply parameter name via <cite>param</cite>
prior dict</p>
</div></blockquote>
</p></li>
<li><p><strong>param</strong> (<a class="reference internal" href="#pisa.core.param.Param" title="pisa.core.param.Param"><em>Param</em></a>) – Name of parameter for which to get bounds;
necessary if <cite>obj</cite> is either template settings or params</p></li>
<li><p><strong>stddev</strong> (<em>float</em><em> or </em><em>Iterable</em><em> of </em><em>floats</em>) – number of stddevs</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>bounds</strong> – A dictionary mapping the passed <cite>stddev</cite> values to the corresponding
bounds</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="pisa.html#pisa.OrderedDict" title="pisa.OrderedDict">OrderedDict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.prior.test_Prior">
<span class="sig-prename descclassname"><span class="pre">pisa.core.prior.</span></span><span class="sig-name descname"><span class="pre">test_Prior</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/prior.html#test_Prior"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.prior.test_Prior" title="Link to this definition"></a></dt>
<dd><p>Unit tests for Prior class</p>
</dd></dl>

</section>
<section id="module-pisa.core.stage">
<span id="pisa-core-stage-module"></span><h2>pisa.core.stage module<a class="headerlink" href="#module-pisa.core.stage" title="Link to this heading"></a></h2>
<p>Stage class designed to be inherited by PISA services, such that all basic
functionality is built-in.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pisa.core.stage.Stage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pisa.core.stage.</span></span><span class="sig-name descname"><span class="pre">Stage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expected_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calc_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">apply_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">profile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/stage.html#Stage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.stage.Stage" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>PISA stage base class.</p>
<p>Specialization should be done via subclasses.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<a class="reference internal" href="#pisa.core.container.ContainerSet" title="pisa.core.container.ContainerSet"><em>ContainerSet</em></a><em> or </em><em>None</em>) – object to be passed along</p></li>
<li><p><strong>params</strong> (<a class="reference internal" href="#pisa.core.param.ParamSelector" title="pisa.core.param.ParamSelector"><em>ParamSelector</em></a><em>, </em><em>dict</em><em> of </em><em>ParamSelector kwargs</em><em>, </em><a class="reference internal" href="#pisa.core.param.ParamSet" title="pisa.core.param.ParamSet"><em>ParamSet</em></a><em>, or </em><em>object instantiable to ParamSet</em>)</p></li>
<li><p><strong>expected_params</strong> (<em>list</em><em> of </em><em>strings</em>) – List containing required <cite>params</cite> names.</p></li>
<li><p><strong>debug_mode</strong> (<em>None</em><em>, </em><em>bool</em><em>, or </em><em>string</em>) – <p>If None, False, or empty string, the stage runs normally.</p>
<p>Otherwise, the stage runs in debug mode. This disables caching
(TODO: where or how?).
Services that subclass from the <cite>Stage</cite> class can then implement
further custom behavior when this mode is set by reading the value of
the <cite>self.debug_mode</cite> attribute.</p>
</p></li>
<li><p><strong>error_method</strong> (<em>None</em><em> or </em><em>string</em><em> (</em><em>not enforced</em><em>)</em>) – An option to define one or more dedicated error calculation methods
for the stage transforms or outputs</p></li>
<li><p><strong>calc_mode</strong> (<a class="reference internal" href="#pisa.core.binning.MultiDimBinning" title="pisa.core.binning.MultiDimBinning"><em>pisa.core.binning.MultiDimBinning</em></a><em>, </em><em>str</em><em>, or </em><em>None</em>) – Specify the default data representation for <cite>setup()</cite> and <cite>compute()</cite></p></li>
<li><p><strong>apply_mode</strong> (<a class="reference internal" href="#pisa.core.binning.MultiDimBinning" title="pisa.core.binning.MultiDimBinning"><em>pisa.core.binning.MultiDimBinning</em></a><em>, </em><em>str</em><em>, or </em><em>None</em>) – Specify the default data representation for <cite>apply()</cite></p></li>
<li><p><strong>profile</strong> (<em>bool</em>) – If True, perform timings for the setup, compute, and apply functions.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.stage.Stage.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/stage.html#Stage.apply"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.stage.Stage.apply" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.stage.Stage.apply_function">
<span class="sig-name descname"><span class="pre">apply_function</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/stage.html#Stage.apply_function"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.stage.Stage.apply_function" title="Link to this definition"></a></dt>
<dd><p>Implement in services (subclasses of Stage)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.stage.Stage.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/stage.html#Stage.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.stage.Stage.compute" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.stage.Stage.compute_function">
<span class="sig-name descname"><span class="pre">compute_function</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/stage.html#Stage.compute_function"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.stage.Stage.compute_function" title="Link to this definition"></a></dt>
<dd><p>Implement in services (subclasses of Stage)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.stage.Stage.debug_mode">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">debug_mode</span></span><a class="headerlink" href="#pisa.core.stage.Stage.debug_mode" title="Link to this definition"></a></dt>
<dd><p>Read-only attribute indicating whether or not the stage is being run
in debug mode. None indicates non-debug mode, while non-none value
indicates a debug mode.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.stage.Stage.error_method">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">error_method</span></span><a class="headerlink" href="#pisa.core.stage.Stage.error_method" title="Link to this definition"></a></dt>
<dd><p>Read-only attribute indicating whether or not the stage will compute
errors for its transforms and outputs (whichever is applicable). Errors
on inputs are propagated regardless of this setting.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pisa.core.stage.Stage.expected_params">
<span class="sig-name descname"><span class="pre">expected_params</span></span><a class="headerlink" href="#pisa.core.stage.Stage.expected_params" title="Link to this definition"></a></dt>
<dd><p>The full set of parameters (by name) that must be present in
<cite>params</cite></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pisa.core.stage.Stage.full_hash">
<span class="sig-name descname"><span class="pre">full_hash</span></span><a class="headerlink" href="#pisa.core.stage.Stage.full_hash" title="Link to this definition"></a></dt>
<dd><p>Whether to do full hashing if true, otherwise do fast hashing</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.stage.Stage.hash">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hash</span></span><a class="headerlink" href="#pisa.core.stage.Stage.hash" title="Link to this definition"></a></dt>
<dd><p>Combines source_code_hash and params.hash for checking/tagging
provenance of persisted (on-disk) objects.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.stage.Stage.include_attrs_for_hashes">
<span class="sig-name descname"><span class="pre">include_attrs_for_hashes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attrs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/stage.html#Stage.include_attrs_for_hashes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.stage.Stage.include_attrs_for_hashes" title="Link to this definition"></a></dt>
<dd><p>Include a class attribute or attributes in the hash
computation.</p>
<p>This is a convenience that allows some customization of hashing (and
hence caching) behavior without having to override the hash-computation
method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>attrs</strong> (<em>string</em><em> or </em><em>sequence thereof</em>) – Name of the attribute(s) to include for hashes. Each must be an
existing attribute of the object at the time this method is
invoked.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.stage.Stage.is_map">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_map</span></span><a class="headerlink" href="#pisa.core.stage.Stage.is_map" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.stage.Stage.param_selections">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">param_selections</span></span><a class="headerlink" href="#pisa.core.stage.Stage.param_selections" title="Link to this definition"></a></dt>
<dd><p>Param selections</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.stage.Stage.params">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">params</span></span><a class="headerlink" href="#pisa.core.stage.Stage.params" title="Link to this definition"></a></dt>
<dd><p>Params</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.stage.Stage.report_profile">
<span class="sig-name descname"><span class="pre">report_profile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">detailed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/stage.html#Stage.report_profile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.stage.Stage.report_profile" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.stage.Stage.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/stage.html#Stage.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.stage.Stage.run" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.stage.Stage.select_params">
<span class="sig-name descname"><span class="pre">select_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">selections</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_on_missing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/stage.html#Stage.select_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.stage.Stage.select_params" title="Link to this definition"></a></dt>
<dd><p>Apply the <cite>selections</cite> to contained ParamSet.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>selections</strong> (<em>string</em><em> or </em><em>iterable</em>)</p></li>
<li><p><strong>error_on_missing</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pisa.core.stage.Stage.service_name">
<span class="sig-name descname"><span class="pre">service_name</span></span><a class="headerlink" href="#pisa.core.stage.Stage.service_name" title="Link to this definition"></a></dt>
<dd><p>Name of the specific service implementing the stage.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.stage.Stage.setup">
<span class="sig-name descname"><span class="pre">setup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/stage.html#Stage.setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.stage.Stage.setup" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.stage.Stage.setup_function">
<span class="sig-name descname"><span class="pre">setup_function</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/stage.html#Stage.setup_function"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.stage.Stage.setup_function" title="Link to this definition"></a></dt>
<dd><p>Implement in services (subclasses of Stage)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pisa.core.stage.Stage.source_code_hash">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">source_code_hash</span></span><a class="headerlink" href="#pisa.core.stage.Stage.source_code_hash" title="Link to this definition"></a></dt>
<dd><p>Hash for the source code of this object’s class.</p>
<p>Not meant to be perfect, but should suffice for tracking provenance of
an object stored to disk that were produced by a Stage.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pisa.core.stage.Stage.stage_name">
<span class="sig-name descname"><span class="pre">stage_name</span></span><a class="headerlink" href="#pisa.core.stage.Stage.stage_name" title="Link to this definition"></a></dt>
<dd><p>Name of the stage (flux, osc, aeff, reco, pid, etc.)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pisa.core.stage.Stage.validate_params">
<span class="sig-name descname"><span class="pre">validate_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/stage.html#Stage.validate_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.stage.Stage.validate_params" title="Link to this definition"></a></dt>
<dd><p>Override this method to test if params are valid; e.g., check range
and dimensionality. Invalid params should be indicated by raising an
exception; no value should be returned.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-pisa.core.translation">
<span id="pisa-core-translation-module"></span><h2>pisa.core.translation module<a class="headerlink" href="#module-pisa.core.translation" title="Link to this heading"></a></h2>
<p>Module for data representation translation methods</p>
<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.translation.find_index">
<span class="sig-prename descclassname"><span class="pre">pisa.core.translation.</span></span><span class="sig-name descname"><span class="pre">find_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_edges</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pisa.core.translation.find_index" title="Link to this definition"></a></dt>
<dd><p>Find index in binning for <cite>val</cite>. If <cite>val</cite> is below binning range or is
nan, return -1; if <cite>val</cite> is above binning range, return num_bins. Edge
inclusivity/exclusivity is defined as ..</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span> <span class="nb">bin</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">[</span> <span class="nb">bin</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">...</span> <span class="p">[</span> <span class="nb">bin</span> <span class="n">num_bins</span><span class="o">-</span><span class="mi">1</span> <span class="p">]</span>
</pre></div>
</div>
<p>Using these indices to produce histograms should yield identical results
(ignoring underflow and overflow, which <cite>find_index</cite> has) that are
equivalent to those produced by <code class="docutils literal notranslate"><span class="pre">numpy.histogramdd</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>val</strong> (<em>scalar</em>) – Value for which to find bin index</p></li>
<li><p><strong>bin_edges</strong> (<em>1d numpy ndarray</em><em> of </em><em>2</em><em> or </em><em>more scalars</em>) – Must be monotonically increasing, and all bins are assumed to be
adjacent</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>bin_idx</strong> – -1 is returned for underflow or if <cite>val</cite> is nan. <cite>num_bins</cite> is returned
for overflow. Otherwise, for bin_edges[0] &lt;= <cite>val</cite> &lt;= bin_edges[-1],
0 &lt;= <cite>bin_idx</cite> &lt;= num_bins - 1</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int in [-1, num_bins]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.translation.find_index_unsafe">
<span class="sig-prename descclassname"><span class="pre">pisa.core.translation.</span></span><span class="sig-name descname"><span class="pre">find_index_unsafe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_edges</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pisa.core.translation.find_index_unsafe" title="Link to this definition"></a></dt>
<dd><p>Find bin index of <cite>val</cite> within binning defined by <cite>bin_edges</cite>.</p>
<p>Validity of <cite>val</cite> and <cite>bin_edges</cite> is not checked.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>val</strong> (<em>scalar</em>) – Assumed to be within range of <cite>bin_edges</cite> (including lower and upper
bin edges)</p></li>
<li><p><strong>bin_edges</strong> (<em>array</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>index</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#pisa.core.translation.find_index" title="pisa.core.translation.find_index"><code class="xref py py-obj docutils literal notranslate"><span class="pre">find_index</span></code></a></dt><dd><p>includes bounds checking and handling of special cases</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.translation.histogram">
<span class="sig-prename descclassname"><span class="pre">pisa.core.translation.</span></span><span class="sig-name descname"><span class="pre">histogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sample</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binning</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">averaged</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">apply_weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/translation.html#histogram"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.translation.histogram" title="Link to this definition"></a></dt>
<dd><p>Histogram <cite>sample</cite> points, weighting by <cite>weights</cite>, according to <cite>binning</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sample</strong> (<em>list</em><em> of </em><em>np.ndarray</em>)</p></li>
<li><p><strong>weights</strong> (<em>np.ndarray</em>)</p></li>
<li><p><strong>binning</strong> (<em>PISA MultiDimBinning</em>)</p></li>
<li><p><strong>averaged</strong> (<em>bool</em>) – If True, the histogram entries are averages of the numbers that end up
in a given bin. This for example must be used when oscillation
probabilities are translated, otherwise we end up with
probability*count per bin</p></li>
<li><p><strong>apply_weights</strong> (<em>bool</em>) – wether to use weights or not</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.translation.lookup">
<span class="sig-prename descclassname"><span class="pre">pisa.core.translation.</span></span><span class="sig-name descname"><span class="pre">lookup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sample</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flat_hist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binning</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/translation.html#lookup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.translation.lookup" title="Link to this definition"></a></dt>
<dd><p>The inverse of histograming: Extract the histogram values at <cite>sample</cite>
points.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sample</strong> (<em>num_dims list</em><em> of </em><em>length-num_samples np.ndarray</em>) – Points at which to find histogram’s values</p></li>
<li><p><strong>flat_hist</strong> (<em>np.ndarray</em>) – Histogram values</p></li>
<li><p><strong>binning</strong> (<em>num_dims MultiDimBinning</em>) – Histogram’s binning</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>hist_vals</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>len-num_samples np.ndarray</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Handles up to 3D.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.translation.resample">
<span class="sig-prename descclassname"><span class="pre">pisa.core.translation.</span></span><span class="sig-name descname"><span class="pre">resample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">old_sample</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">old_binning</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_sample</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_binning</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/translation.html#resample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.translation.resample" title="Link to this definition"></a></dt>
<dd><p>Resample binned data with a given binning into any arbitrary
<cite>new_binning</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>weights</strong> (<em>np.ndarray</em>)</p></li>
<li><p><strong>old_sample</strong> (<em>list</em><em> of </em><em>np.ndarray</em>)</p></li>
<li><p><strong>old_binning</strong> (<em>PISA MultiDimBinning</em>)</p></li>
<li><p><strong>new_sample</strong> (<em>list</em><em> of </em><em>np.ndarray</em>)</p></li>
<li><p><strong>new_binning</strong> (<em>PISA MultiDimBinning</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>new_hist_vals</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.translation.test_find_index">
<span class="sig-prename descclassname"><span class="pre">pisa.core.translation.</span></span><span class="sig-name descname"><span class="pre">test_find_index</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/translation.html#test_find_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.translation.test_find_index" title="Link to this definition"></a></dt>
<dd><p>Unit tests for <cite>find_index</cite> function.</p>
<p>Correctness is defined as producing the same histogram as numpy.histogramdd
by using the output of <cite>find_index</cite> (ignoring underflow and overflow values).
Additionally, -1 should be returned if a value is below the range
(underflow) or is nan, and num_bins should be returned for a value above
the range (overflow).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.core.translation.test_histogram">
<span class="sig-prename descclassname"><span class="pre">pisa.core.translation.</span></span><span class="sig-name descname"><span class="pre">test_histogram</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/core/translation.html#test_histogram"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.core.translation.test_histogram" title="Link to this definition"></a></dt>
<dd><p>Unit tests for <cite>histogram</cite> function.</p>
<p>Correctness is defined as matching the histogram produced by
numpy.histogramdd.</p>
</dd></dl>

</section>
<section id="module-pisa.core">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-pisa.core" title="Link to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="pisa.analysis.html" class="btn btn-neutral float-left" title="pisa.analysis package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pisa.scripts.html" class="btn btn-neutral float-right" title="pisa.scripts package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, The IceCube/PINGU Collaboration.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>