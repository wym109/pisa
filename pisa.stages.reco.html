<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pisa.stages.reco package &mdash; PISA 4.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=9f5556dd"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pisa.stages.utils package" href="pisa.stages.utils.html" />
    <link rel="prev" title="pisa.stages.pid package" href="pisa.stages.pid.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            PISA
          </a>
              <div class="version">
                4.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="pisa.html">pisa package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="pisa.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="pisa.analysis.html">pisa.analysis package</a></li>
<li class="toctree-l4"><a class="reference internal" href="pisa.core.html">pisa.core package</a></li>
<li class="toctree-l4"><a class="reference internal" href="pisa.scripts.html">pisa.scripts package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="pisa.stages.html">pisa.stages package</a></li>
<li class="toctree-l4"><a class="reference internal" href="pisa.utils.html">pisa.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pisa.html#module-pisa">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PISA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">pisa</a></li>
          <li class="breadcrumb-item"><a href="pisa.html">pisa package</a></li>
          <li class="breadcrumb-item"><a href="pisa.stages.html">pisa.stages package</a></li>
      <li class="breadcrumb-item active">pisa.stages.reco package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/pisa.stages.reco.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pisa-stages-reco-package">
<h1>pisa.stages.reco package<a class="headerlink" href="#pisa-stages-reco-package" title="Link to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading"></a></h2>
</section>
<section id="module-pisa.stages.reco.resolutions">
<span id="pisa-stages-reco-resolutions-module"></span><h2>pisa.stages.reco.resolutions module<a class="headerlink" href="#module-pisa.stages.reco.resolutions" title="Link to this heading"></a></h2>
<p>Stage for resolution improvement studies</p>
<dl class="py class">
<dt class="sig sig-object py" id="pisa.stages.reco.resolutions.resolutions">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pisa.stages.reco.resolutions.</span></span><span class="sig-name descname"><span class="pre">resolutions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">std_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/stages/reco/resolutions.html#resolutions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.stages.reco.resolutions.resolutions" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pisa.core.html#pisa.core.stage.Stage" title="pisa.core.stage.Stage"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stage</span></code></a></p>
<p>stage to change the reconstructed information by a given amount
This can be used to esimate the impact of improved recosntruction
resolutions for instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>params</strong> – <p>Expected params ..</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">energy_improvement</span> <span class="p">:</span> <span class="n">quantity</span> <span class="p">(</span><span class="n">dimensionless</span><span class="p">)</span>
   <span class="n">scale</span> <span class="n">the</span> <span class="n">reco</span> <span class="n">error</span> <span class="n">down</span> <span class="n">by</span> <span class="n">this</span> <span class="n">fraction</span>
<span class="n">coszen_improvement</span> <span class="p">:</span> <span class="n">quantity</span> <span class="p">(</span><span class="n">dimensionless</span><span class="p">)</span>
    <span class="n">scale</span> <span class="n">the</span> <span class="n">reco</span> <span class="n">error</span> <span class="n">down</span> <span class="n">by</span> <span class="n">this</span> <span class="n">fraction</span>
<span class="n">pid_improvement</span> <span class="p">:</span> <span class="n">quantity</span> <span class="p">(</span><span class="n">dimensionless</span><span class="p">)</span>
    <span class="n">applies</span> <span class="n">a</span> <span class="n">shift</span> <span class="n">to</span> <span class="n">the</span> <span class="n">classification</span> <span class="n">parameter</span>
</pre></div>
</div>
</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pisa.stages.reco.resolutions.resolutions.setup_function">
<span class="sig-name descname"><span class="pre">setup_function</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/stages/reco/resolutions.html#resolutions.setup_function"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.stages.reco.resolutions.resolutions.setup_function" title="Link to this definition"></a></dt>
<dd><p>Implement in services (subclasses of Stage)</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-pisa.stages.reco.simple_param">
<span id="pisa-stages-reco-simple-param-module"></span><h2>pisa.stages.reco.simple_param module<a class="headerlink" href="#module-pisa.stages.reco.simple_param" title="Link to this heading"></a></h2>
<p>Create reconstructed and PID variables based on truth information
for MC events using simple parameterisations.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pisa.stages.reco.simple_param.simple_param">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pisa.stages.reco.simple_param.</span></span><span class="sig-name descname"><span class="pre">simple_param</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">std_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/stages/reco/simple_param.html#simple_param"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.stages.reco.simple_param.simple_param" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pisa.core.html#pisa.core.stage.Stage" title="pisa.core.stage.Stage"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stage</span></code></a></p>
<p>Stage to generate reconstructed parameters (energy, coszen, pid) using simple parameterizations.
These are not fit to any input data, but are simple and easily understandable and require no
input reconstructed events.</p>
<p>Can easily be tuned to any desired physics case, rught now repesent a DeepCore/ICU-like detector.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>params</strong> (<a class="reference internal" href="pisa.core.html#pisa.core.param.ParamSet" title="pisa.core.param.ParamSet"><em>ParamSet</em></a>) – <p>Must exclusively have parameters:</p>
<dl class="simple">
<dt>perfect_reco<span class="classifier">bool</span></dt><dd><p>If True, use “perfect reco”: reco == true, numu(bar)_cc -&gt; tracks, rest to cascades
If False, use the parametrised reco energy, coszen and pid functions</p>
</dd>
<dt>reco_energy_params<span class="classifier">dict</span></dt><dd><p>Dict defining the <cite>params</cite> argument to <cite>simple_reco_energy_parameterization</cite>
See <cite>simple_reco_energy_parameterization</cite> documentatio for more details</p>
</dd>
<dt>reco_coszen_params<span class="classifier">dict</span></dt><dd><p>Dict defining the <cite>params</cite> argument to <cite>simple_reco_coszen_parameterization</cite>
See <cite>simple_reco_coszen_parameterization</cite> documentatio for more details</p>
</dd>
<dt>pid_track_params<span class="classifier">dict</span></dt><dd><p>Dict defining the <cite>params</cite> argument to <cite>simple_pid_parameterization</cite>
See <cite>simple_pid_parameterization</cite> documentatio for more details</p>
</dd>
<dt>track_pid<span class="classifier">float</span></dt><dd><p>The numerical ‘pid’ variable value to assign for tracks</p>
</dd>
<dt>cascade_pid<span class="classifier">float</span></dt><dd><p>The numerical ‘pid’ variable value to assign for cascades</p>
</dd>
</dl>
</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pisa.stages.reco.simple_param.simple_param.setup_function">
<span class="sig-name descname"><span class="pre">setup_function</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/stages/reco/simple_param.html#simple_param.setup_function"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.stages.reco.simple_param.simple_param.setup_function" title="Link to this definition"></a></dt>
<dd><p>Implement in services (subclasses of Stage)</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.stages.reco.simple_param.simple_pid_parameterization">
<span class="sig-prename descclassname"><span class="pre">pisa.stages.reco.simple_param.</span></span><span class="sig-name descname"><span class="pre">simple_pid_parameterization</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">particle_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">true_energy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">track_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cascade_pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/stages/reco/simple_param.html#simple_pid_parameterization"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.stages.reco.simple_param.simple_pid_parameterization" title="Link to this definition"></a></dt>
<dd><p>Function to assign a PID based on truth information.
Is particle-, interaction- and energy-dependent
Approximating energy dependence using a logistic function.
Can use as a placeholder if real reconstructions are not currently available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>particle_key</strong> (<em>string</em>) – Key identifiying the particle type, e.g. numu_cc, nutau_nc, muon, etc.</p></li>
<li><p><strong>true_energy</strong> (<em>array</em>) – True energy array.</p></li>
<li><p><strong>params</strong> (<em>dict</em>) – keys   : particle key (wilcards accepted)
values : Logistic function params for track ID (list) : [ normalisation (plateau height), steepness of rise, true_energy at half-height ]
(example: params = {‘nue*_cc’:[0.05,0.2,15.],})</p></li>
<li><p><strong>track_pid</strong> (<em>float</em>) – A PID value to assign to track-like events</p></li>
<li><p><strong>cascade_pid</strong> (<em>float</em>) – A PID value to assign to cascade-like events</p></li>
<li><p><strong>random_state</strong> (<em>np.random.RandomState</em>) – User must provide the random state, meaning that reproducible results
can be obtained when calling multiple times.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>pid</strong> – PID values.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.stages.reco.simple_param.simple_reco_coszen_parameterization">
<span class="sig-prename descclassname"><span class="pre">pisa.stages.reco.simple_param.</span></span><span class="sig-name descname"><span class="pre">simple_reco_coszen_parameterization</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">particle_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">true_energy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">true_coszen</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/stages/reco/simple_param.html#simple_reco_coszen_parameterization"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.stages.reco.simple_param.simple_reco_coszen_parameterization" title="Link to this definition"></a></dt>
<dd><p>Function to produce a smeared reconstructed cos(zenith) distribution.
Resolution is particle- and energy-dependent
Use as a placeholder if real reconstructions are not currently available.
Keep within the rotational bounds</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>true_coszen</strong> (<em>array</em>) – True cos(zenith angle) array.</p></li>
<li><p><strong>true_energy</strong> (<em>array</em>) – True energy array.</p></li>
<li><p><strong>params</strong> (<em>dict</em>) – keys   : particle key (wilcards accepted)
values : list : [ E0 (reference true_energy), median reco error at E0, index/power of energy dependence ]
(example: params = {‘nue*_cc’:[10.,0.2,0.5],})</p></li>
<li><p><strong>random_state</strong> (<em>np.random.RandomState</em>) – User must provide the random state, meaning that reproducible results
can be obtained when calling multiple times.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>reco_coszen</strong> – Reconstructed cos(zenith angle) array.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisa.stages.reco.simple_param.simple_reco_energy_parameterization">
<span class="sig-prename descclassname"><span class="pre">pisa.stages.reco.simple_param.</span></span><span class="sig-name descname"><span class="pre">simple_reco_energy_parameterization</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">particle_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">true_energy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pisa/stages/reco/simple_param.html#simple_reco_energy_parameterization"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisa.stages.reco.simple_param.simple_reco_energy_parameterization" title="Link to this definition"></a></dt>
<dd><p>Function to produce a smeared reconstructed energy distribution.
Resolution is particle- and energy-dependent
Use as a placeholder if real reconstructions are not currently available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>particle_key</strong> (<em>string</em>) – Key identifiying the particle type, e.g. numu_cc, nutau_nc, muon, etc.</p></li>
<li><p><strong>true_energy</strong> (<em>array</em>) – True energy array.</p></li>
<li><p><strong>params</strong> (<em>dict</em>) – keys   : particle key (wilcards accepted)
values : list : [ E0 (reference true_energy), median reco error at E0, index/power of energy dependence ]
(example: params = {‘nue*_cc’:[10.,0.2,0.2],})</p></li>
<li><p><strong>random_state</strong> (<em>np.random.RandomState</em>) – User must provide the random state, meaning that reproducible results
can be obtained when calling multiple times.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>reco_energy</strong> – Reconstructed energy array.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-pisa.stages.reco">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-pisa.stages.reco" title="Link to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="pisa.stages.pid.html" class="btn btn-neutral float-left" title="pisa.stages.pid package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pisa.stages.utils.html" class="btn btn-neutral float-right" title="pisa.stages.utils package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, The IceCube/PINGU Collaboration.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>